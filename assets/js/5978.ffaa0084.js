"use strict";(self.webpackChunkregal_ui_docs=self.webpackChunkregal_ui_docs||[]).push([[5978],{98160:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   m: () => (/* binding */ ImperativeState)\n/* harmony export */ });\n/* harmony import */ var _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(10009);\n\n\n// src/utils/imperativeState.ts\nvar ImperativeState = class {\n  /**\n   * @param init - Function that creates the default state.\n   */\n  constructor(init) {\n    this.init = init;\n    this.records = this.init();\n  }\n  static {\n    (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_0__/* .__name */ .K2)(this, "ImperativeState");\n  }\n  reset() {\n    this.records = this.init();\n  }\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTgxNjAuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUU4Qjs7QUFFOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFFQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJRSIsInNvdXJjZXMiOlsid2VicGFjazovL3JlZ2FsLXVpLWRvY3MvLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NodW5rcy9tZXJtYWlkLmNvcmUvY2h1bmstS0ZCT0JKSEMubWpzP2VjMWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgX19uYW1lXG59IGZyb20gXCIuL2NodW5rLTZEQkZGSElQLm1qc1wiO1xuXG4vLyBzcmMvdXRpbHMvaW1wZXJhdGl2ZVN0YXRlLnRzXG52YXIgSW1wZXJhdGl2ZVN0YXRlID0gY2xhc3Mge1xuICAvKipcbiAgICogQHBhcmFtIGluaXQgLSBGdW5jdGlvbiB0aGF0IGNyZWF0ZXMgdGhlIGRlZmF1bHQgc3RhdGUuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihpbml0KSB7XG4gICAgdGhpcy5pbml0ID0gaW5pdDtcbiAgICB0aGlzLnJlY29yZHMgPSB0aGlzLmluaXQoKTtcbiAgfVxuICBzdGF0aWMge1xuICAgIF9fbmFtZSh0aGlzLCBcIkltcGVyYXRpdmVTdGF0ZVwiKTtcbiAgfVxuICByZXNldCgpIHtcbiAgICB0aGlzLnJlY29yZHMgPSB0aGlzLmluaXQoKTtcbiAgfVxufTtcblxuZXhwb3J0IHtcbiAgSW1wZXJhdGl2ZVN0YXRlXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///98160\n')},63933:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   S: () => (/* binding */ populateCommonDb)\n/* harmony export */ });\n/* harmony import */ var _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(10009);\n\n\n// src/diagrams/common/populateCommonDb.ts\nfunction populateCommonDb(ast, db) {\n  if (ast.accDescr) {\n    db.setAccDescription?.(ast.accDescr);\n  }\n  if (ast.accTitle) {\n    db.setAccTitle?.(ast.accTitle);\n  }\n  if (ast.title) {\n    db.setDiagramTitle?.(ast.title);\n  }\n}\n(0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_0__/* .__name */ .K2)(populateCommonDb, "populateCommonDb");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjM5MzMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUU4Qjs7QUFFOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQU07O0FBSUoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWdhbC11aS1kb2NzLy4vbm9kZV9tb2R1bGVzL21lcm1haWQvZGlzdC9jaHVua3MvbWVybWFpZC5jb3JlL2NodW5rLVRNVUJFV1BELm1qcz81MDZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIF9fbmFtZVxufSBmcm9tIFwiLi9jaHVuay02REJGRkhJUC5tanNcIjtcblxuLy8gc3JjL2RpYWdyYW1zL2NvbW1vbi9wb3B1bGF0ZUNvbW1vbkRiLnRzXG5mdW5jdGlvbiBwb3B1bGF0ZUNvbW1vbkRiKGFzdCwgZGIpIHtcbiAgaWYgKGFzdC5hY2NEZXNjcikge1xuICAgIGRiLnNldEFjY0Rlc2NyaXB0aW9uPy4oYXN0LmFjY0Rlc2NyKTtcbiAgfVxuICBpZiAoYXN0LmFjY1RpdGxlKSB7XG4gICAgZGIuc2V0QWNjVGl0bGU/Lihhc3QuYWNjVGl0bGUpO1xuICB9XG4gIGlmIChhc3QudGl0bGUpIHtcbiAgICBkYi5zZXREaWFncmFtVGl0bGU/Lihhc3QudGl0bGUpO1xuICB9XG59XG5fX25hbWUocG9wdWxhdGVDb21tb25EYiwgXCJwb3B1bGF0ZUNvbW1vbkRiXCIpO1xuXG5leHBvcnQge1xuICBwb3B1bGF0ZUNvbW1vbkRiXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///63933\n')},45978:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   diagram: () => (/* binding */ diagram)\n/* harmony export */ });\n/* harmony import */ var _chunk_TMUBEWPD_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63933);\n/* harmony import */ var _chunk_KFBOBJHC_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98160);\n/* harmony import */ var _chunk_7DKRZKHE_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8159);\n/* harmony import */ var _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(10009);\n/* harmony import */ var _mermaid_js_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(78731);\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(20007);\n\n\n\n\n\n// src/diagrams/git/gitGraphParser.ts\n\n\n// src/diagrams/git/gitGraphTypes.ts\nvar commitType = {\n  NORMAL: 0,\n  REVERSE: 1,\n  HIGHLIGHT: 2,\n  MERGE: 3,\n  CHERRY_PICK: 4\n};\n\n// src/diagrams/git/gitGraphAst.ts\nvar DEFAULT_GITGRAPH_CONFIG = _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .defaultConfig_default */ .UI.gitGraph;\nvar getConfig3 = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(() => {\n  const config = (0,_chunk_7DKRZKHE_mjs__WEBPACK_IMPORTED_MODULE_2__/* .cleanAndMerge */ .$t)({\n    ...DEFAULT_GITGRAPH_CONFIG,\n    ...(0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .getConfig */ .zj)().gitGraph\n  });\n  return config;\n}, "getConfig");\nvar state = new _chunk_KFBOBJHC_mjs__WEBPACK_IMPORTED_MODULE_1__/* .ImperativeState */ .m(() => {\n  const config = getConfig3();\n  const mainBranchName = config.mainBranchName;\n  const mainBranchOrder = config.mainBranchOrder;\n  return {\n    mainBranchName,\n    commits: /* @__PURE__ */ new Map(),\n    head: null,\n    branchConfig: /* @__PURE__ */ new Map([[mainBranchName, { name: mainBranchName, order: mainBranchOrder }]]),\n    branches: /* @__PURE__ */ new Map([[mainBranchName, null]]),\n    currBranch: mainBranchName,\n    direction: "LR",\n    seq: 0,\n    options: {}\n  };\n});\nfunction getID() {\n  return (0,_chunk_7DKRZKHE_mjs__WEBPACK_IMPORTED_MODULE_2__/* .random */ .yT)({ length: 7 });\n}\n(0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(getID, "getID");\nfunction uniqBy(list, fn) {\n  const recordMap = /* @__PURE__ */ Object.create(null);\n  return list.reduce((out, item) => {\n    const key = fn(item);\n    if (!recordMap[key]) {\n      recordMap[key] = true;\n      out.push(item);\n    }\n    return out;\n  }, []);\n}\n(0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(uniqBy, "uniqBy");\nvar setDirection = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function(dir2) {\n  state.records.direction = dir2;\n}, "setDirection");\nvar setOptions = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function(rawOptString) {\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug("options str", rawOptString);\n  rawOptString = rawOptString?.trim();\n  rawOptString = rawOptString || "{}";\n  try {\n    state.records.options = JSON.parse(rawOptString);\n  } catch (e) {\n    _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.error("error while parsing gitGraph options", e.message);\n  }\n}, "setOptions");\nvar getOptions = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function() {\n  return state.records.options;\n}, "getOptions");\nvar commit = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function(commitDB) {\n  let msg = commitDB.msg;\n  let id = commitDB.id;\n  const type = commitDB.type;\n  let tags = commitDB.tags;\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.info("commit", msg, id, type, tags);\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug("Entering commit:", msg, id, type, tags);\n  const config = getConfig3();\n  id = _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .common_default */ .Y2.sanitizeText(id, config);\n  msg = _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .common_default */ .Y2.sanitizeText(msg, config);\n  tags = tags?.map((tag) => _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .common_default */ .Y2.sanitizeText(tag, config));\n  const newCommit = {\n    id: id ? id : state.records.seq + "-" + getID(),\n    message: msg,\n    seq: state.records.seq++,\n    type: type ?? commitType.NORMAL,\n    tags: tags ?? [],\n    parents: state.records.head == null ? [] : [state.records.head.id],\n    branch: state.records.currBranch\n  };\n  state.records.head = newCommit;\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.info("main branch", config.mainBranchName);\n  state.records.commits.set(newCommit.id, newCommit);\n  state.records.branches.set(state.records.currBranch, newCommit.id);\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug("in pushCommit " + newCommit.id);\n}, "commit");\nvar branch = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function(branchDB) {\n  let name = branchDB.name;\n  const order = branchDB.order;\n  name = _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .common_default */ .Y2.sanitizeText(name, getConfig3());\n  if (state.records.branches.has(name)) {\n    throw new Error(\n      `Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${name}")`\n    );\n  }\n  state.records.branches.set(name, state.records.head != null ? state.records.head.id : null);\n  state.records.branchConfig.set(name, { name, order });\n  checkout(name);\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug("in createBranch");\n}, "branch");\nvar merge = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((mergeDB) => {\n  let otherBranch = mergeDB.branch;\n  let customId = mergeDB.id;\n  const overrideType = mergeDB.type;\n  const customTags = mergeDB.tags;\n  const config = getConfig3();\n  otherBranch = _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .common_default */ .Y2.sanitizeText(otherBranch, config);\n  if (customId) {\n    customId = _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .common_default */ .Y2.sanitizeText(customId, config);\n  }\n  const currentBranchCheck = state.records.branches.get(state.records.currBranch);\n  const otherBranchCheck = state.records.branches.get(otherBranch);\n  const currentCommit = currentBranchCheck ? state.records.commits.get(currentBranchCheck) : void 0;\n  const otherCommit = otherBranchCheck ? state.records.commits.get(otherBranchCheck) : void 0;\n  if (currentCommit && otherCommit && currentCommit.branch === otherBranch) {\n    throw new Error(`Cannot merge branch \'${otherBranch}\' into itself.`);\n  }\n  if (state.records.currBranch === otherBranch) {\n    const error = new Error(\'Incorrect usage of "merge". Cannot merge a branch to itself\');\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: ["branch abc"]\n    };\n    throw error;\n  }\n  if (currentCommit === void 0 || !currentCommit) {\n    const error = new Error(\n      `Incorrect usage of "merge". Current branch (${state.records.currBranch})has no commits`\n    );\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: ["commit"]\n    };\n    throw error;\n  }\n  if (!state.records.branches.has(otherBranch)) {\n    const error = new Error(\n      \'Incorrect usage of "merge". Branch to be merged (\' + otherBranch + ") does not exist"\n    );\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: [`branch ${otherBranch}`]\n    };\n    throw error;\n  }\n  if (otherCommit === void 0 || !otherCommit) {\n    const error = new Error(\n      \'Incorrect usage of "merge". Branch to be merged (\' + otherBranch + ") has no commits"\n    );\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: [\'"commit"\']\n    };\n    throw error;\n  }\n  if (currentCommit === otherCommit) {\n    const error = new Error(\'Incorrect usage of "merge". Both branches have same head\');\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: ["branch abc"]\n    };\n    throw error;\n  }\n  if (customId && state.records.commits.has(customId)) {\n    const error = new Error(\n      \'Incorrect usage of "merge". Commit with id:\' + customId + " already exists, use different custom Id"\n    );\n    error.hash = {\n      text: `merge ${otherBranch} ${customId} ${overrideType} ${customTags?.join(" ")}`,\n      token: `merge ${otherBranch} ${customId} ${overrideType} ${customTags?.join(" ")}`,\n      expected: [\n        `merge ${otherBranch} ${customId}_UNIQUE ${overrideType} ${customTags?.join(" ")}`\n      ]\n    };\n    throw error;\n  }\n  const verifiedBranch = otherBranchCheck ? otherBranchCheck : "";\n  const commit2 = {\n    id: customId || `${state.records.seq}-${getID()}`,\n    message: `merged branch ${otherBranch} into ${state.records.currBranch}`,\n    seq: state.records.seq++,\n    parents: state.records.head == null ? [] : [state.records.head.id, verifiedBranch],\n    branch: state.records.currBranch,\n    type: commitType.MERGE,\n    customType: overrideType,\n    customId: customId ? true : false,\n    tags: customTags ?? []\n  };\n  state.records.head = commit2;\n  state.records.commits.set(commit2.id, commit2);\n  state.records.branches.set(state.records.currBranch, commit2.id);\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug(state.records.branches);\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug("in mergeBranch");\n}, "merge");\nvar cherryPick = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function(cherryPickDB) {\n  let sourceId = cherryPickDB.id;\n  let targetId = cherryPickDB.targetId;\n  let tags = cherryPickDB.tags;\n  let parentCommitId = cherryPickDB.parent;\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug("Entering cherryPick:", sourceId, targetId, tags);\n  const config = getConfig3();\n  sourceId = _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .common_default */ .Y2.sanitizeText(sourceId, config);\n  targetId = _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .common_default */ .Y2.sanitizeText(targetId, config);\n  tags = tags?.map((tag) => _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .common_default */ .Y2.sanitizeText(tag, config));\n  parentCommitId = _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .common_default */ .Y2.sanitizeText(parentCommitId, config);\n  if (!sourceId || !state.records.commits.has(sourceId)) {\n    const error = new Error(\n      \'Incorrect usage of "cherryPick". Source commit id should exist and provided\'\n    );\n    error.hash = {\n      text: `cherryPick ${sourceId} ${targetId}`,\n      token: `cherryPick ${sourceId} ${targetId}`,\n      expected: ["cherry-pick abc"]\n    };\n    throw error;\n  }\n  const sourceCommit = state.records.commits.get(sourceId);\n  if (sourceCommit === void 0 || !sourceCommit) {\n    throw new Error(\'Incorrect usage of "cherryPick". Source commit id should exist and provided\');\n  }\n  if (parentCommitId && !(Array.isArray(sourceCommit.parents) && sourceCommit.parents.includes(parentCommitId))) {\n    const error = new Error(\n      "Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit."\n    );\n    throw error;\n  }\n  const sourceCommitBranch = sourceCommit.branch;\n  if (sourceCommit.type === commitType.MERGE && !parentCommitId) {\n    const error = new Error(\n      "Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified."\n    );\n    throw error;\n  }\n  if (!targetId || !state.records.commits.has(targetId)) {\n    if (sourceCommitBranch === state.records.currBranch) {\n      const error = new Error(\n        \'Incorrect usage of "cherryPick". Source commit is already on current branch\'\n      );\n      error.hash = {\n        text: `cherryPick ${sourceId} ${targetId}`,\n        token: `cherryPick ${sourceId} ${targetId}`,\n        expected: ["cherry-pick abc"]\n      };\n      throw error;\n    }\n    const currentCommitId = state.records.branches.get(state.records.currBranch);\n    if (currentCommitId === void 0 || !currentCommitId) {\n      const error = new Error(\n        `Incorrect usage of "cherry-pick". Current branch (${state.records.currBranch})has no commits`\n      );\n      error.hash = {\n        text: `cherryPick ${sourceId} ${targetId}`,\n        token: `cherryPick ${sourceId} ${targetId}`,\n        expected: ["cherry-pick abc"]\n      };\n      throw error;\n    }\n    const currentCommit = state.records.commits.get(currentCommitId);\n    if (currentCommit === void 0 || !currentCommit) {\n      const error = new Error(\n        `Incorrect usage of "cherry-pick". Current branch (${state.records.currBranch})has no commits`\n      );\n      error.hash = {\n        text: `cherryPick ${sourceId} ${targetId}`,\n        token: `cherryPick ${sourceId} ${targetId}`,\n        expected: ["cherry-pick abc"]\n      };\n      throw error;\n    }\n    const commit2 = {\n      id: state.records.seq + "-" + getID(),\n      message: `cherry-picked ${sourceCommit?.message} into ${state.records.currBranch}`,\n      seq: state.records.seq++,\n      parents: state.records.head == null ? [] : [state.records.head.id, sourceCommit.id],\n      branch: state.records.currBranch,\n      type: commitType.CHERRY_PICK,\n      tags: tags ? tags.filter(Boolean) : [\n        `cherry-pick:${sourceCommit.id}${sourceCommit.type === commitType.MERGE ? `|parent:${parentCommitId}` : ""}`\n      ]\n    };\n    state.records.head = commit2;\n    state.records.commits.set(commit2.id, commit2);\n    state.records.branches.set(state.records.currBranch, commit2.id);\n    _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug(state.records.branches);\n    _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug("in cherryPick");\n  }\n}, "cherryPick");\nvar checkout = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function(branch2) {\n  branch2 = _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .common_default */ .Y2.sanitizeText(branch2, getConfig3());\n  if (!state.records.branches.has(branch2)) {\n    const error = new Error(\n      `Trying to checkout branch which is not yet created. (Help try using "branch ${branch2}")`\n    );\n    error.hash = {\n      text: `checkout ${branch2}`,\n      token: `checkout ${branch2}`,\n      expected: [`branch ${branch2}`]\n    };\n    throw error;\n  } else {\n    state.records.currBranch = branch2;\n    const id = state.records.branches.get(state.records.currBranch);\n    if (id === void 0 || !id) {\n      state.records.head = null;\n    } else {\n      state.records.head = state.records.commits.get(id) ?? null;\n    }\n  }\n}, "checkout");\nfunction upsert(arr, key, newVal) {\n  const index = arr.indexOf(key);\n  if (index === -1) {\n    arr.push(newVal);\n  } else {\n    arr.splice(index, 1, newVal);\n  }\n}\n(0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(upsert, "upsert");\nfunction prettyPrintCommitHistory(commitArr) {\n  const commit2 = commitArr.reduce((out, commit3) => {\n    if (out.seq > commit3.seq) {\n      return out;\n    }\n    return commit3;\n  }, commitArr[0]);\n  let line = "";\n  commitArr.forEach(function(c) {\n    if (c === commit2) {\n      line += "\t*";\n    } else {\n      line += "\t|";\n    }\n  });\n  const label = [line, commit2.id, commit2.seq];\n  for (const branch2 in state.records.branches) {\n    if (state.records.branches.get(branch2) === commit2.id) {\n      label.push(branch2);\n    }\n  }\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug(label.join(" "));\n  if (commit2.parents && commit2.parents.length == 2 && commit2.parents[0] && commit2.parents[1]) {\n    const newCommit = state.records.commits.get(commit2.parents[0]);\n    upsert(commitArr, commit2, newCommit);\n    if (commit2.parents[1]) {\n      commitArr.push(state.records.commits.get(commit2.parents[1]));\n    }\n  } else if (commit2.parents.length == 0) {\n    return;\n  } else {\n    if (commit2.parents[0]) {\n      const newCommit = state.records.commits.get(commit2.parents[0]);\n      upsert(commitArr, commit2, newCommit);\n    }\n  }\n  commitArr = uniqBy(commitArr, (c) => c.id);\n  prettyPrintCommitHistory(commitArr);\n}\n(0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(prettyPrintCommitHistory, "prettyPrintCommitHistory");\nvar prettyPrint = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function() {\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug(state.records.commits);\n  const node = getCommitsArray()[0];\n  prettyPrintCommitHistory([node]);\n}, "prettyPrint");\nvar clear2 = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function() {\n  state.reset();\n  (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .clear */ .IU)();\n}, "clear");\nvar getBranchesAsObjArray = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function() {\n  const branchesArray = [...state.records.branchConfig.values()].map((branchConfig, i) => {\n    if (branchConfig.order !== null && branchConfig.order !== void 0) {\n      return branchConfig;\n    }\n    return {\n      ...branchConfig,\n      order: parseFloat(`0.${i}`)\n    };\n  }).sort((a, b) => (a.order ?? 0) - (b.order ?? 0)).map(({ name }) => ({ name }));\n  return branchesArray;\n}, "getBranchesAsObjArray");\nvar getBranches = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function() {\n  return state.records.branches;\n}, "getBranches");\nvar getCommits = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function() {\n  return state.records.commits;\n}, "getCommits");\nvar getCommitsArray = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function() {\n  const commitArr = [...state.records.commits.values()];\n  commitArr.forEach(function(o) {\n    _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug(o.id);\n  });\n  commitArr.sort((a, b) => a.seq - b.seq);\n  return commitArr;\n}, "getCommitsArray");\nvar getCurrentBranch = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function() {\n  return state.records.currBranch;\n}, "getCurrentBranch");\nvar getDirection = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function() {\n  return state.records.direction;\n}, "getDirection");\nvar getHead = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function() {\n  return state.records.head;\n}, "getHead");\nvar db = {\n  commitType,\n  getConfig: getConfig3,\n  setDirection,\n  setOptions,\n  getOptions,\n  commit,\n  branch,\n  merge,\n  cherryPick,\n  checkout,\n  //reset,\n  prettyPrint,\n  clear: clear2,\n  getBranchesAsObjArray,\n  getBranches,\n  getCommits,\n  getCommitsArray,\n  getCurrentBranch,\n  getDirection,\n  getHead,\n  setAccTitle: _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .setAccTitle */ .SV,\n  getAccTitle: _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .getAccTitle */ .iN,\n  getAccDescription: _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .getAccDescription */ .m7,\n  setAccDescription: _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .setAccDescription */ .EI,\n  setDiagramTitle: _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .setDiagramTitle */ .ke,\n  getDiagramTitle: _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .getDiagramTitle */ .ab\n};\n\n// src/diagrams/git/gitGraphParser.ts\nvar populate = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((ast, db2) => {\n  (0,_chunk_TMUBEWPD_mjs__WEBPACK_IMPORTED_MODULE_0__/* .populateCommonDb */ .S)(ast, db2);\n  if (ast.dir) {\n    db2.setDirection(ast.dir);\n  }\n  for (const statement of ast.statements) {\n    parseStatement(statement, db2);\n  }\n}, "populate");\nvar parseStatement = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((statement, db2) => {\n  const parsers = {\n    Commit: /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((stmt) => db2.commit(parseCommit(stmt)), "Commit"),\n    Branch: /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((stmt) => db2.branch(parseBranch(stmt)), "Branch"),\n    Merge: /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((stmt) => db2.merge(parseMerge(stmt)), "Merge"),\n    Checkout: /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((stmt) => db2.checkout(parseCheckout(stmt)), "Checkout"),\n    CherryPicking: /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((stmt) => db2.cherryPick(parseCherryPicking(stmt)), "CherryPicking")\n  };\n  const parser2 = parsers[statement.$type];\n  if (parser2) {\n    parser2(statement);\n  } else {\n    _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.error(`Unknown statement type: ${statement.$type}`);\n  }\n}, "parseStatement");\nvar parseCommit = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((commit2) => {\n  const commitDB = {\n    id: commit2.id,\n    msg: commit2.message ?? "",\n    type: commit2.type !== void 0 ? commitType[commit2.type] : commitType.NORMAL,\n    tags: commit2.tags ?? void 0\n  };\n  return commitDB;\n}, "parseCommit");\nvar parseBranch = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((branch2) => {\n  const branchDB = {\n    name: branch2.name,\n    order: branch2.order ?? 0\n  };\n  return branchDB;\n}, "parseBranch");\nvar parseMerge = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((merge2) => {\n  const mergeDB = {\n    branch: merge2.branch,\n    id: merge2.id ?? "",\n    type: merge2.type !== void 0 ? commitType[merge2.type] : void 0,\n    tags: merge2.tags ?? void 0\n  };\n  return mergeDB;\n}, "parseMerge");\nvar parseCheckout = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((checkout2) => {\n  const branch2 = checkout2.branch;\n  return branch2;\n}, "parseCheckout");\nvar parseCherryPicking = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((cherryPicking) => {\n  const cherryPickDB = {\n    id: cherryPicking.id,\n    targetId: "",\n    tags: cherryPicking.tags?.length === 0 ? void 0 : cherryPicking.tags,\n    parent: cherryPicking.parent\n  };\n  return cherryPickDB;\n}, "parseCherryPicking");\nvar parser = {\n  parse: /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(async (input) => {\n    const ast = await (0,_mermaid_js_parser__WEBPACK_IMPORTED_MODULE_4__/* .parse */ .qg)("gitGraph", input);\n    _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug(ast);\n    populate(ast, db);\n  }, "parse")\n};\nif (void 0) {\n  const { it, expect, describe } = void 0;\n  const mockDB = {\n    commitType,\n    setDirection: vi.fn(),\n    commit: vi.fn(),\n    branch: vi.fn(),\n    merge: vi.fn(),\n    cherryPick: vi.fn(),\n    checkout: vi.fn()\n  };\n  describe("GitGraph Parser", () => {\n    it("should parse a commit statement", () => {\n      const commit2 = {\n        $type: "Commit",\n        id: "1",\n        message: "test",\n        tags: ["tag1", "tag2"],\n        type: "NORMAL"\n      };\n      parseStatement(commit2, mockDB);\n      expect(mockDB.commit).toHaveBeenCalledWith({\n        id: "1",\n        msg: "test",\n        tags: ["tag1", "tag2"],\n        type: 0\n      });\n    });\n    it("should parse a branch statement", () => {\n      const branch2 = {\n        $type: "Branch",\n        name: "newBranch",\n        order: 1\n      };\n      parseStatement(branch2, mockDB);\n      expect(mockDB.branch).toHaveBeenCalledWith({ name: "newBranch", order: 1 });\n    });\n    it("should parse a checkout statement", () => {\n      const checkout2 = {\n        $type: "Checkout",\n        branch: "newBranch"\n      };\n      parseStatement(checkout2, mockDB);\n      expect(mockDB.checkout).toHaveBeenCalledWith("newBranch");\n    });\n    it("should parse a merge statement", () => {\n      const merge2 = {\n        $type: "Merge",\n        branch: "newBranch",\n        id: "1",\n        tags: ["tag1", "tag2"],\n        type: "NORMAL"\n      };\n      parseStatement(merge2, mockDB);\n      expect(mockDB.merge).toHaveBeenCalledWith({\n        branch: "newBranch",\n        id: "1",\n        tags: ["tag1", "tag2"],\n        type: 0\n      });\n    });\n    it("should parse a cherry picking statement", () => {\n      const cherryPick2 = {\n        $type: "CherryPicking",\n        id: "1",\n        tags: ["tag1", "tag2"],\n        parent: "2"\n      };\n      parseStatement(cherryPick2, mockDB);\n      expect(mockDB.cherryPick).toHaveBeenCalledWith({\n        id: "1",\n        targetId: "",\n        parent: "2",\n        tags: ["tag1", "tag2"]\n      });\n    });\n    it("should parse a langium generated gitGraph ast", () => {\n      const dummy = {\n        $type: "GitGraph",\n        statements: []\n      };\n      const gitGraphAst = {\n        $type: "GitGraph",\n        statements: [\n          {\n            $container: dummy,\n            $type: "Commit",\n            id: "1",\n            message: "test",\n            tags: ["tag1", "tag2"],\n            type: "NORMAL"\n          },\n          {\n            $container: dummy,\n            $type: "Branch",\n            name: "newBranch",\n            order: 1\n          },\n          {\n            $container: dummy,\n            $type: "Merge",\n            branch: "newBranch",\n            id: "1",\n            tags: ["tag1", "tag2"],\n            type: "NORMAL"\n          },\n          {\n            $container: dummy,\n            $type: "Checkout",\n            branch: "newBranch"\n          },\n          {\n            $container: dummy,\n            $type: "CherryPicking",\n            id: "1",\n            tags: ["tag1", "tag2"],\n            parent: "2"\n          }\n        ]\n      };\n      populate(gitGraphAst, mockDB);\n      expect(mockDB.commit).toHaveBeenCalledWith({\n        id: "1",\n        msg: "test",\n        tags: ["tag1", "tag2"],\n        type: 0\n      });\n      expect(mockDB.branch).toHaveBeenCalledWith({ name: "newBranch", order: 1 });\n      expect(mockDB.merge).toHaveBeenCalledWith({\n        branch: "newBranch",\n        id: "1",\n        tags: ["tag1", "tag2"],\n        type: 0\n      });\n      expect(mockDB.checkout).toHaveBeenCalledWith("newBranch");\n    });\n  });\n}\n\n// src/diagrams/git/gitGraphRenderer.ts\n\nvar DEFAULT_CONFIG = (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .getConfig2 */ .D7)();\nvar DEFAULT_GITGRAPH_CONFIG2 = DEFAULT_CONFIG?.gitGraph;\nvar LAYOUT_OFFSET = 10;\nvar COMMIT_STEP = 40;\nvar PX = 4;\nvar PY = 2;\nvar THEME_COLOR_LIMIT = 8;\nvar branchPos = /* @__PURE__ */ new Map();\nvar commitPos = /* @__PURE__ */ new Map();\nvar defaultPos = 30;\nvar allCommitsDict = /* @__PURE__ */ new Map();\nvar lanes = [];\nvar maxPos = 0;\nvar dir = "LR";\nvar clear3 = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(() => {\n  branchPos.clear();\n  commitPos.clear();\n  allCommitsDict.clear();\n  maxPos = 0;\n  lanes = [];\n  dir = "LR";\n}, "clear");\nvar drawText = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((txt) => {\n  const svgLabel = document.createElementNS("http://www.w3.org/2000/svg", "text");\n  const rows = typeof txt === "string" ? txt.split(/\\\\n|\\n|<br\\s*\\/?>/gi) : txt;\n  rows.forEach((row) => {\n    const tspan = document.createElementNS("http://www.w3.org/2000/svg", "tspan");\n    tspan.setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space", "preserve");\n    tspan.setAttribute("dy", "1em");\n    tspan.setAttribute("x", "0");\n    tspan.setAttribute("class", "row");\n    tspan.textContent = row.trim();\n    svgLabel.appendChild(tspan);\n  });\n  return svgLabel;\n}, "drawText");\nvar findClosestParent = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((parents) => {\n  let closestParent;\n  let comparisonFunc;\n  let targetPosition;\n  if (dir === "BT") {\n    comparisonFunc = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((a, b) => a <= b, "comparisonFunc");\n    targetPosition = Infinity;\n  } else {\n    comparisonFunc = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((a, b) => a >= b, "comparisonFunc");\n    targetPosition = 0;\n  }\n  parents.forEach((parent) => {\n    const parentPosition = dir === "TB" || dir == "BT" ? commitPos.get(parent)?.y : commitPos.get(parent)?.x;\n    if (parentPosition !== void 0 && comparisonFunc(parentPosition, targetPosition)) {\n      closestParent = parent;\n      targetPosition = parentPosition;\n    }\n  });\n  return closestParent;\n}, "findClosestParent");\nvar findClosestParentBT = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((parents) => {\n  let closestParent = "";\n  let maxPosition = Infinity;\n  parents.forEach((parent) => {\n    const parentPosition = commitPos.get(parent).y;\n    if (parentPosition <= maxPosition) {\n      closestParent = parent;\n      maxPosition = parentPosition;\n    }\n  });\n  return closestParent || void 0;\n}, "findClosestParentBT");\nvar setParallelBTPos = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((sortedKeys, commits, defaultPos2) => {\n  let curPos = defaultPos2;\n  let maxPosition = defaultPos2;\n  const roots = [];\n  sortedKeys.forEach((key) => {\n    const commit2 = commits.get(key);\n    if (!commit2) {\n      throw new Error(`Commit not found for key ${key}`);\n    }\n    if (commit2.parents.length) {\n      curPos = calculateCommitPosition(commit2);\n      maxPosition = Math.max(curPos, maxPosition);\n    } else {\n      roots.push(commit2);\n    }\n    setCommitPosition(commit2, curPos);\n  });\n  curPos = maxPosition;\n  roots.forEach((commit2) => {\n    setRootPosition(commit2, curPos, defaultPos2);\n  });\n  sortedKeys.forEach((key) => {\n    const commit2 = commits.get(key);\n    if (commit2?.parents.length) {\n      const closestParent = findClosestParentBT(commit2.parents);\n      curPos = commitPos.get(closestParent).y - COMMIT_STEP;\n      if (curPos <= maxPosition) {\n        maxPosition = curPos;\n      }\n      const x = branchPos.get(commit2.branch).pos;\n      const y = curPos - LAYOUT_OFFSET;\n      commitPos.set(commit2.id, { x, y });\n    }\n  });\n}, "setParallelBTPos");\nvar findClosestParentPos = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((commit2) => {\n  const closestParent = findClosestParent(commit2.parents.filter((p) => p !== null));\n  if (!closestParent) {\n    throw new Error(`Closest parent not found for commit ${commit2.id}`);\n  }\n  const closestParentPos = commitPos.get(closestParent)?.y;\n  if (closestParentPos === void 0) {\n    throw new Error(`Closest parent position not found for commit ${commit2.id}`);\n  }\n  return closestParentPos;\n}, "findClosestParentPos");\nvar calculateCommitPosition = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((commit2) => {\n  const closestParentPos = findClosestParentPos(commit2);\n  return closestParentPos + COMMIT_STEP;\n}, "calculateCommitPosition");\nvar setCommitPosition = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((commit2, curPos) => {\n  const branch2 = branchPos.get(commit2.branch);\n  if (!branch2) {\n    throw new Error(`Branch not found for commit ${commit2.id}`);\n  }\n  const x = branch2.pos;\n  const y = curPos + LAYOUT_OFFSET;\n  commitPos.set(commit2.id, { x, y });\n  return { x, y };\n}, "setCommitPosition");\nvar setRootPosition = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((commit2, curPos, defaultPos2) => {\n  const branch2 = branchPos.get(commit2.branch);\n  if (!branch2) {\n    throw new Error(`Branch not found for commit ${commit2.id}`);\n  }\n  const y = curPos + defaultPos2;\n  const x = branch2.pos;\n  commitPos.set(commit2.id, { x, y });\n}, "setRootPosition");\nvar drawCommitBullet = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((gBullets, commit2, commitPosition, typeClass, branchIndex, commitSymbolType) => {\n  if (commitSymbolType === commitType.HIGHLIGHT) {\n    gBullets.append("rect").attr("x", commitPosition.x - 10).attr("y", commitPosition.y - 10).attr("width", 20).attr("height", 20).attr(\n      "class",\n      `commit ${commit2.id} commit-highlight${branchIndex % THEME_COLOR_LIMIT} ${typeClass}-outer`\n    );\n    gBullets.append("rect").attr("x", commitPosition.x - 6).attr("y", commitPosition.y - 6).attr("width", 12).attr("height", 12).attr(\n      "class",\n      `commit ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT} ${typeClass}-inner`\n    );\n  } else if (commitSymbolType === commitType.CHERRY_PICK) {\n    gBullets.append("circle").attr("cx", commitPosition.x).attr("cy", commitPosition.y).attr("r", 10).attr("class", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append("circle").attr("cx", commitPosition.x - 3).attr("cy", commitPosition.y + 2).attr("r", 2.75).attr("fill", "#fff").attr("class", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append("circle").attr("cx", commitPosition.x + 3).attr("cy", commitPosition.y + 2).attr("r", 2.75).attr("fill", "#fff").attr("class", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append("line").attr("x1", commitPosition.x + 3).attr("y1", commitPosition.y + 1).attr("x2", commitPosition.x).attr("y2", commitPosition.y - 5).attr("stroke", "#fff").attr("class", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append("line").attr("x1", commitPosition.x - 3).attr("y1", commitPosition.y + 1).attr("x2", commitPosition.x).attr("y2", commitPosition.y - 5).attr("stroke", "#fff").attr("class", `commit ${commit2.id} ${typeClass}`);\n  } else {\n    const circle = gBullets.append("circle");\n    circle.attr("cx", commitPosition.x);\n    circle.attr("cy", commitPosition.y);\n    circle.attr("r", commit2.type === commitType.MERGE ? 9 : 10);\n    circle.attr("class", `commit ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT}`);\n    if (commitSymbolType === commitType.MERGE) {\n      const circle2 = gBullets.append("circle");\n      circle2.attr("cx", commitPosition.x);\n      circle2.attr("cy", commitPosition.y);\n      circle2.attr("r", 6);\n      circle2.attr(\n        "class",\n        `commit ${typeClass} ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT}`\n      );\n    }\n    if (commitSymbolType === commitType.REVERSE) {\n      const cross = gBullets.append("path");\n      cross.attr(\n        "d",\n        `M ${commitPosition.x - 5},${commitPosition.y - 5}L${commitPosition.x + 5},${commitPosition.y + 5}M${commitPosition.x - 5},${commitPosition.y + 5}L${commitPosition.x + 5},${commitPosition.y - 5}`\n      ).attr("class", `commit ${typeClass} ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT}`);\n    }\n  }\n}, "drawCommitBullet");\nvar drawCommitLabel = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((gLabels, commit2, commitPosition, pos) => {\n  if (commit2.type !== commitType.CHERRY_PICK && (commit2.customId && commit2.type === commitType.MERGE || commit2.type !== commitType.MERGE) && DEFAULT_GITGRAPH_CONFIG2?.showCommitLabel) {\n    const wrapper = gLabels.append("g");\n    const labelBkg = wrapper.insert("rect").attr("class", "commit-label-bkg");\n    const text = wrapper.append("text").attr("x", pos).attr("y", commitPosition.y + 25).attr("class", "commit-label").text(commit2.id);\n    const bbox = text.node()?.getBBox();\n    if (bbox) {\n      labelBkg.attr("x", commitPosition.posWithOffset - bbox.width / 2 - PY).attr("y", commitPosition.y + 13.5).attr("width", bbox.width + 2 * PY).attr("height", bbox.height + 2 * PY);\n      if (dir === "TB" || dir === "BT") {\n        labelBkg.attr("x", commitPosition.x - (bbox.width + 4 * PX + 5)).attr("y", commitPosition.y - 12);\n        text.attr("x", commitPosition.x - (bbox.width + 4 * PX)).attr("y", commitPosition.y + bbox.height - 12);\n      } else {\n        text.attr("x", commitPosition.posWithOffset - bbox.width / 2);\n      }\n      if (DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel) {\n        if (dir === "TB" || dir === "BT") {\n          text.attr(\n            "transform",\n            "rotate(-45, " + commitPosition.x + ", " + commitPosition.y + ")"\n          );\n          labelBkg.attr(\n            "transform",\n            "rotate(-45, " + commitPosition.x + ", " + commitPosition.y + ")"\n          );\n        } else {\n          const r_x = -7.5 - (bbox.width + 10) / 25 * 9.5;\n          const r_y = 10 + bbox.width / 25 * 8.5;\n          wrapper.attr(\n            "transform",\n            "translate(" + r_x + ", " + r_y + ") rotate(-45, " + pos + ", " + commitPosition.y + ")"\n          );\n        }\n      }\n    }\n  }\n}, "drawCommitLabel");\nvar drawCommitTags = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((gLabels, commit2, commitPosition, pos) => {\n  if (commit2.tags.length > 0) {\n    let yOffset = 0;\n    let maxTagBboxWidth = 0;\n    let maxTagBboxHeight = 0;\n    const tagElements = [];\n    for (const tagValue of commit2.tags.reverse()) {\n      const rect = gLabels.insert("polygon");\n      const hole = gLabels.append("circle");\n      const tag = gLabels.append("text").attr("y", commitPosition.y - 16 - yOffset).attr("class", "tag-label").text(tagValue);\n      const tagBbox = tag.node()?.getBBox();\n      if (!tagBbox) {\n        throw new Error("Tag bbox not found");\n      }\n      maxTagBboxWidth = Math.max(maxTagBboxWidth, tagBbox.width);\n      maxTagBboxHeight = Math.max(maxTagBboxHeight, tagBbox.height);\n      tag.attr("x", commitPosition.posWithOffset - tagBbox.width / 2);\n      tagElements.push({\n        tag,\n        hole,\n        rect,\n        yOffset\n      });\n      yOffset += 20;\n    }\n    for (const { tag, hole, rect, yOffset: yOffset2 } of tagElements) {\n      const h2 = maxTagBboxHeight / 2;\n      const ly = commitPosition.y - 19.2 - yOffset2;\n      rect.attr("class", "tag-label-bkg").attr(\n        "points",\n        `\n      ${pos - maxTagBboxWidth / 2 - PX / 2},${ly + PY}  \n      ${pos - maxTagBboxWidth / 2 - PX / 2},${ly - PY}\n      ${commitPosition.posWithOffset - maxTagBboxWidth / 2 - PX},${ly - h2 - PY}\n      ${commitPosition.posWithOffset + maxTagBboxWidth / 2 + PX},${ly - h2 - PY}\n      ${commitPosition.posWithOffset + maxTagBboxWidth / 2 + PX},${ly + h2 + PY}\n      ${commitPosition.posWithOffset - maxTagBboxWidth / 2 - PX},${ly + h2 + PY}`\n      );\n      hole.attr("cy", ly).attr("cx", pos - maxTagBboxWidth / 2 + PX / 2).attr("r", 1.5).attr("class", "tag-hole");\n      if (dir === "TB" || dir === "BT") {\n        const yOrigin = pos + yOffset2;\n        rect.attr("class", "tag-label-bkg").attr(\n          "points",\n          `\n        ${commitPosition.x},${yOrigin + 2}\n        ${commitPosition.x},${yOrigin - 2}\n        ${commitPosition.x + LAYOUT_OFFSET},${yOrigin - h2 - 2}\n        ${commitPosition.x + LAYOUT_OFFSET + maxTagBboxWidth + 4},${yOrigin - h2 - 2}\n        ${commitPosition.x + LAYOUT_OFFSET + maxTagBboxWidth + 4},${yOrigin + h2 + 2}\n        ${commitPosition.x + LAYOUT_OFFSET},${yOrigin + h2 + 2}`\n        ).attr("transform", "translate(12,12) rotate(45, " + commitPosition.x + "," + pos + ")");\n        hole.attr("cx", commitPosition.x + PX / 2).attr("cy", yOrigin).attr("transform", "translate(12,12) rotate(45, " + commitPosition.x + "," + pos + ")");\n        tag.attr("x", commitPosition.x + 5).attr("y", yOrigin + 3).attr("transform", "translate(14,14) rotate(45, " + commitPosition.x + "," + pos + ")");\n      }\n    }\n  }\n}, "drawCommitTags");\nvar getCommitClassType = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((commit2) => {\n  const commitSymbolType = commit2.customType ?? commit2.type;\n  switch (commitSymbolType) {\n    case commitType.NORMAL:\n      return "commit-normal";\n    case commitType.REVERSE:\n      return "commit-reverse";\n    case commitType.HIGHLIGHT:\n      return "commit-highlight";\n    case commitType.MERGE:\n      return "commit-merge";\n    case commitType.CHERRY_PICK:\n      return "commit-cherry-pick";\n    default:\n      return "commit-normal";\n  }\n}, "getCommitClassType");\nvar calculatePosition = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((commit2, dir2, pos, commitPos2) => {\n  const defaultCommitPosition = { x: 0, y: 0 };\n  if (commit2.parents.length > 0) {\n    const closestParent = findClosestParent(commit2.parents);\n    if (closestParent) {\n      const parentPosition = commitPos2.get(closestParent) ?? defaultCommitPosition;\n      if (dir2 === "TB") {\n        return parentPosition.y + COMMIT_STEP;\n      } else if (dir2 === "BT") {\n        const currentPosition = commitPos2.get(commit2.id) ?? defaultCommitPosition;\n        return currentPosition.y - COMMIT_STEP;\n      } else {\n        return parentPosition.x + COMMIT_STEP;\n      }\n    }\n  } else {\n    if (dir2 === "TB") {\n      return defaultPos;\n    } else if (dir2 === "BT") {\n      const currentPosition = commitPos2.get(commit2.id) ?? defaultCommitPosition;\n      return currentPosition.y - COMMIT_STEP;\n    } else {\n      return 0;\n    }\n  }\n  return 0;\n}, "calculatePosition");\nvar getCommitPosition = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((commit2, pos, isParallelCommits) => {\n  const posWithOffset = dir === "BT" && isParallelCommits ? pos : pos + LAYOUT_OFFSET;\n  const y = dir === "TB" || dir === "BT" ? posWithOffset : branchPos.get(commit2.branch)?.pos;\n  const x = dir === "TB" || dir === "BT" ? branchPos.get(commit2.branch)?.pos : posWithOffset;\n  if (x === void 0 || y === void 0) {\n    throw new Error(`Position were undefined for commit ${commit2.id}`);\n  }\n  return { x, y, posWithOffset };\n}, "getCommitPosition");\nvar drawCommits = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((svg, commits, modifyGraph) => {\n  if (!DEFAULT_GITGRAPH_CONFIG2) {\n    throw new Error("GitGraph config not found");\n  }\n  const gBullets = svg.append("g").attr("class", "commit-bullets");\n  const gLabels = svg.append("g").attr("class", "commit-labels");\n  let pos = dir === "TB" || dir === "BT" ? defaultPos : 0;\n  const keys = [...commits.keys()];\n  const isParallelCommits = DEFAULT_GITGRAPH_CONFIG2?.parallelCommits ?? false;\n  const sortKeys = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((a, b) => {\n    const seqA = commits.get(a)?.seq;\n    const seqB = commits.get(b)?.seq;\n    return seqA !== void 0 && seqB !== void 0 ? seqA - seqB : 0;\n  }, "sortKeys");\n  let sortedKeys = keys.sort(sortKeys);\n  if (dir === "BT") {\n    if (isParallelCommits) {\n      setParallelBTPos(sortedKeys, commits, pos);\n    }\n    sortedKeys = sortedKeys.reverse();\n  }\n  sortedKeys.forEach((key) => {\n    const commit2 = commits.get(key);\n    if (!commit2) {\n      throw new Error(`Commit not found for key ${key}`);\n    }\n    if (isParallelCommits) {\n      pos = calculatePosition(commit2, dir, pos, commitPos);\n    }\n    const commitPosition = getCommitPosition(commit2, pos, isParallelCommits);\n    if (modifyGraph) {\n      const typeClass = getCommitClassType(commit2);\n      const commitSymbolType = commit2.customType ?? commit2.type;\n      const branchIndex = branchPos.get(commit2.branch)?.index ?? 0;\n      drawCommitBullet(gBullets, commit2, commitPosition, typeClass, branchIndex, commitSymbolType);\n      drawCommitLabel(gLabels, commit2, commitPosition, pos);\n      drawCommitTags(gLabels, commit2, commitPosition, pos);\n    }\n    if (dir === "TB" || dir === "BT") {\n      commitPos.set(commit2.id, { x: commitPosition.x, y: commitPosition.posWithOffset });\n    } else {\n      commitPos.set(commit2.id, { x: commitPosition.posWithOffset, y: commitPosition.y });\n    }\n    pos = dir === "BT" && isParallelCommits ? pos + COMMIT_STEP : pos + COMMIT_STEP + LAYOUT_OFFSET;\n    if (pos > maxPos) {\n      maxPos = pos;\n    }\n  });\n}, "drawCommits");\nvar shouldRerouteArrow = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((commitA, commitB, p1, p2, allCommits) => {\n  const commitBIsFurthest = dir === "TB" || dir === "BT" ? p1.x < p2.x : p1.y < p2.y;\n  const branchToGetCurve = commitBIsFurthest ? commitB.branch : commitA.branch;\n  const isOnBranchToGetCurve = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((x) => x.branch === branchToGetCurve, "isOnBranchToGetCurve");\n  const isBetweenCommits = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((x) => x.seq > commitA.seq && x.seq < commitB.seq, "isBetweenCommits");\n  return [...allCommits.values()].some((commitX) => {\n    return isBetweenCommits(commitX) && isOnBranchToGetCurve(commitX);\n  });\n}, "shouldRerouteArrow");\nvar findLane = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((y1, y2, depth = 0) => {\n  const candidate = y1 + Math.abs(y1 - y2) / 2;\n  if (depth > 5) {\n    return candidate;\n  }\n  const ok = lanes.every((lane) => Math.abs(lane - candidate) >= 10);\n  if (ok) {\n    lanes.push(candidate);\n    return candidate;\n  }\n  const diff = Math.abs(y1 - y2);\n  return findLane(y1, y2 - diff / 5, depth + 1);\n}, "findLane");\nvar drawArrow = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((svg, commitA, commitB, allCommits) => {\n  const p1 = commitPos.get(commitA.id);\n  const p2 = commitPos.get(commitB.id);\n  if (p1 === void 0 || p2 === void 0) {\n    throw new Error(`Commit positions not found for commits ${commitA.id} and ${commitB.id}`);\n  }\n  const arrowNeedsRerouting = shouldRerouteArrow(commitA, commitB, p1, p2, allCommits);\n  let arc = "";\n  let arc2 = "";\n  let radius = 0;\n  let offset = 0;\n  let colorClassNum = branchPos.get(commitB.branch)?.index;\n  if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n    colorClassNum = branchPos.get(commitA.branch)?.index;\n  }\n  let lineDef;\n  if (arrowNeedsRerouting) {\n    arc = "A 10 10, 0, 0, 0,";\n    arc2 = "A 10 10, 0, 0, 1,";\n    radius = 10;\n    offset = 10;\n    const lineY = p1.y < p2.y ? findLane(p1.y, p2.y) : findLane(p2.y, p1.y);\n    const lineX = p1.x < p2.x ? findLane(p1.x, p2.x) : findLane(p2.x, p1.x);\n    if (dir === "TB") {\n      if (p1.x < p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX - radius} ${p1.y} ${arc2} ${lineX} ${p1.y + offset} L ${lineX} ${p2.y - radius} ${arc} ${lineX + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      } else {\n        colorClassNum = branchPos.get(commitA.branch)?.index;\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX + radius} ${p1.y} ${arc} ${lineX} ${p1.y + offset} L ${lineX} ${p2.y - radius} ${arc2} ${lineX - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      }\n    } else if (dir === "BT") {\n      if (p1.x < p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX - radius} ${p1.y} ${arc} ${lineX} ${p1.y - offset} L ${lineX} ${p2.y + radius} ${arc2} ${lineX + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      } else {\n        colorClassNum = branchPos.get(commitA.branch)?.index;\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX + radius} ${p1.y} ${arc2} ${lineX} ${p1.y - offset} L ${lineX} ${p2.y + radius} ${arc} ${lineX - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      }\n    } else {\n      if (p1.y < p2.y) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${lineY - radius} ${arc} ${p1.x + offset} ${lineY} L ${p2.x - radius} ${lineY} ${arc2} ${p2.x} ${lineY + offset} L ${p2.x} ${p2.y}`;\n      } else {\n        colorClassNum = branchPos.get(commitA.branch)?.index;\n        lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${lineY + radius} ${arc2} ${p1.x + offset} ${lineY} L ${p2.x - radius} ${lineY} ${arc} ${p2.x} ${lineY - offset} L ${p2.x} ${p2.y}`;\n      }\n    }\n  } else {\n    arc = "A 20 20, 0, 0, 0,";\n    arc2 = "A 20 20, 0, 0, 1,";\n    radius = 20;\n    offset = 20;\n    if (dir === "TB") {\n      if (p1.x < p2.x) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y - radius} ${arc} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc2} ${p2.x} ${p1.y + offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x > p2.x) {\n        arc = "A 20 20, 0, 0, 0,";\n        arc2 = "A 20 20, 0, 0, 1,";\n        radius = 20;\n        offset = 20;\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y - radius} ${arc2} ${p1.x - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x + radius} ${p1.y} ${arc} ${p2.x} ${p1.y + offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x === p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`;\n      }\n    } else if (dir === "BT") {\n      if (p1.x < p2.x) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y + radius} ${arc2} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc} ${p2.x} ${p1.y - offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x > p2.x) {\n        arc = "A 20 20, 0, 0, 0,";\n        arc2 = "A 20 20, 0, 0, 1,";\n        radius = 20;\n        offset = 20;\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y + radius} ${arc} ${p1.x - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc} ${p2.x} ${p1.y - offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x === p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`;\n      }\n    } else {\n      if (p1.y < p2.y) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc2} ${p2.x} ${p1.y + offset} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y - radius} ${arc} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.y > p2.y) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc} ${p2.x} ${p1.y - offset} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y + radius} ${arc2} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.y === p2.y) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`;\n      }\n    }\n  }\n  if (lineDef === void 0) {\n    throw new Error("Line definition not found");\n  }\n  svg.append("path").attr("d", lineDef).attr("class", "arrow arrow" + colorClassNum % THEME_COLOR_LIMIT);\n}, "drawArrow");\nvar drawArrows = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((svg, commits) => {\n  const gArrows = svg.append("g").attr("class", "commit-arrows");\n  [...commits.keys()].forEach((key) => {\n    const commit2 = commits.get(key);\n    if (commit2.parents && commit2.parents.length > 0) {\n      commit2.parents.forEach((parent) => {\n        drawArrow(gArrows, commits.get(parent), commit2, commits);\n      });\n    }\n  });\n}, "drawArrows");\nvar drawBranches = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((svg, branches) => {\n  const g = svg.append("g");\n  branches.forEach((branch2, index) => {\n    const adjustIndexForTheme = index % THEME_COLOR_LIMIT;\n    const pos = branchPos.get(branch2.name)?.pos;\n    if (pos === void 0) {\n      throw new Error(`Position not found for branch ${branch2.name}`);\n    }\n    const line = g.append("line");\n    line.attr("x1", 0);\n    line.attr("y1", pos);\n    line.attr("x2", maxPos);\n    line.attr("y2", pos);\n    line.attr("class", "branch branch" + adjustIndexForTheme);\n    if (dir === "TB") {\n      line.attr("y1", defaultPos);\n      line.attr("x1", pos);\n      line.attr("y2", maxPos);\n      line.attr("x2", pos);\n    } else if (dir === "BT") {\n      line.attr("y1", maxPos);\n      line.attr("x1", pos);\n      line.attr("y2", defaultPos);\n      line.attr("x2", pos);\n    }\n    lanes.push(pos);\n    const name = branch2.name;\n    const labelElement = drawText(name);\n    const bkg = g.insert("rect");\n    const branchLabel = g.insert("g").attr("class", "branchLabel");\n    const label = branchLabel.insert("g").attr("class", "label branch-label" + adjustIndexForTheme);\n    label.node().appendChild(labelElement);\n    const bbox = labelElement.getBBox();\n    bkg.attr("class", "branchLabelBkg label" + adjustIndexForTheme).attr("rx", 4).attr("ry", 4).attr("x", -bbox.width - 4 - (DEFAULT_GITGRAPH_CONFIG2?.rotateCommitLabel === true ? 30 : 0)).attr("y", -bbox.height / 2 + 8).attr("width", bbox.width + 18).attr("height", bbox.height + 4);\n    label.attr(\n      "transform",\n      "translate(" + (-bbox.width - 14 - (DEFAULT_GITGRAPH_CONFIG2?.rotateCommitLabel === true ? 30 : 0)) + ", " + (pos - bbox.height / 2 - 1) + ")"\n    );\n    if (dir === "TB") {\n      bkg.attr("x", pos - bbox.width / 2 - 10).attr("y", 0);\n      label.attr("transform", "translate(" + (pos - bbox.width / 2 - 5) + ", 0)");\n    } else if (dir === "BT") {\n      bkg.attr("x", pos - bbox.width / 2 - 10).attr("y", maxPos);\n      label.attr("transform", "translate(" + (pos - bbox.width / 2 - 5) + ", " + maxPos + ")");\n    } else {\n      bkg.attr("transform", "translate(-19, " + (pos - bbox.height / 2) + ")");\n    }\n  });\n}, "drawBranches");\nvar setBranchPosition = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function(name, pos, index, bbox, rotateCommitLabel) {\n  branchPos.set(name, { pos, index });\n  pos += 50 + (rotateCommitLabel ? 40 : 0) + (dir === "TB" || dir === "BT" ? bbox.width / 2 : 0);\n  return pos;\n}, "setBranchPosition");\nvar draw = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(function(txt, id, ver, diagObj) {\n  clear3();\n  _chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .log */ .Rm.debug("in gitgraph renderer", txt + "\\n", "id:", id, ver);\n  if (!DEFAULT_GITGRAPH_CONFIG2) {\n    throw new Error("GitGraph config not found");\n  }\n  const rotateCommitLabel = DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel ?? false;\n  const db2 = diagObj.db;\n  allCommitsDict = db2.getCommits();\n  const branches = db2.getBranchesAsObjArray();\n  dir = db2.getDirection();\n  const diagram2 = (0,d3__WEBPACK_IMPORTED_MODULE_5__/* .select */ .Ltv)(`[id="${id}"]`);\n  let pos = 0;\n  branches.forEach((branch2, index) => {\n    const labelElement = drawText(branch2.name);\n    const g = diagram2.append("g");\n    const branchLabel = g.insert("g").attr("class", "branchLabel");\n    const label = branchLabel.insert("g").attr("class", "label branch-label");\n    label.node()?.appendChild(labelElement);\n    const bbox = labelElement.getBBox();\n    pos = setBranchPosition(branch2.name, pos, index, bbox, rotateCommitLabel);\n    label.remove();\n    branchLabel.remove();\n    g.remove();\n  });\n  drawCommits(diagram2, allCommitsDict, false);\n  if (DEFAULT_GITGRAPH_CONFIG2.showBranches) {\n    drawBranches(diagram2, branches);\n  }\n  drawArrows(diagram2, allCommitsDict);\n  drawCommits(diagram2, allCommitsDict, true);\n  _chunk_7DKRZKHE_mjs__WEBPACK_IMPORTED_MODULE_2__/* .utils_default */ ._K.insertTitle(\n    diagram2,\n    "gitTitleText",\n    DEFAULT_GITGRAPH_CONFIG2.titleTopMargin ?? 0,\n    db2.getDiagramTitle()\n  );\n  (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .setupGraphViewbox2 */ .mj)(\n    void 0,\n    diagram2,\n    DEFAULT_GITGRAPH_CONFIG2.diagramPadding,\n    DEFAULT_GITGRAPH_CONFIG2.useMaxWidth\n  );\n}, "draw");\nvar gitGraphRenderer_default = {\n  draw\n};\nif (void 0) {\n  const { it, expect, describe } = void 0;\n  describe("drawText", () => {\n    it("should drawText", () => {\n      const svgLabel = drawText("main");\n      expect(svgLabel).toBeDefined();\n      expect(svgLabel.children[0].innerHTML).toBe("main");\n    });\n  });\n  describe("branchPosition", () => {\n    const bbox = {\n      x: 0,\n      y: 0,\n      width: 10,\n      height: 10,\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      toJSON: /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)(() => "", "toJSON")\n    };\n    it("should setBranchPositions LR with two branches", () => {\n      dir = "LR";\n      const pos = setBranchPosition("main", 0, 0, bbox, true);\n      expect(pos).toBe(90);\n      expect(branchPos.get("main")).toEqual({ pos: 0, index: 0 });\n      const posNext = setBranchPosition("develop", pos, 1, bbox, true);\n      expect(posNext).toBe(180);\n      expect(branchPos.get("develop")).toEqual({ pos, index: 1 });\n    });\n    it("should setBranchPositions TB with two branches", () => {\n      dir = "TB";\n      bbox.width = 34.9921875;\n      const pos = setBranchPosition("main", 0, 0, bbox, true);\n      expect(pos).toBe(107.49609375);\n      expect(branchPos.get("main")).toEqual({ pos: 0, index: 0 });\n      bbox.width = 56.421875;\n      const posNext = setBranchPosition("develop", pos, 1, bbox, true);\n      expect(posNext).toBe(225.70703125);\n      expect(branchPos.get("develop")).toEqual({ pos, index: 1 });\n    });\n  });\n  describe("commitPosition", () => {\n    const commits = /* @__PURE__ */ new Map([\n      [\n        "commitZero",\n        {\n          id: "ZERO",\n          message: "",\n          seq: 0,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: [],\n          branch: "main"\n        }\n      ],\n      [\n        "commitA",\n        {\n          id: "A",\n          message: "",\n          seq: 1,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: ["ZERO"],\n          branch: "feature"\n        }\n      ],\n      [\n        "commitB",\n        {\n          id: "B",\n          message: "",\n          seq: 2,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: ["A"],\n          branch: "feature"\n        }\n      ],\n      [\n        "commitM",\n        {\n          id: "M",\n          message: "merged branch feature into main",\n          seq: 3,\n          type: commitType.MERGE,\n          tags: [],\n          parents: ["ZERO", "B"],\n          branch: "main",\n          customId: true\n        }\n      ],\n      [\n        "commitC",\n        {\n          id: "C",\n          message: "",\n          seq: 4,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: ["ZERO"],\n          branch: "release"\n        }\n      ],\n      [\n        "commit5_8928ea0",\n        {\n          id: "5-8928ea0",\n          message: "cherry-picked [object Object] into release",\n          seq: 5,\n          type: commitType.CHERRY_PICK,\n          tags: [],\n          parents: ["C", "M"],\n          branch: "release"\n        }\n      ],\n      [\n        "commitD",\n        {\n          id: "D",\n          message: "",\n          seq: 6,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: ["5-8928ea0"],\n          branch: "release"\n        }\n      ],\n      [\n        "commit7_ed848ba",\n        {\n          id: "7-ed848ba",\n          message: "cherry-picked [object Object] into release",\n          seq: 7,\n          type: commitType.CHERRY_PICK,\n          tags: [],\n          parents: ["D", "M"],\n          branch: "release"\n        }\n      ]\n    ]);\n    let pos = 0;\n    branchPos.set("main", { pos: 0, index: 0 });\n    branchPos.set("feature", { pos: 107.49609375, index: 1 });\n    branchPos.set("release", { pos: 224.03515625, index: 2 });\n    describe("TB", () => {\n      pos = 30;\n      dir = "TB";\n      const expectedCommitPositionTB = /* @__PURE__ */ new Map([\n        ["commitZero", { x: 0, y: 40, posWithOffset: 40 }],\n        ["commitA", { x: 107.49609375, y: 90, posWithOffset: 90 }],\n        ["commitB", { x: 107.49609375, y: 140, posWithOffset: 140 }],\n        ["commitM", { x: 0, y: 190, posWithOffset: 190 }],\n        ["commitC", { x: 224.03515625, y: 240, posWithOffset: 240 }],\n        ["commit5_8928ea0", { x: 224.03515625, y: 290, posWithOffset: 290 }],\n        ["commitD", { x: 224.03515625, y: 340, posWithOffset: 340 }],\n        ["commit7_ed848ba", { x: 224.03515625, y: 390, posWithOffset: 390 }]\n      ]);\n      commits.forEach((commit2, key) => {\n        it(`should give the correct position for commit ${key}`, () => {\n          const position = getCommitPosition(commit2, pos, false);\n          expect(position).toEqual(expectedCommitPositionTB.get(key));\n          pos += 50;\n        });\n      });\n    });\n    describe("LR", () => {\n      let pos2 = 30;\n      dir = "LR";\n      const expectedCommitPositionLR = /* @__PURE__ */ new Map([\n        ["commitZero", { x: 0, y: 40, posWithOffset: 40 }],\n        ["commitA", { x: 107.49609375, y: 90, posWithOffset: 90 }],\n        ["commitB", { x: 107.49609375, y: 140, posWithOffset: 140 }],\n        ["commitM", { x: 0, y: 190, posWithOffset: 190 }],\n        ["commitC", { x: 224.03515625, y: 240, posWithOffset: 240 }],\n        ["commit5_8928ea0", { x: 224.03515625, y: 290, posWithOffset: 290 }],\n        ["commitD", { x: 224.03515625, y: 340, posWithOffset: 340 }],\n        ["commit7_ed848ba", { x: 224.03515625, y: 390, posWithOffset: 390 }]\n      ]);\n      commits.forEach((commit2, key) => {\n        it(`should give the correct position for commit ${key}`, () => {\n          const position = getCommitPosition(commit2, pos2, false);\n          expect(position).toEqual(expectedCommitPositionLR.get(key));\n          pos2 += 50;\n        });\n      });\n    });\n    describe("getCommitClassType", () => {\n      const expectedCommitClassType = /* @__PURE__ */ new Map([\n        ["commitZero", "commit-normal"],\n        ["commitA", "commit-normal"],\n        ["commitB", "commit-normal"],\n        ["commitM", "commit-merge"],\n        ["commitC", "commit-normal"],\n        ["commit5_8928ea0", "commit-cherry-pick"],\n        ["commitD", "commit-normal"],\n        ["commit7_ed848ba", "commit-cherry-pick"]\n      ]);\n      commits.forEach((commit2, key) => {\n        it(`should give the correct class type for commit ${key}`, () => {\n          const classType = getCommitClassType(commit2);\n          expect(classType).toBe(expectedCommitClassType.get(key));\n        });\n      });\n    });\n  });\n  describe("building BT parallel commit diagram", () => {\n    const commits = /* @__PURE__ */ new Map([\n      [\n        "1-abcdefg",\n        {\n          id: "1-abcdefg",\n          message: "",\n          seq: 0,\n          type: 0,\n          tags: [],\n          parents: [],\n          branch: "main"\n        }\n      ],\n      [\n        "2-abcdefg",\n        {\n          id: "2-abcdefg",\n          message: "",\n          seq: 1,\n          type: 0,\n          tags: [],\n          parents: ["1-abcdefg"],\n          branch: "main"\n        }\n      ],\n      [\n        "3-abcdefg",\n        {\n          id: "3-abcdefg",\n          message: "",\n          seq: 2,\n          type: 0,\n          tags: [],\n          parents: ["2-abcdefg"],\n          branch: "develop"\n        }\n      ],\n      [\n        "4-abcdefg",\n        {\n          id: "4-abcdefg",\n          message: "",\n          seq: 3,\n          type: 0,\n          tags: [],\n          parents: ["3-abcdefg"],\n          branch: "develop"\n        }\n      ],\n      [\n        "5-abcdefg",\n        {\n          id: "5-abcdefg",\n          message: "",\n          seq: 4,\n          type: 0,\n          tags: [],\n          parents: ["2-abcdefg"],\n          branch: "feature"\n        }\n      ],\n      [\n        "6-abcdefg",\n        {\n          id: "6-abcdefg",\n          message: "",\n          seq: 5,\n          type: 0,\n          tags: [],\n          parents: ["5-abcdefg"],\n          branch: "feature"\n        }\n      ],\n      [\n        "7-abcdefg",\n        {\n          id: "7-abcdefg",\n          message: "",\n          seq: 6,\n          type: 0,\n          tags: [],\n          parents: ["2-abcdefg"],\n          branch: "main"\n        }\n      ],\n      [\n        "8-abcdefg",\n        {\n          id: "8-abcdefg",\n          message: "",\n          seq: 7,\n          type: 0,\n          tags: [],\n          parents: ["7-abcdefg"],\n          branch: "main"\n        }\n      ]\n    ]);\n    const expectedCommitPosition = /* @__PURE__ */ new Map([\n      ["1-abcdefg", { x: 0, y: 40 }],\n      ["2-abcdefg", { x: 0, y: 90 }],\n      ["3-abcdefg", { x: 107.49609375, y: 140 }],\n      ["4-abcdefg", { x: 107.49609375, y: 190 }],\n      ["5-abcdefg", { x: 225.70703125, y: 140 }],\n      ["6-abcdefg", { x: 225.70703125, y: 190 }],\n      ["7-abcdefg", { x: 0, y: 140 }],\n      ["8-abcdefg", { x: 0, y: 190 }]\n    ]);\n    const expectedCommitPositionAfterParallel = /* @__PURE__ */ new Map([\n      ["1-abcdefg", { x: 0, y: 210 }],\n      ["2-abcdefg", { x: 0, y: 160 }],\n      ["3-abcdefg", { x: 107.49609375, y: 110 }],\n      ["4-abcdefg", { x: 107.49609375, y: 60 }],\n      ["5-abcdefg", { x: 225.70703125, y: 110 }],\n      ["6-abcdefg", { x: 225.70703125, y: 60 }],\n      ["7-abcdefg", { x: 0, y: 110 }],\n      ["8-abcdefg", { x: 0, y: 60 }]\n    ]);\n    const expectedCommitCurrentPosition = /* @__PURE__ */ new Map([\n      ["1-abcdefg", 30],\n      ["2-abcdefg", 80],\n      ["3-abcdefg", 130],\n      ["4-abcdefg", 180],\n      ["5-abcdefg", 130],\n      ["6-abcdefg", 180],\n      ["7-abcdefg", 130],\n      ["8-abcdefg", 180]\n    ]);\n    const sortedKeys = [...expectedCommitPosition.keys()];\n    it("should get the correct commit position and current position", () => {\n      dir = "BT";\n      let curPos = 30;\n      commitPos.clear();\n      branchPos.clear();\n      branchPos.set("main", { pos: 0, index: 0 });\n      branchPos.set("develop", { pos: 107.49609375, index: 1 });\n      branchPos.set("feature", { pos: 225.70703125, index: 2 });\n      DEFAULT_GITGRAPH_CONFIG2.parallelCommits = true;\n      commits.forEach((commit2, key) => {\n        if (commit2.parents.length > 0) {\n          curPos = calculateCommitPosition(commit2);\n        }\n        const position = setCommitPosition(commit2, curPos);\n        expect(position).toEqual(expectedCommitPosition.get(key));\n        expect(curPos).toEqual(expectedCommitCurrentPosition.get(key));\n      });\n    });\n    it("should get the correct commit position after parallel commits", () => {\n      commitPos.clear();\n      branchPos.clear();\n      dir = "BT";\n      const curPos = 30;\n      commitPos.clear();\n      branchPos.clear();\n      branchPos.set("main", { pos: 0, index: 0 });\n      branchPos.set("develop", { pos: 107.49609375, index: 1 });\n      branchPos.set("feature", { pos: 225.70703125, index: 2 });\n      setParallelBTPos(sortedKeys, commits, curPos);\n      sortedKeys.forEach((commit2) => {\n        const position = commitPos.get(commit2);\n        expect(position).toEqual(expectedCommitPositionAfterParallel.get(commit2));\n      });\n    });\n  });\n  DEFAULT_GITGRAPH_CONFIG2.parallelCommits = false;\n  it("add", () => {\n    commitPos.set("parent1", { x: 1, y: 1 });\n    commitPos.set("parent2", { x: 2, y: 2 });\n    commitPos.set("parent3", { x: 3, y: 3 });\n    dir = "LR";\n    const parents = ["parent1", "parent2", "parent3"];\n    const closestParent = findClosestParent(parents);\n    expect(closestParent).toBe("parent3");\n    commitPos.clear();\n  });\n}\n\n// src/diagrams/git/styles.js\nvar getStyles = /* @__PURE__ */ (0,_chunk_6DBFFHIP_mjs__WEBPACK_IMPORTED_MODULE_3__/* .__name */ .K2)((options) => `\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: \'trebuchet ms\', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0, 1, 2, 3, 4, 5, 6, 7].map(\n  (i) => `\n        .branch-label${i} { fill: ${options["gitBranchLabel" + i]}; }\n        .commit${i} { stroke: ${options["git" + i]}; fill: ${options["git" + i]}; }\n        .commit-highlight${i} { stroke: ${options["gitInv" + i]}; fill: ${options["gitInv" + i]}; }\n        .label${i}  { fill: ${options["git" + i]}; }\n        .arrow${i} { stroke: ${options["git" + i]}; }\n        `\n).join("\\n")}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${options.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${options.commitLabelFontSize}; fill: ${options.commitLabelColor};}\n  .commit-label-bkg { font-size: ${options.commitLabelFontSize}; fill: ${options.commitLabelBackground}; opacity: 0.5; }\n  .tag-label { font-size: ${options.tagLabelFontSize}; fill: ${options.tagLabelColor};}\n  .tag-label-bkg { fill: ${options.tagLabelBackground}; stroke: ${options.tagLabelBorder}; }\n  .tag-hole { fill: ${options.textColor}; }\n\n  .commit-merge {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  .gitTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${options.textColor};\n  }\n`, "getStyles");\nvar styles_default = getStyles;\n\n// src/diagrams/git/gitGraphDiagram.ts\nvar diagram = {\n  parser,\n  db,\n  renderer: gitGraphRenderer_default,\n  styles: styles_default\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLE1BQU0sRUFBRSxNQUFNLElBQUksTUFBTSxFQUFFLGVBQWUsRUFBRSxLQUFLLEVBQUUsZUFBZSxFQUFFLE1BQU0sSUFBSSxNQUFNLEVBQUUsS0FBSztBQUNuSCxVQUFVO0FBQ1YseUJBQXlCLE1BQU0sRUFBRSxNQUFNLElBQUksZUFBZSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLGVBQWUsSUFBSSxNQUFNLEVBQUUsS0FBSztBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLE1BQU0sRUFBRSxNQUFNLElBQUksTUFBTSxFQUFFLGVBQWUsRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLE1BQU0sSUFBSSxNQUFNLEVBQUUsS0FBSztBQUNwSCxVQUFVO0FBQ1YseUJBQXlCLE1BQU0sRUFBRSxNQUFNLElBQUksZUFBZSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLGVBQWUsSUFBSSxNQUFNLEVBQUUsS0FBSztBQUNuSDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsTUFBTSxFQUFFLE1BQU0sSUFBSSxNQUFNLEVBQUUsS0FBSztBQUN0RDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EseUJBQXlCLE1BQU0sRUFBRSxNQUFNLElBQUksTUFBTSxFQUFFLGVBQWUsRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLE1BQU0sSUFBSSxNQUFNLEVBQUUsS0FBSztBQUNwSCxVQUFVO0FBQ1YseUJBQXlCLE1BQU0sRUFBRSxNQUFNLElBQUksZUFBZSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLGVBQWUsSUFBSSxNQUFNLEVBQUUsS0FBSztBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLE1BQU0sRUFBRSxNQUFNLElBQUksTUFBTSxFQUFFLGVBQWUsRUFBRSxLQUFLLEVBQUUsZUFBZSxFQUFFLE1BQU0sSUFBSSxNQUFNLEVB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QUFVO0FBQy9CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0Esa0JBQWtCLGFBQWEsOEJBQThCLFFBQVE7QUFDckUsc0JBQXNCLGFBQWEsOEJBQThCLFFBQVEsZ0NBQWdDO0FBQ3pHLGVBQWUsYUFBYSwyQkFBMkIsUUFBUTtBQUMvRCxtQkFBbUIsUUFBUSw2QkFBNkIsVUFBVTtBQUNsRSxjQUFjLFFBQVE7O0FBRXRCO0FBQ0EsY0FBYztBQUNkLFlBQVk7QUFDWjtBQUNBO0FBQ0EsY0FBYztBQUNkLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLFlBQVk7QUFDWjs7QUFFQSxXQUFXLGlCQUFpQix1QkFBdUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVnYWwtdWktZG9jcy8uL25vZGVfbW9kdWxlcy9tZXJtYWlkL2Rpc3QvY2h1bmtzL21lcm1haWQuY29yZS9naXRHcmFwaERpYWdyYW0tTlJaMlVBQUYubWpzP2JkZDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgcG9wdWxhdGVDb21tb25EYlxufSBmcm9tIFwiLi9jaHVuay1UTVVCRVdQRC5tanNcIjtcbmltcG9ydCB7XG4gIEltcGVyYXRpdmVTdGF0ZVxufSBmcm9tIFwiLi9jaHVuay1LRkJPQkpIQy5tanNcIjtcbmltcG9ydCB7XG4gIGNsZWFuQW5kTWVyZ2UsXG4gIHJhbmRvbSxcbiAgdXRpbHNfZGVmYXVsdFxufSBmcm9tIFwiLi9jaHVuay03REtSWktIRS5tanNcIjtcbmltcG9ydCB7XG4gIF9fbmFtZSxcbiAgY2xlYXIsXG4gIGNvbW1vbl9kZWZhdWx0LFxuICBkZWZhdWx0Q29uZmlnX2RlZmF1bHQsXG4gIGdldEFjY0Rlc2NyaXB0aW9uLFxuICBnZXRBY2NUaXRsZSxcbiAgZ2V0Q29uZmlnLFxuICBnZXRDb25maWcyLFxuICBnZXREaWFncmFtVGl0bGUsXG4gIGxvZyxcbiAgc2V0QWNjRGVzY3JpcHRpb24sXG4gIHNldEFjY1RpdGxlLFxuICBzZXREaWFncmFtVGl0bGUsXG4gIHNldHVwR3JhcGhWaWV3Ym94MiBhcyBzZXR1cEdyYXBoVmlld2JveFxufSBmcm9tIFwiLi9jaHVuay02REJGRkhJUC5tanNcIjtcblxuLy8gc3JjL2RpYWdyYW1zL2dpdC9naXRHcmFwaFBhcnNlci50c1xuaW1wb3J0IHsgcGFyc2UgfSBmcm9tIFwiQG1lcm1haWQtanMvcGFyc2VyXCI7XG5cbi8vIHNyYy9kaWFncmFtcy9naXQvZ2l0R3JhcGhUeXBlcy50c1xudmFyIGNvbW1pdFR5cGUgPSB7XG4gIE5PUk1BTDogMCxcbiAgUkVWRVJTRTogMSxcbiAgSElHSExJR0hUOiAyLFxuICBNRVJHRTogMyxcbiAgQ0hFUlJZX1BJQ0s6IDRcbn07XG5cbi8vIHNyYy9kaWFncmFtcy9naXQvZ2l0R3JhcGhBc3QudHNcbnZhciBERUZBVUxUX0dJVEdSQVBIX0NPTkZJRyA9IGRlZmF1bHRDb25maWdfZGVmYXVsdC5naXRHcmFwaDtcbnZhciBnZXRDb25maWczID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoKSA9PiB7XG4gIGNvbnN0IGNvbmZpZyA9IGNsZWFuQW5kTWVyZ2Uoe1xuICAgIC4uLkRFRkFVTFRfR0lUR1JBUEhfQ09ORklHLFxuICAgIC4uLmdldENvbmZpZygpLmdpdEdyYXBoXG4gIH0pO1xuICByZXR1cm4gY29uZmlnO1xufSwgXCJnZXRDb25maWdcIik7XG52YXIgc3RhdGUgPSBuZXcgSW1wZXJhdGl2ZVN0YXRlKCgpID0+IHtcbiAgY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnMygpO1xuICBjb25zdCBtYWluQnJhbmNoTmFtZSA9IGNvbmZpZy5tYWluQnJhbmNoTmFtZTtcbiAgY29uc3QgbWFpbkJyYW5jaE9yZGVyID0gY29uZmlnLm1haW5CcmFuY2hPcmRlcjtcbiAgcmV0dXJuIHtcbiAgICBtYWluQnJhbmNoTmFtZSxcbiAgICBjb21taXRzOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLFxuICAgIGhlYWQ6IG51bGwsXG4gICAgYnJhbmNoQ29uZmlnOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbW21haW5CcmFuY2hOYW1lLCB7IG5hbWU6IG1haW5CcmFuY2hOYW1lLCBvcmRlcjogbWFpbkJyYW5jaE9yZGVyIH1dXSksXG4gICAgYnJhbmNoZXM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKFtbbWFpbkJyYW5jaE5hbWUsIG51bGxdXSksXG4gICAgY3VyckJyYW5jaDogbWFpbkJyYW5jaE5hbWUsXG4gICAgZGlyZWN0aW9uOiBcIkxSXCIsXG4gICAgc2VxOiAwLFxuICAgIG9wdGlvbnM6IHt9XG4gIH07XG59KTtcbmZ1bmN0aW9uIGdldElEKCkge1xuICByZXR1cm4gcmFuZG9tKHsgbGVuZ3RoOiA3IH0pO1xufVxuX19uYW1lKGdldElELCBcImdldElEXCIpO1xuZnVuY3Rpb24gdW5pcUJ5KGxpc3QsIGZuKSB7XG4gIGNvbnN0IHJlY29yZE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICByZXR1cm4gbGlzdC5yZWR1Y2UoKG91dCwgaXRlbSkgPT4ge1xuICAgIGNvbnN0IGtleSA9IGZuKGl0ZW0pO1xuICAgIGlmICghcmVjb3JkTWFwW2tleV0pIHtcbiAgICAgIHJlY29yZE1hcFtrZXldID0gdHJ1ZTtcbiAgICAgIG91dC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xuICB9LCBbXSk7XG59XG5fX25hbWUodW5pcUJ5LCBcInVuaXFCeVwiKTtcbnZhciBzZXREaXJlY3Rpb24gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKGRpcjIpIHtcbiAgc3RhdGUucmVjb3Jkcy5kaXJlY3Rpb24gPSBkaXIyO1xufSwgXCJzZXREaXJlY3Rpb25cIik7XG52YXIgc2V0T3B0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24ocmF3T3B0U3RyaW5nKSB7XG4gIGxvZy5kZWJ1ZyhcIm9wdGlvbnMgc3RyXCIsIHJhd09wdFN0cmluZyk7XG4gIHJhd09wdFN0cmluZyA9IHJhd09wdFN0cmluZz8udHJpbSgpO1xuICByYXdPcHRTdHJpbmcgPSByYXdPcHRTdHJpbmcgfHwgXCJ7fVwiO1xuICB0cnkge1xuICAgIHN0YXRlLnJlY29yZHMub3B0aW9ucyA9IEpTT04ucGFyc2UocmF3T3B0U3RyaW5nKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZy5lcnJvcihcImVycm9yIHdoaWxlIHBhcnNpbmcgZ2l0R3JhcGggb3B0aW9uc1wiLCBlLm1lc3NhZ2UpO1xuICB9XG59LCBcInNldE9wdGlvbnNcIik7XG52YXIgZ2V0T3B0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oKSB7XG4gIHJldHVybiBzdGF0ZS5yZWNvcmRzLm9wdGlvbnM7XG59LCBcImdldE9wdGlvbnNcIik7XG52YXIgY29tbWl0ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbihjb21taXREQikge1xuICBsZXQgbXNnID0gY29tbWl0REIubXNnO1xuICBsZXQgaWQgPSBjb21taXREQi5pZDtcbiAgY29uc3QgdHlwZSA9IGNvbW1pdERCLnR5cGU7XG4gIGxldCB0YWdzID0gY29tbWl0REIudGFncztcbiAgbG9nLmluZm8oXCJjb21taXRcIiwgbXNnLCBpZCwgdHlwZSwgdGFncyk7XG4gIGxvZy5kZWJ1ZyhcIkVudGVyaW5nIGNvbW1pdDpcIiwgbXNnLCBpZCwgdHlwZSwgdGFncyk7XG4gIGNvbnN0IGNvbmZpZyA9IGdldENvbmZpZzMoKTtcbiAgaWQgPSBjb21tb25fZGVmYXVsdC5zYW5pdGl6ZVRleHQoaWQsIGNvbmZpZyk7XG4gIG1zZyA9IGNvbW1vbl9kZWZhdWx0LnNhbml0aXplVGV4dChtc2csIGNvbmZpZyk7XG4gIHRhZ3MgPSB0YWdzPy5tYXAoKHRhZykgPT4gY29tbW9uX2RlZmF1bHQuc2FuaXRpemVUZXh0KHRhZywgY29uZmlnKSk7XG4gIGNvbnN0IG5ld0NvbW1pdCA9IHtcbiAgICBpZDogaWQgPyBpZCA6IHN0YXRlLnJlY29yZHMuc2VxICsgXCItXCIgKyBnZXRJRCgpLFxuICAgIG1lc3NhZ2U6IG1zZyxcbiAgICBzZXE6IHN0YXRlLnJlY29yZHMuc2VxKyssXG4gICAgdHlwZTogdHlwZSA/PyBjb21taXRUeXBlLk5PUk1BTCxcbiAgICB0YWdzOiB0YWdzID8/IFtdLFxuICAgIHBhcmVudHM6IHN0YXRlLnJlY29yZHMuaGVhZCA9PSBudWxsID8gW10gOiBbc3RhdGUucmVjb3Jkcy5oZWFkLmlkXSxcbiAgICBicmFuY2g6IHN0YXRlLnJlY29yZHMuY3VyckJyYW5jaFxuICB9O1xuICBzdGF0ZS5yZWNvcmRzLmhlYWQgPSBuZXdDb21taXQ7XG4gIGxvZy5pbmZvKFwibWFpbiBicmFuY2hcIiwgY29uZmlnLm1haW5CcmFuY2hOYW1lKTtcbiAgc3RhdGUucmVjb3Jkcy5jb21taXRzLnNldChuZXdDb21taXQuaWQsIG5ld0NvbW1pdCk7XG4gIHN0YXRlLnJlY29yZHMuYnJhbmNoZXMuc2V0KHN0YXRlLnJlY29yZHMuY3VyckJyYW5jaCwgbmV3Q29tbWl0LmlkKTtcbiAgbG9nLmRlYnVnKFwiaW4gcHVzaENvbW1pdCBcIiArIG5ld0NvbW1pdC5pZCk7XG59LCBcImNvbW1pdFwiKTtcbnZhciBicmFuY2ggPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKGJyYW5jaERCKSB7XG4gIGxldCBuYW1lID0gYnJhbmNoREIubmFtZTtcbiAgY29uc3Qgb3JkZXIgPSBicmFuY2hEQi5vcmRlcjtcbiAgbmFtZSA9IGNvbW1vbl9kZWZhdWx0LnNhbml0aXplVGV4dChuYW1lLCBnZXRDb25maWczKCkpO1xuICBpZiAoc3RhdGUucmVjb3Jkcy5icmFuY2hlcy5oYXMobmFtZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVHJ5aW5nIHRvIGNyZWF0ZSBhbiBleGlzdGluZyBicmFuY2guIChIZWxwOiBFaXRoZXIgdXNlIGEgbmV3IG5hbWUgaWYgeW91IHdhbnQgY3JlYXRlIGEgbmV3IGJyYW5jaCBvciB0cnkgdXNpbmcgXCJjaGVja291dCAke25hbWV9XCIpYFxuICAgICk7XG4gIH1cbiAgc3RhdGUucmVjb3Jkcy5icmFuY2hlcy5zZXQobmFtZSwgc3RhdGUucmVjb3Jkcy5oZWFkICE9IG51bGwgPyBzdGF0ZS5yZWNvcmRzLmhlYWQuaWQgOiBudWxsKTtcbiAgc3RhdGUucmVjb3Jkcy5icmFuY2hDb25maWcuc2V0KG5hbWUsIHsgbmFtZSwgb3JkZXIgfSk7XG4gIGNoZWNrb3V0KG5hbWUpO1xuICBsb2cuZGVidWcoXCJpbiBjcmVhdGVCcmFuY2hcIik7XG59LCBcImJyYW5jaFwiKTtcbnZhciBtZXJnZSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKG1lcmdlREIpID0+IHtcbiAgbGV0IG90aGVyQnJhbmNoID0gbWVyZ2VEQi5icmFuY2g7XG4gIGxldCBjdXN0b21JZCA9IG1lcmdlREIuaWQ7XG4gIGNvbnN0IG92ZXJyaWRlVHlwZSA9IG1lcmdlREIudHlwZTtcbiAgY29uc3QgY3VzdG9tVGFncyA9IG1lcmdlREIudGFncztcbiAgY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnMygpO1xuICBvdGhlckJyYW5jaCA9IGNvbW1vbl9kZWZhdWx0LnNhbml0aXplVGV4dChvdGhlckJyYW5jaCwgY29uZmlnKTtcbiAgaWYgKGN1c3RvbUlkKSB7XG4gICAgY3VzdG9tSWQgPSBjb21tb25fZGVmYXVsdC5zYW5pdGl6ZVRleHQoY3VzdG9tSWQsIGNvbmZpZyk7XG4gIH1cbiAgY29uc3QgY3VycmVudEJyYW5jaENoZWNrID0gc3RhdGUucmVjb3Jkcy5icmFuY2hlcy5nZXQoc3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNoKTtcbiAgY29uc3Qgb3RoZXJCcmFuY2hDaGVjayA9IHN0YXRlLnJlY29yZHMuYnJhbmNoZXMuZ2V0KG90aGVyQnJhbmNoKTtcbiAgY29uc3QgY3VycmVudENvbW1pdCA9IGN1cnJlbnRCcmFuY2hDaGVjayA/IHN0YXRlLnJlY29yZHMuY29tbWl0cy5nZXQoY3VycmVudEJyYW5jaENoZWNrKSA6IHZvaWQgMDtcbiAgY29uc3Qgb3RoZXJDb21taXQgPSBvdGhlckJyYW5jaENoZWNrID8gc3RhdGUucmVjb3Jkcy5jb21taXRzLmdldChvdGhlckJyYW5jaENoZWNrKSA6IHZvaWQgMDtcbiAgaWYgKGN1cnJlbnRDb21taXQgJiYgb3RoZXJDb21taXQgJiYgY3VycmVudENvbW1pdC5icmFuY2ggPT09IG90aGVyQnJhbmNoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgbWVyZ2UgYnJhbmNoICcke290aGVyQnJhbmNofScgaW50byBpdHNlbGYuYCk7XG4gIH1cbiAgaWYgKHN0YXRlLnJlY29yZHMuY3VyckJyYW5jaCA9PT0gb3RoZXJCcmFuY2gpIHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignSW5jb3JyZWN0IHVzYWdlIG9mIFwibWVyZ2VcIi4gQ2Fubm90IG1lcmdlIGEgYnJhbmNoIHRvIGl0c2VsZicpO1xuICAgIGVycm9yLmhhc2ggPSB7XG4gICAgICB0ZXh0OiBgbWVyZ2UgJHtvdGhlckJyYW5jaH1gLFxuICAgICAgdG9rZW46IGBtZXJnZSAke290aGVyQnJhbmNofWAsXG4gICAgICBleHBlY3RlZDogW1wiYnJhbmNoIGFiY1wiXVxuICAgIH07XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgaWYgKGN1cnJlbnRDb21taXQgPT09IHZvaWQgMCB8fCAhY3VycmVudENvbW1pdCkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgYEluY29ycmVjdCB1c2FnZSBvZiBcIm1lcmdlXCIuIEN1cnJlbnQgYnJhbmNoICgke3N0YXRlLnJlY29yZHMuY3VyckJyYW5jaH0paGFzIG5vIGNvbW1pdHNgXG4gICAgKTtcbiAgICBlcnJvci5oYXNoID0ge1xuICAgICAgdGV4dDogYG1lcmdlICR7b3RoZXJCcmFuY2h9YCxcbiAgICAgIHRva2VuOiBgbWVyZ2UgJHtvdGhlckJyYW5jaH1gLFxuICAgICAgZXhwZWN0ZWQ6IFtcImNvbW1pdFwiXVxuICAgIH07XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgaWYgKCFzdGF0ZS5yZWNvcmRzLmJyYW5jaGVzLmhhcyhvdGhlckJyYW5jaCkpIHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICdJbmNvcnJlY3QgdXNhZ2Ugb2YgXCJtZXJnZVwiLiBCcmFuY2ggdG8gYmUgbWVyZ2VkICgnICsgb3RoZXJCcmFuY2ggKyBcIikgZG9lcyBub3QgZXhpc3RcIlxuICAgICk7XG4gICAgZXJyb3IuaGFzaCA9IHtcbiAgICAgIHRleHQ6IGBtZXJnZSAke290aGVyQnJhbmNofWAsXG4gICAgICB0b2tlbjogYG1lcmdlICR7b3RoZXJCcmFuY2h9YCxcbiAgICAgIGV4cGVjdGVkOiBbYGJyYW5jaCAke290aGVyQnJhbmNofWBdXG4gICAgfTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBpZiAob3RoZXJDb21taXQgPT09IHZvaWQgMCB8fCAhb3RoZXJDb21taXQpIHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICdJbmNvcnJlY3QgdXNhZ2Ugb2YgXCJtZXJnZVwiLiBCcmFuY2ggdG8gYmUgbWVyZ2VkICgnICsgb3RoZXJCcmFuY2ggKyBcIikgaGFzIG5vIGNvbW1pdHNcIlxuICAgICk7XG4gICAgZXJyb3IuaGFzaCA9IHtcbiAgICAgIHRleHQ6IGBtZXJnZSAke290aGVyQnJhbmNofWAsXG4gICAgICB0b2tlbjogYG1lcmdlICR7b3RoZXJCcmFuY2h9YCxcbiAgICAgIGV4cGVjdGVkOiBbJ1wiY29tbWl0XCInXVxuICAgIH07XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgaWYgKGN1cnJlbnRDb21taXQgPT09IG90aGVyQ29tbWl0KSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0luY29ycmVjdCB1c2FnZSBvZiBcIm1lcmdlXCIuIEJvdGggYnJhbmNoZXMgaGF2ZSBzYW1lIGhlYWQnKTtcbiAgICBlcnJvci5oYXNoID0ge1xuICAgICAgdGV4dDogYG1lcmdlICR7b3RoZXJCcmFuY2h9YCxcbiAgICAgIHRva2VuOiBgbWVyZ2UgJHtvdGhlckJyYW5jaH1gLFxuICAgICAgZXhwZWN0ZWQ6IFtcImJyYW5jaCBhYmNcIl1cbiAgICB9O1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIGlmIChjdXN0b21JZCAmJiBzdGF0ZS5yZWNvcmRzLmNvbW1pdHMuaGFzKGN1c3RvbUlkKSkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgJ0luY29ycmVjdCB1c2FnZSBvZiBcIm1lcmdlXCIuIENvbW1pdCB3aXRoIGlkOicgKyBjdXN0b21JZCArIFwiIGFscmVhZHkgZXhpc3RzLCB1c2UgZGlmZmVyZW50IGN1c3RvbSBJZFwiXG4gICAgKTtcbiAgICBlcnJvci5oYXNoID0ge1xuICAgICAgdGV4dDogYG1lcmdlICR7b3RoZXJCcmFuY2h9ICR7Y3VzdG9tSWR9ICR7b3ZlcnJpZGVUeXBlfSAke2N1c3RvbVRhZ3M/LmpvaW4oXCIgXCIpfWAsXG4gICAgICB0b2tlbjogYG1lcmdlICR7b3RoZXJCcmFuY2h9ICR7Y3VzdG9tSWR9ICR7b3ZlcnJpZGVUeXBlfSAke2N1c3RvbVRhZ3M/LmpvaW4oXCIgXCIpfWAsXG4gICAgICBleHBlY3RlZDogW1xuICAgICAgICBgbWVyZ2UgJHtvdGhlckJyYW5jaH0gJHtjdXN0b21JZH1fVU5JUVVFICR7b3ZlcnJpZGVUeXBlfSAke2N1c3RvbVRhZ3M/LmpvaW4oXCIgXCIpfWBcbiAgICAgIF1cbiAgICB9O1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIGNvbnN0IHZlcmlmaWVkQnJhbmNoID0gb3RoZXJCcmFuY2hDaGVjayA/IG90aGVyQnJhbmNoQ2hlY2sgOiBcIlwiO1xuICBjb25zdCBjb21taXQyID0ge1xuICAgIGlkOiBjdXN0b21JZCB8fCBgJHtzdGF0ZS5yZWNvcmRzLnNlcX0tJHtnZXRJRCgpfWAsXG4gICAgbWVzc2FnZTogYG1lcmdlZCBicmFuY2ggJHtvdGhlckJyYW5jaH0gaW50byAke3N0YXRlLnJlY29yZHMuY3VyckJyYW5jaH1gLFxuICAgIHNlcTogc3RhdGUucmVjb3Jkcy5zZXErKyxcbiAgICBwYXJlbnRzOiBzdGF0ZS5yZWNvcmRzLmhlYWQgPT0gbnVsbCA/IFtdIDogW3N0YXRlLnJlY29yZHMuaGVhZC5pZCwgdmVyaWZpZWRCcmFuY2hdLFxuICAgIGJyYW5jaDogc3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNoLFxuICAgIHR5cGU6IGNvbW1pdFR5cGUuTUVSR0UsXG4gICAgY3VzdG9tVHlwZTogb3ZlcnJpZGVUeXBlLFxuICAgIGN1c3RvbUlkOiBjdXN0b21JZCA/IHRydWUgOiBmYWxzZSxcbiAgICB0YWdzOiBjdXN0b21UYWdzID8/IFtdXG4gIH07XG4gIHN0YXRlLnJlY29yZHMuaGVhZCA9IGNvbW1pdDI7XG4gIHN0YXRlLnJlY29yZHMuY29tbWl0cy5zZXQoY29tbWl0Mi5pZCwgY29tbWl0Mik7XG4gIHN0YXRlLnJlY29yZHMuYnJhbmNoZXMuc2V0KHN0YXRlLnJlY29yZHMuY3VyckJyYW5jaCwgY29tbWl0Mi5pZCk7XG4gIGxvZy5kZWJ1ZyhzdGF0ZS5yZWNvcmRzLmJyYW5jaGVzKTtcbiAgbG9nLmRlYnVnKFwiaW4gbWVyZ2VCcmFuY2hcIik7XG59LCBcIm1lcmdlXCIpO1xudmFyIGNoZXJyeVBpY2sgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKGNoZXJyeVBpY2tEQikge1xuICBsZXQgc291cmNlSWQgPSBjaGVycnlQaWNrREIuaWQ7XG4gIGxldCB0YXJnZXRJZCA9IGNoZXJyeVBpY2tEQi50YXJnZXRJZDtcbiAgbGV0IHRhZ3MgPSBjaGVycnlQaWNrREIudGFncztcbiAgbGV0IHBhcmVudENvbW1pdElkID0gY2hlcnJ5UGlja0RCLnBhcmVudDtcbiAgbG9nLmRlYnVnKFwiRW50ZXJpbmcgY2hlcnJ5UGljazpcIiwgc291cmNlSWQsIHRhcmdldElkLCB0YWdzKTtcbiAgY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnMygpO1xuICBzb3VyY2VJZCA9IGNvbW1vbl9kZWZhdWx0LnNhbml0aXplVGV4dChzb3VyY2VJZCwgY29uZmlnKTtcbiAgdGFyZ2V0SWQgPSBjb21tb25fZGVmYXVsdC5zYW5pdGl6ZVRleHQodGFyZ2V0SWQsIGNvbmZpZyk7XG4gIHRhZ3MgPSB0YWdzPy5tYXAoKHRhZykgPT4gY29tbW9uX2RlZmF1bHQuc2FuaXRpemVUZXh0KHRhZywgY29uZmlnKSk7XG4gIHBhcmVudENvbW1pdElkID0gY29tbW9uX2RlZmF1bHQuc2FuaXRpemVUZXh0KHBhcmVudENvbW1pdElkLCBjb25maWcpO1xuICBpZiAoIXNvdXJjZUlkIHx8ICFzdGF0ZS5yZWNvcmRzLmNvbW1pdHMuaGFzKHNvdXJjZUlkKSkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgJ0luY29ycmVjdCB1c2FnZSBvZiBcImNoZXJyeVBpY2tcIi4gU291cmNlIGNvbW1pdCBpZCBzaG91bGQgZXhpc3QgYW5kIHByb3ZpZGVkJ1xuICAgICk7XG4gICAgZXJyb3IuaGFzaCA9IHtcbiAgICAgIHRleHQ6IGBjaGVycnlQaWNrICR7c291cmNlSWR9ICR7dGFyZ2V0SWR9YCxcbiAgICAgIHRva2VuOiBgY2hlcnJ5UGljayAke3NvdXJjZUlkfSAke3RhcmdldElkfWAsXG4gICAgICBleHBlY3RlZDogW1wiY2hlcnJ5LXBpY2sgYWJjXCJdXG4gICAgfTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBjb25zdCBzb3VyY2VDb21taXQgPSBzdGF0ZS5yZWNvcmRzLmNvbW1pdHMuZ2V0KHNvdXJjZUlkKTtcbiAgaWYgKHNvdXJjZUNvbW1pdCA9PT0gdm9pZCAwIHx8ICFzb3VyY2VDb21taXQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29ycmVjdCB1c2FnZSBvZiBcImNoZXJyeVBpY2tcIi4gU291cmNlIGNvbW1pdCBpZCBzaG91bGQgZXhpc3QgYW5kIHByb3ZpZGVkJyk7XG4gIH1cbiAgaWYgKHBhcmVudENvbW1pdElkICYmICEoQXJyYXkuaXNBcnJheShzb3VyY2VDb21taXQucGFyZW50cykgJiYgc291cmNlQ29tbWl0LnBhcmVudHMuaW5jbHVkZXMocGFyZW50Q29tbWl0SWQpKSkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgXCJJbnZhbGlkIG9wZXJhdGlvbjogVGhlIHNwZWNpZmllZCBwYXJlbnQgY29tbWl0IGlzIG5vdCBhbiBpbW1lZGlhdGUgcGFyZW50IG9mIHRoZSBjaGVycnktcGlja2VkIGNvbW1pdC5cIlxuICAgICk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgY29uc3Qgc291cmNlQ29tbWl0QnJhbmNoID0gc291cmNlQ29tbWl0LmJyYW5jaDtcbiAgaWYgKHNvdXJjZUNvbW1pdC50eXBlID09PSBjb21taXRUeXBlLk1FUkdFICYmICFwYXJlbnRDb21taXRJZCkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgXCJJbmNvcnJlY3QgdXNhZ2Ugb2YgY2hlcnJ5LXBpY2s6IElmIHRoZSBzb3VyY2UgY29tbWl0IGlzIGEgbWVyZ2UgY29tbWl0LCBhbiBpbW1lZGlhdGUgcGFyZW50IGNvbW1pdCBtdXN0IGJlIHNwZWNpZmllZC5cIlxuICAgICk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgaWYgKCF0YXJnZXRJZCB8fCAhc3RhdGUucmVjb3Jkcy5jb21taXRzLmhhcyh0YXJnZXRJZCkpIHtcbiAgICBpZiAoc291cmNlQ29tbWl0QnJhbmNoID09PSBzdGF0ZS5yZWNvcmRzLmN1cnJCcmFuY2gpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICAnSW5jb3JyZWN0IHVzYWdlIG9mIFwiY2hlcnJ5UGlja1wiLiBTb3VyY2UgY29tbWl0IGlzIGFscmVhZHkgb24gY3VycmVudCBicmFuY2gnXG4gICAgICApO1xuICAgICAgZXJyb3IuaGFzaCA9IHtcbiAgICAgICAgdGV4dDogYGNoZXJyeVBpY2sgJHtzb3VyY2VJZH0gJHt0YXJnZXRJZH1gLFxuICAgICAgICB0b2tlbjogYGNoZXJyeVBpY2sgJHtzb3VyY2VJZH0gJHt0YXJnZXRJZH1gLFxuICAgICAgICBleHBlY3RlZDogW1wiY2hlcnJ5LXBpY2sgYWJjXCJdXG4gICAgICB9O1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGNvbnN0IGN1cnJlbnRDb21taXRJZCA9IHN0YXRlLnJlY29yZHMuYnJhbmNoZXMuZ2V0KHN0YXRlLnJlY29yZHMuY3VyckJyYW5jaCk7XG4gICAgaWYgKGN1cnJlbnRDb21taXRJZCA9PT0gdm9pZCAwIHx8ICFjdXJyZW50Q29tbWl0SWQpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICBgSW5jb3JyZWN0IHVzYWdlIG9mIFwiY2hlcnJ5LXBpY2tcIi4gQ3VycmVudCBicmFuY2ggKCR7c3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNofSloYXMgbm8gY29tbWl0c2BcbiAgICAgICk7XG4gICAgICBlcnJvci5oYXNoID0ge1xuICAgICAgICB0ZXh0OiBgY2hlcnJ5UGljayAke3NvdXJjZUlkfSAke3RhcmdldElkfWAsXG4gICAgICAgIHRva2VuOiBgY2hlcnJ5UGljayAke3NvdXJjZUlkfSAke3RhcmdldElkfWAsXG4gICAgICAgIGV4cGVjdGVkOiBbXCJjaGVycnktcGljayBhYmNcIl1cbiAgICAgIH07XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudENvbW1pdCA9IHN0YXRlLnJlY29yZHMuY29tbWl0cy5nZXQoY3VycmVudENvbW1pdElkKTtcbiAgICBpZiAoY3VycmVudENvbW1pdCA9PT0gdm9pZCAwIHx8ICFjdXJyZW50Q29tbWl0KSB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgICAgYEluY29ycmVjdCB1c2FnZSBvZiBcImNoZXJyeS1waWNrXCIuIEN1cnJlbnQgYnJhbmNoICgke3N0YXRlLnJlY29yZHMuY3VyckJyYW5jaH0paGFzIG5vIGNvbW1pdHNgXG4gICAgICApO1xuICAgICAgZXJyb3IuaGFzaCA9IHtcbiAgICAgICAgdGV4dDogYGNoZXJyeVBpY2sgJHtzb3VyY2VJZH0gJHt0YXJnZXRJZH1gLFxuICAgICAgICB0b2tlbjogYGNoZXJyeVBpY2sgJHtzb3VyY2VJZH0gJHt0YXJnZXRJZH1gLFxuICAgICAgICBleHBlY3RlZDogW1wiY2hlcnJ5LXBpY2sgYWJjXCJdXG4gICAgICB9O1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGNvbnN0IGNvbW1pdDIgPSB7XG4gICAgICBpZDogc3RhdGUucmVjb3Jkcy5zZXEgKyBcIi1cIiArIGdldElEKCksXG4gICAgICBtZXNzYWdlOiBgY2hlcnJ5LXBpY2tlZCAke3NvdXJjZUNvbW1pdD8ubWVzc2FnZX0gaW50byAke3N0YXRlLnJlY29yZHMuY3VyckJyYW5jaH1gLFxuICAgICAgc2VxOiBzdGF0ZS5yZWNvcmRzLnNlcSsrLFxuICAgICAgcGFyZW50czogc3RhdGUucmVjb3Jkcy5oZWFkID09IG51bGwgPyBbXSA6IFtzdGF0ZS5yZWNvcmRzLmhlYWQuaWQsIHNvdXJjZUNvbW1pdC5pZF0sXG4gICAgICBicmFuY2g6IHN0YXRlLnJlY29yZHMuY3VyckJyYW5jaCxcbiAgICAgIHR5cGU6IGNvbW1pdFR5cGUuQ0hFUlJZX1BJQ0ssXG4gICAgICB0YWdzOiB0YWdzID8gdGFncy5maWx0ZXIoQm9vbGVhbikgOiBbXG4gICAgICAgIGBjaGVycnktcGljazoke3NvdXJjZUNvbW1pdC5pZH0ke3NvdXJjZUNvbW1pdC50eXBlID09PSBjb21taXRUeXBlLk1FUkdFID8gYHxwYXJlbnQ6JHtwYXJlbnRDb21taXRJZH1gIDogXCJcIn1gXG4gICAgICBdXG4gICAgfTtcbiAgICBzdGF0ZS5yZWNvcmRzLmhlYWQgPSBjb21taXQyO1xuICAgIHN0YXRlLnJlY29yZHMuY29tbWl0cy5zZXQoY29tbWl0Mi5pZCwgY29tbWl0Mik7XG4gICAgc3RhdGUucmVjb3Jkcy5icmFuY2hlcy5zZXQoc3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNoLCBjb21taXQyLmlkKTtcbiAgICBsb2cuZGVidWcoc3RhdGUucmVjb3Jkcy5icmFuY2hlcyk7XG4gICAgbG9nLmRlYnVnKFwiaW4gY2hlcnJ5UGlja1wiKTtcbiAgfVxufSwgXCJjaGVycnlQaWNrXCIpO1xudmFyIGNoZWNrb3V0ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbihicmFuY2gyKSB7XG4gIGJyYW5jaDIgPSBjb21tb25fZGVmYXVsdC5zYW5pdGl6ZVRleHQoYnJhbmNoMiwgZ2V0Q29uZmlnMygpKTtcbiAgaWYgKCFzdGF0ZS5yZWNvcmRzLmJyYW5jaGVzLmhhcyhicmFuY2gyKSkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgYFRyeWluZyB0byBjaGVja291dCBicmFuY2ggd2hpY2ggaXMgbm90IHlldCBjcmVhdGVkLiAoSGVscCB0cnkgdXNpbmcgXCJicmFuY2ggJHticmFuY2gyfVwiKWBcbiAgICApO1xuICAgIGVycm9yLmhhc2ggPSB7XG4gICAgICB0ZXh0OiBgY2hlY2tvdXQgJHticmFuY2gyfWAsXG4gICAgICB0b2tlbjogYGNoZWNrb3V0ICR7YnJhbmNoMn1gLFxuICAgICAgZXhwZWN0ZWQ6IFtgYnJhbmNoICR7YnJhbmNoMn1gXVxuICAgIH07XG4gICAgdGhyb3cgZXJyb3I7XG4gIH0gZWxzZSB7XG4gICAgc3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNoID0gYnJhbmNoMjtcbiAgICBjb25zdCBpZCA9IHN0YXRlLnJlY29yZHMuYnJhbmNoZXMuZ2V0KHN0YXRlLnJlY29yZHMuY3VyckJyYW5jaCk7XG4gICAgaWYgKGlkID09PSB2b2lkIDAgfHwgIWlkKSB7XG4gICAgICBzdGF0ZS5yZWNvcmRzLmhlYWQgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5yZWNvcmRzLmhlYWQgPSBzdGF0ZS5yZWNvcmRzLmNvbW1pdHMuZ2V0KGlkKSA/PyBudWxsO1xuICAgIH1cbiAgfVxufSwgXCJjaGVja291dFwiKTtcbmZ1bmN0aW9uIHVwc2VydChhcnIsIGtleSwgbmV3VmFsKSB7XG4gIGNvbnN0IGluZGV4ID0gYXJyLmluZGV4T2Yoa2V5KTtcbiAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgIGFyci5wdXNoKG5ld1ZhbCk7XG4gIH0gZWxzZSB7XG4gICAgYXJyLnNwbGljZShpbmRleCwgMSwgbmV3VmFsKTtcbiAgfVxufVxuX19uYW1lKHVwc2VydCwgXCJ1cHNlcnRcIik7XG5mdW5jdGlvbiBwcmV0dHlQcmludENvbW1pdEhpc3RvcnkoY29tbWl0QXJyKSB7XG4gIGNvbnN0IGNvbW1pdDIgPSBjb21taXRBcnIucmVkdWNlKChvdXQsIGNvbW1pdDMpID0+IHtcbiAgICBpZiAob3V0LnNlcSA+IGNvbW1pdDMuc2VxKSB7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH1cbiAgICByZXR1cm4gY29tbWl0MztcbiAgfSwgY29tbWl0QXJyWzBdKTtcbiAgbGV0IGxpbmUgPSBcIlwiO1xuICBjb21taXRBcnIuZm9yRWFjaChmdW5jdGlvbihjKSB7XG4gICAgaWYgKGMgPT09IGNvbW1pdDIpIHtcbiAgICAgIGxpbmUgKz0gXCJcdCpcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgbGluZSArPSBcIlx0fFwiO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IGxhYmVsID0gW2xpbmUsIGNvbW1pdDIuaWQsIGNvbW1pdDIuc2VxXTtcbiAgZm9yIChjb25zdCBicmFuY2gyIGluIHN0YXRlLnJlY29yZHMuYnJhbmNoZXMpIHtcbiAgICBpZiAoc3RhdGUucmVjb3Jkcy5icmFuY2hlcy5nZXQoYnJhbmNoMikgPT09IGNvbW1pdDIuaWQpIHtcbiAgICAgIGxhYmVsLnB1c2goYnJhbmNoMik7XG4gICAgfVxuICB9XG4gIGxvZy5kZWJ1ZyhsYWJlbC5qb2luKFwiIFwiKSk7XG4gIGlmIChjb21taXQyLnBhcmVudHMgJiYgY29tbWl0Mi5wYXJlbnRzLmxlbmd0aCA9PSAyICYmIGNvbW1pdDIucGFyZW50c1swXSAmJiBjb21taXQyLnBhcmVudHNbMV0pIHtcbiAgICBjb25zdCBuZXdDb21taXQgPSBzdGF0ZS5yZWNvcmRzLmNvbW1pdHMuZ2V0KGNvbW1pdDIucGFyZW50c1swXSk7XG4gICAgdXBzZXJ0KGNvbW1pdEFyciwgY29tbWl0MiwgbmV3Q29tbWl0KTtcbiAgICBpZiAoY29tbWl0Mi5wYXJlbnRzWzFdKSB7XG4gICAgICBjb21taXRBcnIucHVzaChzdGF0ZS5yZWNvcmRzLmNvbW1pdHMuZ2V0KGNvbW1pdDIucGFyZW50c1sxXSkpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjb21taXQyLnBhcmVudHMubGVuZ3RoID09IDApIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgaWYgKGNvbW1pdDIucGFyZW50c1swXSkge1xuICAgICAgY29uc3QgbmV3Q29tbWl0ID0gc3RhdGUucmVjb3Jkcy5jb21taXRzLmdldChjb21taXQyLnBhcmVudHNbMF0pO1xuICAgICAgdXBzZXJ0KGNvbW1pdEFyciwgY29tbWl0MiwgbmV3Q29tbWl0KTtcbiAgICB9XG4gIH1cbiAgY29tbWl0QXJyID0gdW5pcUJ5KGNvbW1pdEFyciwgKGMpID0+IGMuaWQpO1xuICBwcmV0dHlQcmludENvbW1pdEhpc3RvcnkoY29tbWl0QXJyKTtcbn1cbl9fbmFtZShwcmV0dHlQcmludENvbW1pdEhpc3RvcnksIFwicHJldHR5UHJpbnRDb21taXRIaXN0b3J5XCIpO1xudmFyIHByZXR0eVByaW50ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbigpIHtcbiAgbG9nLmRlYnVnKHN0YXRlLnJlY29yZHMuY29tbWl0cyk7XG4gIGNvbnN0IG5vZGUgPSBnZXRDb21taXRzQXJyYXkoKVswXTtcbiAgcHJldHR5UHJpbnRDb21taXRIaXN0b3J5KFtub2RlXSk7XG59LCBcInByZXR0eVByaW50XCIpO1xudmFyIGNsZWFyMiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oKSB7XG4gIHN0YXRlLnJlc2V0KCk7XG4gIGNsZWFyKCk7XG59LCBcImNsZWFyXCIpO1xudmFyIGdldEJyYW5jaGVzQXNPYmpBcnJheSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGJyYW5jaGVzQXJyYXkgPSBbLi4uc3RhdGUucmVjb3Jkcy5icmFuY2hDb25maWcudmFsdWVzKCldLm1hcCgoYnJhbmNoQ29uZmlnLCBpKSA9PiB7XG4gICAgaWYgKGJyYW5jaENvbmZpZy5vcmRlciAhPT0gbnVsbCAmJiBicmFuY2hDb25maWcub3JkZXIgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIGJyYW5jaENvbmZpZztcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmJyYW5jaENvbmZpZyxcbiAgICAgIG9yZGVyOiBwYXJzZUZsb2F0KGAwLiR7aX1gKVxuICAgIH07XG4gIH0pLnNvcnQoKGEsIGIpID0+IChhLm9yZGVyID8/IDApIC0gKGIub3JkZXIgPz8gMCkpLm1hcCgoeyBuYW1lIH0pID0+ICh7IG5hbWUgfSkpO1xuICByZXR1cm4gYnJhbmNoZXNBcnJheTtcbn0sIFwiZ2V0QnJhbmNoZXNBc09iakFycmF5XCIpO1xudmFyIGdldEJyYW5jaGVzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHN0YXRlLnJlY29yZHMuYnJhbmNoZXM7XG59LCBcImdldEJyYW5jaGVzXCIpO1xudmFyIGdldENvbW1pdHMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKCkge1xuICByZXR1cm4gc3RhdGUucmVjb3Jkcy5jb21taXRzO1xufSwgXCJnZXRDb21taXRzXCIpO1xudmFyIGdldENvbW1pdHNBcnJheSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGNvbW1pdEFyciA9IFsuLi5zdGF0ZS5yZWNvcmRzLmNvbW1pdHMudmFsdWVzKCldO1xuICBjb21taXRBcnIuZm9yRWFjaChmdW5jdGlvbihvKSB7XG4gICAgbG9nLmRlYnVnKG8uaWQpO1xuICB9KTtcbiAgY29tbWl0QXJyLnNvcnQoKGEsIGIpID0+IGEuc2VxIC0gYi5zZXEpO1xuICByZXR1cm4gY29tbWl0QXJyO1xufSwgXCJnZXRDb21taXRzQXJyYXlcIik7XG52YXIgZ2V0Q3VycmVudEJyYW5jaCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oKSB7XG4gIHJldHVybiBzdGF0ZS5yZWNvcmRzLmN1cnJCcmFuY2g7XG59LCBcImdldEN1cnJlbnRCcmFuY2hcIik7XG52YXIgZ2V0RGlyZWN0aW9uID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHN0YXRlLnJlY29yZHMuZGlyZWN0aW9uO1xufSwgXCJnZXREaXJlY3Rpb25cIik7XG52YXIgZ2V0SGVhZCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oKSB7XG4gIHJldHVybiBzdGF0ZS5yZWNvcmRzLmhlYWQ7XG59LCBcImdldEhlYWRcIik7XG52YXIgZGIgPSB7XG4gIGNvbW1pdFR5cGUsXG4gIGdldENvbmZpZzogZ2V0Q29uZmlnMyxcbiAgc2V0RGlyZWN0aW9uLFxuICBzZXRPcHRpb25zLFxuICBnZXRPcHRpb25zLFxuICBjb21taXQsXG4gIGJyYW5jaCxcbiAgbWVyZ2UsXG4gIGNoZXJyeVBpY2ssXG4gIGNoZWNrb3V0LFxuICAvL3Jlc2V0LFxuICBwcmV0dHlQcmludCxcbiAgY2xlYXI6IGNsZWFyMixcbiAgZ2V0QnJhbmNoZXNBc09iakFycmF5LFxuICBnZXRCcmFuY2hlcyxcbiAgZ2V0Q29tbWl0cyxcbiAgZ2V0Q29tbWl0c0FycmF5LFxuICBnZXRDdXJyZW50QnJhbmNoLFxuICBnZXREaXJlY3Rpb24sXG4gIGdldEhlYWQsXG4gIHNldEFjY1RpdGxlLFxuICBnZXRBY2NUaXRsZSxcbiAgZ2V0QWNjRGVzY3JpcHRpb24sXG4gIHNldEFjY0Rlc2NyaXB0aW9uLFxuICBzZXREaWFncmFtVGl0bGUsXG4gIGdldERpYWdyYW1UaXRsZVxufTtcblxuLy8gc3JjL2RpYWdyYW1zL2dpdC9naXRHcmFwaFBhcnNlci50c1xudmFyIHBvcHVsYXRlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoYXN0LCBkYjIpID0+IHtcbiAgcG9wdWxhdGVDb21tb25EYihhc3QsIGRiMik7XG4gIGlmIChhc3QuZGlyKSB7XG4gICAgZGIyLnNldERpcmVjdGlvbihhc3QuZGlyKTtcbiAgfVxuICBmb3IgKGNvbnN0IHN0YXRlbWVudCBvZiBhc3Quc3RhdGVtZW50cykge1xuICAgIHBhcnNlU3RhdGVtZW50KHN0YXRlbWVudCwgZGIyKTtcbiAgfVxufSwgXCJwb3B1bGF0ZVwiKTtcbnZhciBwYXJzZVN0YXRlbWVudCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHN0YXRlbWVudCwgZGIyKSA9PiB7XG4gIGNvbnN0IHBhcnNlcnMgPSB7XG4gICAgQ29tbWl0OiAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzdG10KSA9PiBkYjIuY29tbWl0KHBhcnNlQ29tbWl0KHN0bXQpKSwgXCJDb21taXRcIiksXG4gICAgQnJhbmNoOiAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzdG10KSA9PiBkYjIuYnJhbmNoKHBhcnNlQnJhbmNoKHN0bXQpKSwgXCJCcmFuY2hcIiksXG4gICAgTWVyZ2U6IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHN0bXQpID0+IGRiMi5tZXJnZShwYXJzZU1lcmdlKHN0bXQpKSwgXCJNZXJnZVwiKSxcbiAgICBDaGVja291dDogLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc3RtdCkgPT4gZGIyLmNoZWNrb3V0KHBhcnNlQ2hlY2tvdXQoc3RtdCkpLCBcIkNoZWNrb3V0XCIpLFxuICAgIENoZXJyeVBpY2tpbmc6IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHN0bXQpID0+IGRiMi5jaGVycnlQaWNrKHBhcnNlQ2hlcnJ5UGlja2luZyhzdG10KSksIFwiQ2hlcnJ5UGlja2luZ1wiKVxuICB9O1xuICBjb25zdCBwYXJzZXIyID0gcGFyc2Vyc1tzdGF0ZW1lbnQuJHR5cGVdO1xuICBpZiAocGFyc2VyMikge1xuICAgIHBhcnNlcjIoc3RhdGVtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBsb2cuZXJyb3IoYFVua25vd24gc3RhdGVtZW50IHR5cGU6ICR7c3RhdGVtZW50LiR0eXBlfWApO1xuICB9XG59LCBcInBhcnNlU3RhdGVtZW50XCIpO1xudmFyIHBhcnNlQ29tbWl0ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoY29tbWl0MikgPT4ge1xuICBjb25zdCBjb21taXREQiA9IHtcbiAgICBpZDogY29tbWl0Mi5pZCxcbiAgICBtc2c6IGNvbW1pdDIubWVzc2FnZSA/PyBcIlwiLFxuICAgIHR5cGU6IGNvbW1pdDIudHlwZSAhPT0gdm9pZCAwID8gY29tbWl0VHlwZVtjb21taXQyLnR5cGVdIDogY29tbWl0VHlwZS5OT1JNQUwsXG4gICAgdGFnczogY29tbWl0Mi50YWdzID8/IHZvaWQgMFxuICB9O1xuICByZXR1cm4gY29tbWl0REI7XG59LCBcInBhcnNlQ29tbWl0XCIpO1xudmFyIHBhcnNlQnJhbmNoID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoYnJhbmNoMikgPT4ge1xuICBjb25zdCBicmFuY2hEQiA9IHtcbiAgICBuYW1lOiBicmFuY2gyLm5hbWUsXG4gICAgb3JkZXI6IGJyYW5jaDIub3JkZXIgPz8gMFxuICB9O1xuICByZXR1cm4gYnJhbmNoREI7XG59LCBcInBhcnNlQnJhbmNoXCIpO1xudmFyIHBhcnNlTWVyZ2UgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChtZXJnZTIpID0+IHtcbiAgY29uc3QgbWVyZ2VEQiA9IHtcbiAgICBicmFuY2g6IG1lcmdlMi5icmFuY2gsXG4gICAgaWQ6IG1lcmdlMi5pZCA/PyBcIlwiLFxuICAgIHR5cGU6IG1lcmdlMi50eXBlICE9PSB2b2lkIDAgPyBjb21taXRUeXBlW21lcmdlMi50eXBlXSA6IHZvaWQgMCxcbiAgICB0YWdzOiBtZXJnZTIudGFncyA/PyB2b2lkIDBcbiAgfTtcbiAgcmV0dXJuIG1lcmdlREI7XG59LCBcInBhcnNlTWVyZ2VcIik7XG52YXIgcGFyc2VDaGVja291dCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGNoZWNrb3V0MikgPT4ge1xuICBjb25zdCBicmFuY2gyID0gY2hlY2tvdXQyLmJyYW5jaDtcbiAgcmV0dXJuIGJyYW5jaDI7XG59LCBcInBhcnNlQ2hlY2tvdXRcIik7XG52YXIgcGFyc2VDaGVycnlQaWNraW5nID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoY2hlcnJ5UGlja2luZykgPT4ge1xuICBjb25zdCBjaGVycnlQaWNrREIgPSB7XG4gICAgaWQ6IGNoZXJyeVBpY2tpbmcuaWQsXG4gICAgdGFyZ2V0SWQ6IFwiXCIsXG4gICAgdGFnczogY2hlcnJ5UGlja2luZy50YWdzPy5sZW5ndGggPT09IDAgPyB2b2lkIDAgOiBjaGVycnlQaWNraW5nLnRhZ3MsXG4gICAgcGFyZW50OiBjaGVycnlQaWNraW5nLnBhcmVudFxuICB9O1xuICByZXR1cm4gY2hlcnJ5UGlja0RCO1xufSwgXCJwYXJzZUNoZXJyeVBpY2tpbmdcIik7XG52YXIgcGFyc2VyID0ge1xuICBwYXJzZTogLyogQF9fUFVSRV9fICovIF9fbmFtZShhc3luYyAoaW5wdXQpID0+IHtcbiAgICBjb25zdCBhc3QgPSBhd2FpdCBwYXJzZShcImdpdEdyYXBoXCIsIGlucHV0KTtcbiAgICBsb2cuZGVidWcoYXN0KTtcbiAgICBwb3B1bGF0ZShhc3QsIGRiKTtcbiAgfSwgXCJwYXJzZVwiKVxufTtcbmlmICh2b2lkIDApIHtcbiAgY29uc3QgeyBpdCwgZXhwZWN0LCBkZXNjcmliZSB9ID0gdm9pZCAwO1xuICBjb25zdCBtb2NrREIgPSB7XG4gICAgY29tbWl0VHlwZSxcbiAgICBzZXREaXJlY3Rpb246IHZpLmZuKCksXG4gICAgY29tbWl0OiB2aS5mbigpLFxuICAgIGJyYW5jaDogdmkuZm4oKSxcbiAgICBtZXJnZTogdmkuZm4oKSxcbiAgICBjaGVycnlQaWNrOiB2aS5mbigpLFxuICAgIGNoZWNrb3V0OiB2aS5mbigpXG4gIH07XG4gIGRlc2NyaWJlKFwiR2l0R3JhcGggUGFyc2VyXCIsICgpID0+IHtcbiAgICBpdChcInNob3VsZCBwYXJzZSBhIGNvbW1pdCBzdGF0ZW1lbnRcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgY29tbWl0MiA9IHtcbiAgICAgICAgJHR5cGU6IFwiQ29tbWl0XCIsXG4gICAgICAgIGlkOiBcIjFcIixcbiAgICAgICAgbWVzc2FnZTogXCJ0ZXN0XCIsXG4gICAgICAgIHRhZ3M6IFtcInRhZzFcIiwgXCJ0YWcyXCJdLFxuICAgICAgICB0eXBlOiBcIk5PUk1BTFwiXG4gICAgICB9O1xuICAgICAgcGFyc2VTdGF0ZW1lbnQoY29tbWl0MiwgbW9ja0RCKTtcbiAgICAgIGV4cGVjdChtb2NrREIuY29tbWl0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGlkOiBcIjFcIixcbiAgICAgICAgbXNnOiBcInRlc3RcIixcbiAgICAgICAgdGFnczogW1widGFnMVwiLCBcInRhZzJcIl0sXG4gICAgICAgIHR5cGU6IDBcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KFwic2hvdWxkIHBhcnNlIGEgYnJhbmNoIHN0YXRlbWVudFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBicmFuY2gyID0ge1xuICAgICAgICAkdHlwZTogXCJCcmFuY2hcIixcbiAgICAgICAgbmFtZTogXCJuZXdCcmFuY2hcIixcbiAgICAgICAgb3JkZXI6IDFcbiAgICAgIH07XG4gICAgICBwYXJzZVN0YXRlbWVudChicmFuY2gyLCBtb2NrREIpO1xuICAgICAgZXhwZWN0KG1vY2tEQi5icmFuY2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHsgbmFtZTogXCJuZXdCcmFuY2hcIiwgb3JkZXI6IDEgfSk7XG4gICAgfSk7XG4gICAgaXQoXCJzaG91bGQgcGFyc2UgYSBjaGVja291dCBzdGF0ZW1lbnRcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgY2hlY2tvdXQyID0ge1xuICAgICAgICAkdHlwZTogXCJDaGVja291dFwiLFxuICAgICAgICBicmFuY2g6IFwibmV3QnJhbmNoXCJcbiAgICAgIH07XG4gICAgICBwYXJzZVN0YXRlbWVudChjaGVja291dDIsIG1vY2tEQik7XG4gICAgICBleHBlY3QobW9ja0RCLmNoZWNrb3V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcIm5ld0JyYW5jaFwiKTtcbiAgICB9KTtcbiAgICBpdChcInNob3VsZCBwYXJzZSBhIG1lcmdlIHN0YXRlbWVudFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBtZXJnZTIgPSB7XG4gICAgICAgICR0eXBlOiBcIk1lcmdlXCIsXG4gICAgICAgIGJyYW5jaDogXCJuZXdCcmFuY2hcIixcbiAgICAgICAgaWQ6IFwiMVwiLFxuICAgICAgICB0YWdzOiBbXCJ0YWcxXCIsIFwidGFnMlwiXSxcbiAgICAgICAgdHlwZTogXCJOT1JNQUxcIlxuICAgICAgfTtcbiAgICAgIHBhcnNlU3RhdGVtZW50KG1lcmdlMiwgbW9ja0RCKTtcbiAgICAgIGV4cGVjdChtb2NrREIubWVyZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgYnJhbmNoOiBcIm5ld0JyYW5jaFwiLFxuICAgICAgICBpZDogXCIxXCIsXG4gICAgICAgIHRhZ3M6IFtcInRhZzFcIiwgXCJ0YWcyXCJdLFxuICAgICAgICB0eXBlOiAwXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBpdChcInNob3VsZCBwYXJzZSBhIGNoZXJyeSBwaWNraW5nIHN0YXRlbWVudFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBjaGVycnlQaWNrMiA9IHtcbiAgICAgICAgJHR5cGU6IFwiQ2hlcnJ5UGlja2luZ1wiLFxuICAgICAgICBpZDogXCIxXCIsXG4gICAgICAgIHRhZ3M6IFtcInRhZzFcIiwgXCJ0YWcyXCJdLFxuICAgICAgICBwYXJlbnQ6IFwiMlwiXG4gICAgICB9O1xuICAgICAgcGFyc2VTdGF0ZW1lbnQoY2hlcnJ5UGljazIsIG1vY2tEQik7XG4gICAgICBleHBlY3QobW9ja0RCLmNoZXJyeVBpY2spLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgaWQ6IFwiMVwiLFxuICAgICAgICB0YXJnZXRJZDogXCJcIixcbiAgICAgICAgcGFyZW50OiBcIjJcIixcbiAgICAgICAgdGFnczogW1widGFnMVwiLCBcInRhZzJcIl1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KFwic2hvdWxkIHBhcnNlIGEgbGFuZ2l1bSBnZW5lcmF0ZWQgZ2l0R3JhcGggYXN0XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGR1bW15ID0ge1xuICAgICAgICAkdHlwZTogXCJHaXRHcmFwaFwiLFxuICAgICAgICBzdGF0ZW1lbnRzOiBbXVxuICAgICAgfTtcbiAgICAgIGNvbnN0IGdpdEdyYXBoQXN0ID0ge1xuICAgICAgICAkdHlwZTogXCJHaXRHcmFwaFwiLFxuICAgICAgICBzdGF0ZW1lbnRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgJGNvbnRhaW5lcjogZHVtbXksXG4gICAgICAgICAgICAkdHlwZTogXCJDb21taXRcIixcbiAgICAgICAgICAgIGlkOiBcIjFcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwidGVzdFwiLFxuICAgICAgICAgICAgdGFnczogW1widGFnMVwiLCBcInRhZzJcIl0sXG4gICAgICAgICAgICB0eXBlOiBcIk5PUk1BTFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAkY29udGFpbmVyOiBkdW1teSxcbiAgICAgICAgICAgICR0eXBlOiBcIkJyYW5jaFwiLFxuICAgICAgICAgICAgbmFtZTogXCJuZXdCcmFuY2hcIixcbiAgICAgICAgICAgIG9yZGVyOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAkY29udGFpbmVyOiBkdW1teSxcbiAgICAgICAgICAgICR0eXBlOiBcIk1lcmdlXCIsXG4gICAgICAgICAgICBicmFuY2g6IFwibmV3QnJhbmNoXCIsXG4gICAgICAgICAgICBpZDogXCIxXCIsXG4gICAgICAgICAgICB0YWdzOiBbXCJ0YWcxXCIsIFwidGFnMlwiXSxcbiAgICAgICAgICAgIHR5cGU6IFwiTk9STUFMXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgICRjb250YWluZXI6IGR1bW15LFxuICAgICAgICAgICAgJHR5cGU6IFwiQ2hlY2tvdXRcIixcbiAgICAgICAgICAgIGJyYW5jaDogXCJuZXdCcmFuY2hcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgJGNvbnRhaW5lcjogZHVtbXksXG4gICAgICAgICAgICAkdHlwZTogXCJDaGVycnlQaWNraW5nXCIsXG4gICAgICAgICAgICBpZDogXCIxXCIsXG4gICAgICAgICAgICB0YWdzOiBbXCJ0YWcxXCIsIFwidGFnMlwiXSxcbiAgICAgICAgICAgIHBhcmVudDogXCIyXCJcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgICBwb3B1bGF0ZShnaXRHcmFwaEFzdCwgbW9ja0RCKTtcbiAgICAgIGV4cGVjdChtb2NrREIuY29tbWl0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGlkOiBcIjFcIixcbiAgICAgICAgbXNnOiBcInRlc3RcIixcbiAgICAgICAgdGFnczogW1widGFnMVwiLCBcInRhZzJcIl0sXG4gICAgICAgIHR5cGU6IDBcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG1vY2tEQi5icmFuY2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHsgbmFtZTogXCJuZXdCcmFuY2hcIiwgb3JkZXI6IDEgfSk7XG4gICAgICBleHBlY3QobW9ja0RCLm1lcmdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGJyYW5jaDogXCJuZXdCcmFuY2hcIixcbiAgICAgICAgaWQ6IFwiMVwiLFxuICAgICAgICB0YWdzOiBbXCJ0YWcxXCIsIFwidGFnMlwiXSxcbiAgICAgICAgdHlwZTogMFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja0RCLmNoZWNrb3V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcIm5ld0JyYW5jaFwiKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8vIHNyYy9kaWFncmFtcy9naXQvZ2l0R3JhcGhSZW5kZXJlci50c1xuaW1wb3J0IHsgc2VsZWN0IH0gZnJvbSBcImQzXCI7XG52YXIgREVGQVVMVF9DT05GSUcgPSBnZXRDb25maWcyKCk7XG52YXIgREVGQVVMVF9HSVRHUkFQSF9DT05GSUcyID0gREVGQVVMVF9DT05GSUc/LmdpdEdyYXBoO1xudmFyIExBWU9VVF9PRkZTRVQgPSAxMDtcbnZhciBDT01NSVRfU1RFUCA9IDQwO1xudmFyIFBYID0gNDtcbnZhciBQWSA9IDI7XG52YXIgVEhFTUVfQ09MT1JfTElNSVQgPSA4O1xudmFyIGJyYW5jaFBvcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG52YXIgY29tbWl0UG9zID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbnZhciBkZWZhdWx0UG9zID0gMzA7XG52YXIgYWxsQ29tbWl0c0RpY3QgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xudmFyIGxhbmVzID0gW107XG52YXIgbWF4UG9zID0gMDtcbnZhciBkaXIgPSBcIkxSXCI7XG52YXIgY2xlYXIzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoKSA9PiB7XG4gIGJyYW5jaFBvcy5jbGVhcigpO1xuICBjb21taXRQb3MuY2xlYXIoKTtcbiAgYWxsQ29tbWl0c0RpY3QuY2xlYXIoKTtcbiAgbWF4UG9zID0gMDtcbiAgbGFuZXMgPSBbXTtcbiAgZGlyID0gXCJMUlwiO1xufSwgXCJjbGVhclwiKTtcbnZhciBkcmF3VGV4dCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHR4dCkgPT4ge1xuICBjb25zdCBzdmdMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwidGV4dFwiKTtcbiAgY29uc3Qgcm93cyA9IHR5cGVvZiB0eHQgPT09IFwic3RyaW5nXCIgPyB0eHQuc3BsaXQoL1xcXFxufFxcbnw8YnJcXHMqXFwvPz4vZ2kpIDogdHh0O1xuICByb3dzLmZvckVhY2goKHJvdykgPT4ge1xuICAgIGNvbnN0IHRzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJ0c3BhblwiKTtcbiAgICB0c3Bhbi5zZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiLCBcInhtbDpzcGFjZVwiLCBcInByZXNlcnZlXCIpO1xuICAgIHRzcGFuLnNldEF0dHJpYnV0ZShcImR5XCIsIFwiMWVtXCIpO1xuICAgIHRzcGFuLnNldEF0dHJpYnV0ZShcInhcIiwgXCIwXCIpO1xuICAgIHRzcGFuLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicm93XCIpO1xuICAgIHRzcGFuLnRleHRDb250ZW50ID0gcm93LnRyaW0oKTtcbiAgICBzdmdMYWJlbC5hcHBlbmRDaGlsZCh0c3Bhbik7XG4gIH0pO1xuICByZXR1cm4gc3ZnTGFiZWw7XG59LCBcImRyYXdUZXh0XCIpO1xudmFyIGZpbmRDbG9zZXN0UGFyZW50ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgocGFyZW50cykgPT4ge1xuICBsZXQgY2xvc2VzdFBhcmVudDtcbiAgbGV0IGNvbXBhcmlzb25GdW5jO1xuICBsZXQgdGFyZ2V0UG9zaXRpb247XG4gIGlmIChkaXIgPT09IFwiQlRcIikge1xuICAgIGNvbXBhcmlzb25GdW5jID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoYSwgYikgPT4gYSA8PSBiLCBcImNvbXBhcmlzb25GdW5jXCIpO1xuICAgIHRhcmdldFBvc2l0aW9uID0gSW5maW5pdHk7XG4gIH0gZWxzZSB7XG4gICAgY29tcGFyaXNvbkZ1bmMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChhLCBiKSA9PiBhID49IGIsIFwiY29tcGFyaXNvbkZ1bmNcIik7XG4gICAgdGFyZ2V0UG9zaXRpb24gPSAwO1xuICB9XG4gIHBhcmVudHMuZm9yRWFjaCgocGFyZW50KSA9PiB7XG4gICAgY29uc3QgcGFyZW50UG9zaXRpb24gPSBkaXIgPT09IFwiVEJcIiB8fCBkaXIgPT0gXCJCVFwiID8gY29tbWl0UG9zLmdldChwYXJlbnQpPy55IDogY29tbWl0UG9zLmdldChwYXJlbnQpPy54O1xuICAgIGlmIChwYXJlbnRQb3NpdGlvbiAhPT0gdm9pZCAwICYmIGNvbXBhcmlzb25GdW5jKHBhcmVudFBvc2l0aW9uLCB0YXJnZXRQb3NpdGlvbikpIHtcbiAgICAgIGNsb3Nlc3RQYXJlbnQgPSBwYXJlbnQ7XG4gICAgICB0YXJnZXRQb3NpdGlvbiA9IHBhcmVudFBvc2l0aW9uO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBjbG9zZXN0UGFyZW50O1xufSwgXCJmaW5kQ2xvc2VzdFBhcmVudFwiKTtcbnZhciBmaW5kQ2xvc2VzdFBhcmVudEJUID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgocGFyZW50cykgPT4ge1xuICBsZXQgY2xvc2VzdFBhcmVudCA9IFwiXCI7XG4gIGxldCBtYXhQb3NpdGlvbiA9IEluZmluaXR5O1xuICBwYXJlbnRzLmZvckVhY2goKHBhcmVudCkgPT4ge1xuICAgIGNvbnN0IHBhcmVudFBvc2l0aW9uID0gY29tbWl0UG9zLmdldChwYXJlbnQpLnk7XG4gICAgaWYgKHBhcmVudFBvc2l0aW9uIDw9IG1heFBvc2l0aW9uKSB7XG4gICAgICBjbG9zZXN0UGFyZW50ID0gcGFyZW50O1xuICAgICAgbWF4UG9zaXRpb24gPSBwYXJlbnRQb3NpdGlvbjtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gY2xvc2VzdFBhcmVudCB8fCB2b2lkIDA7XG59LCBcImZpbmRDbG9zZXN0UGFyZW50QlRcIik7XG52YXIgc2V0UGFyYWxsZWxCVFBvcyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHNvcnRlZEtleXMsIGNvbW1pdHMsIGRlZmF1bHRQb3MyKSA9PiB7XG4gIGxldCBjdXJQb3MgPSBkZWZhdWx0UG9zMjtcbiAgbGV0IG1heFBvc2l0aW9uID0gZGVmYXVsdFBvczI7XG4gIGNvbnN0IHJvb3RzID0gW107XG4gIHNvcnRlZEtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgY29uc3QgY29tbWl0MiA9IGNvbW1pdHMuZ2V0KGtleSk7XG4gICAgaWYgKCFjb21taXQyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbW1pdCBub3QgZm91bmQgZm9yIGtleSAke2tleX1gKTtcbiAgICB9XG4gICAgaWYgKGNvbW1pdDIucGFyZW50cy5sZW5ndGgpIHtcbiAgICAgIGN1clBvcyA9IGNhbGN1bGF0ZUNvbW1pdFBvc2l0aW9uKGNvbW1pdDIpO1xuICAgICAgbWF4UG9zaXRpb24gPSBNYXRoLm1heChjdXJQb3MsIG1heFBvc2l0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcm9vdHMucHVzaChjb21taXQyKTtcbiAgICB9XG4gICAgc2V0Q29tbWl0UG9zaXRpb24oY29tbWl0MiwgY3VyUG9zKTtcbiAgfSk7XG4gIGN1clBvcyA9IG1heFBvc2l0aW9uO1xuICByb290cy5mb3JFYWNoKChjb21taXQyKSA9PiB7XG4gICAgc2V0Um9vdFBvc2l0aW9uKGNvbW1pdDIsIGN1clBvcywgZGVmYXVsdFBvczIpO1xuICB9KTtcbiAgc29ydGVkS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBjb25zdCBjb21taXQyID0gY29tbWl0cy5nZXQoa2V5KTtcbiAgICBpZiAoY29tbWl0Mj8ucGFyZW50cy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGNsb3Nlc3RQYXJlbnQgPSBmaW5kQ2xvc2VzdFBhcmVudEJUKGNvbW1pdDIucGFyZW50cyk7XG4gICAgICBjdXJQb3MgPSBjb21taXRQb3MuZ2V0KGNsb3Nlc3RQYXJlbnQpLnkgLSBDT01NSVRfU1RFUDtcbiAgICAgIGlmIChjdXJQb3MgPD0gbWF4UG9zaXRpb24pIHtcbiAgICAgICAgbWF4UG9zaXRpb24gPSBjdXJQb3M7XG4gICAgICB9XG4gICAgICBjb25zdCB4ID0gYnJhbmNoUG9zLmdldChjb21taXQyLmJyYW5jaCkucG9zO1xuICAgICAgY29uc3QgeSA9IGN1clBvcyAtIExBWU9VVF9PRkZTRVQ7XG4gICAgICBjb21taXRQb3Muc2V0KGNvbW1pdDIuaWQsIHsgeCwgeSB9KTtcbiAgICB9XG4gIH0pO1xufSwgXCJzZXRQYXJhbGxlbEJUUG9zXCIpO1xudmFyIGZpbmRDbG9zZXN0UGFyZW50UG9zID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoY29tbWl0MikgPT4ge1xuICBjb25zdCBjbG9zZXN0UGFyZW50ID0gZmluZENsb3Nlc3RQYXJlbnQoY29tbWl0Mi5wYXJlbnRzLmZpbHRlcigocCkgPT4gcCAhPT0gbnVsbCkpO1xuICBpZiAoIWNsb3Nlc3RQYXJlbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENsb3Nlc3QgcGFyZW50IG5vdCBmb3VuZCBmb3IgY29tbWl0ICR7Y29tbWl0Mi5pZH1gKTtcbiAgfVxuICBjb25zdCBjbG9zZXN0UGFyZW50UG9zID0gY29tbWl0UG9zLmdldChjbG9zZXN0UGFyZW50KT8ueTtcbiAgaWYgKGNsb3Nlc3RQYXJlbnRQb3MgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2xvc2VzdCBwYXJlbnQgcG9zaXRpb24gbm90IGZvdW5kIGZvciBjb21taXQgJHtjb21taXQyLmlkfWApO1xuICB9XG4gIHJldHVybiBjbG9zZXN0UGFyZW50UG9zO1xufSwgXCJmaW5kQ2xvc2VzdFBhcmVudFBvc1wiKTtcbnZhciBjYWxjdWxhdGVDb21taXRQb3NpdGlvbiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGNvbW1pdDIpID0+IHtcbiAgY29uc3QgY2xvc2VzdFBhcmVudFBvcyA9IGZpbmRDbG9zZXN0UGFyZW50UG9zKGNvbW1pdDIpO1xuICByZXR1cm4gY2xvc2VzdFBhcmVudFBvcyArIENPTU1JVF9TVEVQO1xufSwgXCJjYWxjdWxhdGVDb21taXRQb3NpdGlvblwiKTtcbnZhciBzZXRDb21taXRQb3NpdGlvbiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGNvbW1pdDIsIGN1clBvcykgPT4ge1xuICBjb25zdCBicmFuY2gyID0gYnJhbmNoUG9zLmdldChjb21taXQyLmJyYW5jaCk7XG4gIGlmICghYnJhbmNoMikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQnJhbmNoIG5vdCBmb3VuZCBmb3IgY29tbWl0ICR7Y29tbWl0Mi5pZH1gKTtcbiAgfVxuICBjb25zdCB4ID0gYnJhbmNoMi5wb3M7XG4gIGNvbnN0IHkgPSBjdXJQb3MgKyBMQVlPVVRfT0ZGU0VUO1xuICBjb21taXRQb3Muc2V0KGNvbW1pdDIuaWQsIHsgeCwgeSB9KTtcbiAgcmV0dXJuIHsgeCwgeSB9O1xufSwgXCJzZXRDb21taXRQb3NpdGlvblwiKTtcbnZhciBzZXRSb290UG9zaXRpb24gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChjb21taXQyLCBjdXJQb3MsIGRlZmF1bHRQb3MyKSA9PiB7XG4gIGNvbnN0IGJyYW5jaDIgPSBicmFuY2hQb3MuZ2V0KGNvbW1pdDIuYnJhbmNoKTtcbiAgaWYgKCFicmFuY2gyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBCcmFuY2ggbm90IGZvdW5kIGZvciBjb21taXQgJHtjb21taXQyLmlkfWApO1xuICB9XG4gIGNvbnN0IHkgPSBjdXJQb3MgKyBkZWZhdWx0UG9zMjtcbiAgY29uc3QgeCA9IGJyYW5jaDIucG9zO1xuICBjb21taXRQb3Muc2V0KGNvbW1pdDIuaWQsIHsgeCwgeSB9KTtcbn0sIFwic2V0Um9vdFBvc2l0aW9uXCIpO1xudmFyIGRyYXdDb21taXRCdWxsZXQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChnQnVsbGV0cywgY29tbWl0MiwgY29tbWl0UG9zaXRpb24sIHR5cGVDbGFzcywgYnJhbmNoSW5kZXgsIGNvbW1pdFN5bWJvbFR5cGUpID0+IHtcbiAgaWYgKGNvbW1pdFN5bWJvbFR5cGUgPT09IGNvbW1pdFR5cGUuSElHSExJR0hUKSB7XG4gICAgZ0J1bGxldHMuYXBwZW5kKFwicmVjdFwiKS5hdHRyKFwieFwiLCBjb21taXRQb3NpdGlvbi54IC0gMTApLmF0dHIoXCJ5XCIsIGNvbW1pdFBvc2l0aW9uLnkgLSAxMCkuYXR0cihcIndpZHRoXCIsIDIwKS5hdHRyKFwiaGVpZ2h0XCIsIDIwKS5hdHRyKFxuICAgICAgXCJjbGFzc1wiLFxuICAgICAgYGNvbW1pdCAke2NvbW1pdDIuaWR9IGNvbW1pdC1oaWdobGlnaHQke2JyYW5jaEluZGV4ICUgVEhFTUVfQ09MT1JfTElNSVR9ICR7dHlwZUNsYXNzfS1vdXRlcmBcbiAgICApO1xuICAgIGdCdWxsZXRzLmFwcGVuZChcInJlY3RcIikuYXR0cihcInhcIiwgY29tbWl0UG9zaXRpb24ueCAtIDYpLmF0dHIoXCJ5XCIsIGNvbW1pdFBvc2l0aW9uLnkgLSA2KS5hdHRyKFwid2lkdGhcIiwgMTIpLmF0dHIoXCJoZWlnaHRcIiwgMTIpLmF0dHIoXG4gICAgICBcImNsYXNzXCIsXG4gICAgICBgY29tbWl0ICR7Y29tbWl0Mi5pZH0gY29tbWl0JHticmFuY2hJbmRleCAlIFRIRU1FX0NPTE9SX0xJTUlUfSAke3R5cGVDbGFzc30taW5uZXJgXG4gICAgKTtcbiAgfSBlbHNlIGlmIChjb21taXRTeW1ib2xUeXBlID09PSBjb21taXRUeXBlLkNIRVJSWV9QSUNLKSB7XG4gICAgZ0J1bGxldHMuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJjeFwiLCBjb21taXRQb3NpdGlvbi54KS5hdHRyKFwiY3lcIiwgY29tbWl0UG9zaXRpb24ueSkuYXR0cihcInJcIiwgMTApLmF0dHIoXCJjbGFzc1wiLCBgY29tbWl0ICR7Y29tbWl0Mi5pZH0gJHt0eXBlQ2xhc3N9YCk7XG4gICAgZ0J1bGxldHMuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJjeFwiLCBjb21taXRQb3NpdGlvbi54IC0gMykuYXR0cihcImN5XCIsIGNvbW1pdFBvc2l0aW9uLnkgKyAyKS5hdHRyKFwiclwiLCAyLjc1KS5hdHRyKFwiZmlsbFwiLCBcIiNmZmZcIikuYXR0cihcImNsYXNzXCIsIGBjb21taXQgJHtjb21taXQyLmlkfSAke3R5cGVDbGFzc31gKTtcbiAgICBnQnVsbGV0cy5hcHBlbmQoXCJjaXJjbGVcIikuYXR0cihcImN4XCIsIGNvbW1pdFBvc2l0aW9uLnggKyAzKS5hdHRyKFwiY3lcIiwgY29tbWl0UG9zaXRpb24ueSArIDIpLmF0dHIoXCJyXCIsIDIuNzUpLmF0dHIoXCJmaWxsXCIsIFwiI2ZmZlwiKS5hdHRyKFwiY2xhc3NcIiwgYGNvbW1pdCAke2NvbW1pdDIuaWR9ICR7dHlwZUNsYXNzfWApO1xuICAgIGdCdWxsZXRzLmFwcGVuZChcImxpbmVcIikuYXR0cihcIngxXCIsIGNvbW1pdFBvc2l0aW9uLnggKyAzKS5hdHRyKFwieTFcIiwgY29tbWl0UG9zaXRpb24ueSArIDEpLmF0dHIoXCJ4MlwiLCBjb21taXRQb3NpdGlvbi54KS5hdHRyKFwieTJcIiwgY29tbWl0UG9zaXRpb24ueSAtIDUpLmF0dHIoXCJzdHJva2VcIiwgXCIjZmZmXCIpLmF0dHIoXCJjbGFzc1wiLCBgY29tbWl0ICR7Y29tbWl0Mi5pZH0gJHt0eXBlQ2xhc3N9YCk7XG4gICAgZ0J1bGxldHMuYXBwZW5kKFwibGluZVwiKS5hdHRyKFwieDFcIiwgY29tbWl0UG9zaXRpb24ueCAtIDMpLmF0dHIoXCJ5MVwiLCBjb21taXRQb3NpdGlvbi55ICsgMSkuYXR0cihcIngyXCIsIGNvbW1pdFBvc2l0aW9uLngpLmF0dHIoXCJ5MlwiLCBjb21taXRQb3NpdGlvbi55IC0gNSkuYXR0cihcInN0cm9rZVwiLCBcIiNmZmZcIikuYXR0cihcImNsYXNzXCIsIGBjb21taXQgJHtjb21taXQyLmlkfSAke3R5cGVDbGFzc31gKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBjaXJjbGUgPSBnQnVsbGV0cy5hcHBlbmQoXCJjaXJjbGVcIik7XG4gICAgY2lyY2xlLmF0dHIoXCJjeFwiLCBjb21taXRQb3NpdGlvbi54KTtcbiAgICBjaXJjbGUuYXR0cihcImN5XCIsIGNvbW1pdFBvc2l0aW9uLnkpO1xuICAgIGNpcmNsZS5hdHRyKFwiclwiLCBjb21taXQyLnR5cGUgPT09IGNvbW1pdFR5cGUuTUVSR0UgPyA5IDogMTApO1xuICAgIGNpcmNsZS5hdHRyKFwiY2xhc3NcIiwgYGNvbW1pdCAke2NvbW1pdDIuaWR9IGNvbW1pdCR7YnJhbmNoSW5kZXggJSBUSEVNRV9DT0xPUl9MSU1JVH1gKTtcbiAgICBpZiAoY29tbWl0U3ltYm9sVHlwZSA9PT0gY29tbWl0VHlwZS5NRVJHRSkge1xuICAgICAgY29uc3QgY2lyY2xlMiA9IGdCdWxsZXRzLmFwcGVuZChcImNpcmNsZVwiKTtcbiAgICAgIGNpcmNsZTIuYXR0cihcImN4XCIsIGNvbW1pdFBvc2l0aW9uLngpO1xuICAgICAgY2lyY2xlMi5hdHRyKFwiY3lcIiwgY29tbWl0UG9zaXRpb24ueSk7XG4gICAgICBjaXJjbGUyLmF0dHIoXCJyXCIsIDYpO1xuICAgICAgY2lyY2xlMi5hdHRyKFxuICAgICAgICBcImNsYXNzXCIsXG4gICAgICAgIGBjb21taXQgJHt0eXBlQ2xhc3N9ICR7Y29tbWl0Mi5pZH0gY29tbWl0JHticmFuY2hJbmRleCAlIFRIRU1FX0NPTE9SX0xJTUlUfWBcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChjb21taXRTeW1ib2xUeXBlID09PSBjb21taXRUeXBlLlJFVkVSU0UpIHtcbiAgICAgIGNvbnN0IGNyb3NzID0gZ0J1bGxldHMuYXBwZW5kKFwicGF0aFwiKTtcbiAgICAgIGNyb3NzLmF0dHIoXG4gICAgICAgIFwiZFwiLFxuICAgICAgICBgTSAke2NvbW1pdFBvc2l0aW9uLnggLSA1fSwke2NvbW1pdFBvc2l0aW9uLnkgLSA1fUwke2NvbW1pdFBvc2l0aW9uLnggKyA1fSwke2NvbW1pdFBvc2l0aW9uLnkgKyA1fU0ke2NvbW1pdFBvc2l0aW9uLnggLSA1fSwke2NvbW1pdFBvc2l0aW9uLnkgKyA1fUwke2NvbW1pdFBvc2l0aW9uLnggKyA1fSwke2NvbW1pdFBvc2l0aW9uLnkgLSA1fWBcbiAgICAgICkuYXR0cihcImNsYXNzXCIsIGBjb21taXQgJHt0eXBlQ2xhc3N9ICR7Y29tbWl0Mi5pZH0gY29tbWl0JHticmFuY2hJbmRleCAlIFRIRU1FX0NPTE9SX0xJTUlUfWApO1xuICAgIH1cbiAgfVxufSwgXCJkcmF3Q29tbWl0QnVsbGV0XCIpO1xudmFyIGRyYXdDb21taXRMYWJlbCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGdMYWJlbHMsIGNvbW1pdDIsIGNvbW1pdFBvc2l0aW9uLCBwb3MpID0+IHtcbiAgaWYgKGNvbW1pdDIudHlwZSAhPT0gY29tbWl0VHlwZS5DSEVSUllfUElDSyAmJiAoY29tbWl0Mi5jdXN0b21JZCAmJiBjb21taXQyLnR5cGUgPT09IGNvbW1pdFR5cGUuTUVSR0UgfHwgY29tbWl0Mi50eXBlICE9PSBjb21taXRUeXBlLk1FUkdFKSAmJiBERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzI/LnNob3dDb21taXRMYWJlbCkge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBnTGFiZWxzLmFwcGVuZChcImdcIik7XG4gICAgY29uc3QgbGFiZWxCa2cgPSB3cmFwcGVyLmluc2VydChcInJlY3RcIikuYXR0cihcImNsYXNzXCIsIFwiY29tbWl0LWxhYmVsLWJrZ1wiKTtcbiAgICBjb25zdCB0ZXh0ID0gd3JhcHBlci5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ4XCIsIHBvcykuYXR0cihcInlcIiwgY29tbWl0UG9zaXRpb24ueSArIDI1KS5hdHRyKFwiY2xhc3NcIiwgXCJjb21taXQtbGFiZWxcIikudGV4dChjb21taXQyLmlkKTtcbiAgICBjb25zdCBiYm94ID0gdGV4dC5ub2RlKCk/LmdldEJCb3goKTtcbiAgICBpZiAoYmJveCkge1xuICAgICAgbGFiZWxCa2cuYXR0cihcInhcIiwgY29tbWl0UG9zaXRpb24ucG9zV2l0aE9mZnNldCAtIGJib3gud2lkdGggLyAyIC0gUFkpLmF0dHIoXCJ5XCIsIGNvbW1pdFBvc2l0aW9uLnkgKyAxMy41KS5hdHRyKFwid2lkdGhcIiwgYmJveC53aWR0aCArIDIgKiBQWSkuYXR0cihcImhlaWdodFwiLCBiYm94LmhlaWdodCArIDIgKiBQWSk7XG4gICAgICBpZiAoZGlyID09PSBcIlRCXCIgfHwgZGlyID09PSBcIkJUXCIpIHtcbiAgICAgICAgbGFiZWxCa2cuYXR0cihcInhcIiwgY29tbWl0UG9zaXRpb24ueCAtIChiYm94LndpZHRoICsgNCAqIFBYICsgNSkpLmF0dHIoXCJ5XCIsIGNvbW1pdFBvc2l0aW9uLnkgLSAxMik7XG4gICAgICAgIHRleHQuYXR0cihcInhcIiwgY29tbWl0UG9zaXRpb24ueCAtIChiYm94LndpZHRoICsgNCAqIFBYKSkuYXR0cihcInlcIiwgY29tbWl0UG9zaXRpb24ueSArIGJib3guaGVpZ2h0IC0gMTIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGV4dC5hdHRyKFwieFwiLCBjb21taXRQb3NpdGlvbi5wb3NXaXRoT2Zmc2V0IC0gYmJveC53aWR0aCAvIDIpO1xuICAgICAgfVxuICAgICAgaWYgKERFRkFVTFRfR0lUR1JBUEhfQ09ORklHMi5yb3RhdGVDb21taXRMYWJlbCkge1xuICAgICAgICBpZiAoZGlyID09PSBcIlRCXCIgfHwgZGlyID09PSBcIkJUXCIpIHtcbiAgICAgICAgICB0ZXh0LmF0dHIoXG4gICAgICAgICAgICBcInRyYW5zZm9ybVwiLFxuICAgICAgICAgICAgXCJyb3RhdGUoLTQ1LCBcIiArIGNvbW1pdFBvc2l0aW9uLnggKyBcIiwgXCIgKyBjb21taXRQb3NpdGlvbi55ICsgXCIpXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIGxhYmVsQmtnLmF0dHIoXG4gICAgICAgICAgICBcInRyYW5zZm9ybVwiLFxuICAgICAgICAgICAgXCJyb3RhdGUoLTQ1LCBcIiArIGNvbW1pdFBvc2l0aW9uLnggKyBcIiwgXCIgKyBjb21taXRQb3NpdGlvbi55ICsgXCIpXCJcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHJfeCA9IC03LjUgLSAoYmJveC53aWR0aCArIDEwKSAvIDI1ICogOS41O1xuICAgICAgICAgIGNvbnN0IHJfeSA9IDEwICsgYmJveC53aWR0aCAvIDI1ICogOC41O1xuICAgICAgICAgIHdyYXBwZXIuYXR0cihcbiAgICAgICAgICAgIFwidHJhbnNmb3JtXCIsXG4gICAgICAgICAgICBcInRyYW5zbGF0ZShcIiArIHJfeCArIFwiLCBcIiArIHJfeSArIFwiKSByb3RhdGUoLTQ1LCBcIiArIHBvcyArIFwiLCBcIiArIGNvbW1pdFBvc2l0aW9uLnkgKyBcIilcIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn0sIFwiZHJhd0NvbW1pdExhYmVsXCIpO1xudmFyIGRyYXdDb21taXRUYWdzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoZ0xhYmVscywgY29tbWl0MiwgY29tbWl0UG9zaXRpb24sIHBvcykgPT4ge1xuICBpZiAoY29tbWl0Mi50YWdzLmxlbmd0aCA+IDApIHtcbiAgICBsZXQgeU9mZnNldCA9IDA7XG4gICAgbGV0IG1heFRhZ0Jib3hXaWR0aCA9IDA7XG4gICAgbGV0IG1heFRhZ0Jib3hIZWlnaHQgPSAwO1xuICAgIGNvbnN0IHRhZ0VsZW1lbnRzID0gW107XG4gICAgZm9yIChjb25zdCB0YWdWYWx1ZSBvZiBjb21taXQyLnRhZ3MucmV2ZXJzZSgpKSB7XG4gICAgICBjb25zdCByZWN0ID0gZ0xhYmVscy5pbnNlcnQoXCJwb2x5Z29uXCIpO1xuICAgICAgY29uc3QgaG9sZSA9IGdMYWJlbHMuYXBwZW5kKFwiY2lyY2xlXCIpO1xuICAgICAgY29uc3QgdGFnID0gZ0xhYmVscy5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ5XCIsIGNvbW1pdFBvc2l0aW9uLnkgLSAxNiAtIHlPZmZzZXQpLmF0dHIoXCJjbGFzc1wiLCBcInRhZy1sYWJlbFwiKS50ZXh0KHRhZ1ZhbHVlKTtcbiAgICAgIGNvbnN0IHRhZ0Jib3ggPSB0YWcubm9kZSgpPy5nZXRCQm94KCk7XG4gICAgICBpZiAoIXRhZ0Jib3gpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGFnIGJib3ggbm90IGZvdW5kXCIpO1xuICAgICAgfVxuICAgICAgbWF4VGFnQmJveFdpZHRoID0gTWF0aC5tYXgobWF4VGFnQmJveFdpZHRoLCB0YWdCYm94LndpZHRoKTtcbiAgICAgIG1heFRhZ0Jib3hIZWlnaHQgPSBNYXRoLm1heChtYXhUYWdCYm94SGVpZ2h0LCB0YWdCYm94LmhlaWdodCk7XG4gICAgICB0YWcuYXR0cihcInhcIiwgY29tbWl0UG9zaXRpb24ucG9zV2l0aE9mZnNldCAtIHRhZ0Jib3gud2lkdGggLyAyKTtcbiAgICAgIHRhZ0VsZW1lbnRzLnB1c2goe1xuICAgICAgICB0YWcsXG4gICAgICAgIGhvbGUsXG4gICAgICAgIHJlY3QsXG4gICAgICAgIHlPZmZzZXRcbiAgICAgIH0pO1xuICAgICAgeU9mZnNldCArPSAyMDtcbiAgICB9XG4gICAgZm9yIChjb25zdCB7IHRhZywgaG9sZSwgcmVjdCwgeU9mZnNldDogeU9mZnNldDIgfSBvZiB0YWdFbGVtZW50cykge1xuICAgICAgY29uc3QgaDIgPSBtYXhUYWdCYm94SGVpZ2h0IC8gMjtcbiAgICAgIGNvbnN0IGx5ID0gY29tbWl0UG9zaXRpb24ueSAtIDE5LjIgLSB5T2Zmc2V0MjtcbiAgICAgIHJlY3QuYXR0cihcImNsYXNzXCIsIFwidGFnLWxhYmVsLWJrZ1wiKS5hdHRyKFxuICAgICAgICBcInBvaW50c1wiLFxuICAgICAgICBgXG4gICAgICAke3BvcyAtIG1heFRhZ0Jib3hXaWR0aCAvIDIgLSBQWCAvIDJ9LCR7bHkgKyBQWX0gIFxuICAgICAgJHtwb3MgLSBtYXhUYWdCYm94V2lkdGggLyAyIC0gUFggLyAyfSwke2x5IC0gUFl9XG4gICAgICAke2NvbW1pdFBvc2l0aW9uLnBvc1dpdGhPZmZzZXQgLSBtYXhUYWdCYm94V2lkdGggLyAyIC0gUFh9LCR7bHkgLSBoMiAtIFBZfVxuICAgICAgJHtjb21taXRQb3NpdGlvbi5wb3NXaXRoT2Zmc2V0ICsgbWF4VGFnQmJveFdpZHRoIC8gMiArIFBYfSwke2x5IC0gaDIgLSBQWX1cbiAgICAgICR7Y29tbWl0UG9zaXRpb24ucG9zV2l0aE9mZnNldCArIG1heFRhZ0Jib3hXaWR0aCAvIDIgKyBQWH0sJHtseSArIGgyICsgUFl9XG4gICAgICAke2NvbW1pdFBvc2l0aW9uLnBvc1dpdGhPZmZzZXQgLSBtYXhUYWdCYm94V2lkdGggLyAyIC0gUFh9LCR7bHkgKyBoMiArIFBZfWBcbiAgICAgICk7XG4gICAgICBob2xlLmF0dHIoXCJjeVwiLCBseSkuYXR0cihcImN4XCIsIHBvcyAtIG1heFRhZ0Jib3hXaWR0aCAvIDIgKyBQWCAvIDIpLmF0dHIoXCJyXCIsIDEuNSkuYXR0cihcImNsYXNzXCIsIFwidGFnLWhvbGVcIik7XG4gICAgICBpZiAoZGlyID09PSBcIlRCXCIgfHwgZGlyID09PSBcIkJUXCIpIHtcbiAgICAgICAgY29uc3QgeU9yaWdpbiA9IHBvcyArIHlPZmZzZXQyO1xuICAgICAgICByZWN0LmF0dHIoXCJjbGFzc1wiLCBcInRhZy1sYWJlbC1ia2dcIikuYXR0cihcbiAgICAgICAgICBcInBvaW50c1wiLFxuICAgICAgICAgIGBcbiAgICAgICAgJHtjb21taXRQb3NpdGlvbi54fSwke3lPcmlnaW4gKyAyfVxuICAgICAgICAke2NvbW1pdFBvc2l0aW9uLnh9LCR7eU9yaWdpbiAtIDJ9XG4gICAgICAgICR7Y29tbWl0UG9zaXRpb24ueCArIExBWU9VVF9PRkZTRVR9LCR7eU9yaWdpbiAtIGgyIC0gMn1cbiAgICAgICAgJHtjb21taXRQb3NpdGlvbi54ICsgTEFZT1VUX09GRlNFVCArIG1heFRhZ0Jib3hXaWR0aCArIDR9LCR7eU9yaWdpbiAtIGgyIC0gMn1cbiAgICAgICAgJHtjb21taXRQb3NpdGlvbi54ICsgTEFZT1VUX09GRlNFVCArIG1heFRhZ0Jib3hXaWR0aCArIDR9LCR7eU9yaWdpbiArIGgyICsgMn1cbiAgICAgICAgJHtjb21taXRQb3NpdGlvbi54ICsgTEFZT1VUX09GRlNFVH0sJHt5T3JpZ2luICsgaDIgKyAyfWBcbiAgICAgICAgKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDEyLDEyKSByb3RhdGUoNDUsIFwiICsgY29tbWl0UG9zaXRpb24ueCArIFwiLFwiICsgcG9zICsgXCIpXCIpO1xuICAgICAgICBob2xlLmF0dHIoXCJjeFwiLCBjb21taXRQb3NpdGlvbi54ICsgUFggLyAyKS5hdHRyKFwiY3lcIiwgeU9yaWdpbikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgxMiwxMikgcm90YXRlKDQ1LCBcIiArIGNvbW1pdFBvc2l0aW9uLnggKyBcIixcIiArIHBvcyArIFwiKVwiKTtcbiAgICAgICAgdGFnLmF0dHIoXCJ4XCIsIGNvbW1pdFBvc2l0aW9uLnggKyA1KS5hdHRyKFwieVwiLCB5T3JpZ2luICsgMykuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgxNCwxNCkgcm90YXRlKDQ1LCBcIiArIGNvbW1pdFBvc2l0aW9uLnggKyBcIixcIiArIHBvcyArIFwiKVwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0sIFwiZHJhd0NvbW1pdFRhZ3NcIik7XG52YXIgZ2V0Q29tbWl0Q2xhc3NUeXBlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoY29tbWl0MikgPT4ge1xuICBjb25zdCBjb21taXRTeW1ib2xUeXBlID0gY29tbWl0Mi5jdXN0b21UeXBlID8/IGNvbW1pdDIudHlwZTtcbiAgc3dpdGNoIChjb21taXRTeW1ib2xUeXBlKSB7XG4gICAgY2FzZSBjb21taXRUeXBlLk5PUk1BTDpcbiAgICAgIHJldHVybiBcImNvbW1pdC1ub3JtYWxcIjtcbiAgICBjYXNlIGNvbW1pdFR5cGUuUkVWRVJTRTpcbiAgICAgIHJldHVybiBcImNvbW1pdC1yZXZlcnNlXCI7XG4gICAgY2FzZSBjb21taXRUeXBlLkhJR0hMSUdIVDpcbiAgICAgIHJldHVybiBcImNvbW1pdC1oaWdobGlnaHRcIjtcbiAgICBjYXNlIGNvbW1pdFR5cGUuTUVSR0U6XG4gICAgICByZXR1cm4gXCJjb21taXQtbWVyZ2VcIjtcbiAgICBjYXNlIGNvbW1pdFR5cGUuQ0hFUlJZX1BJQ0s6XG4gICAgICByZXR1cm4gXCJjb21taXQtY2hlcnJ5LXBpY2tcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwiY29tbWl0LW5vcm1hbFwiO1xuICB9XG59LCBcImdldENvbW1pdENsYXNzVHlwZVwiKTtcbnZhciBjYWxjdWxhdGVQb3NpdGlvbiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGNvbW1pdDIsIGRpcjIsIHBvcywgY29tbWl0UG9zMikgPT4ge1xuICBjb25zdCBkZWZhdWx0Q29tbWl0UG9zaXRpb24gPSB7IHg6IDAsIHk6IDAgfTtcbiAgaWYgKGNvbW1pdDIucGFyZW50cy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgY2xvc2VzdFBhcmVudCA9IGZpbmRDbG9zZXN0UGFyZW50KGNvbW1pdDIucGFyZW50cyk7XG4gICAgaWYgKGNsb3Nlc3RQYXJlbnQpIHtcbiAgICAgIGNvbnN0IHBhcmVudFBvc2l0aW9uID0gY29tbWl0UG9zMi5nZXQoY2xvc2VzdFBhcmVudCkgPz8gZGVmYXVsdENvbW1pdFBvc2l0aW9uO1xuICAgICAgaWYgKGRpcjIgPT09IFwiVEJcIikge1xuICAgICAgICByZXR1cm4gcGFyZW50UG9zaXRpb24ueSArIENPTU1JVF9TVEVQO1xuICAgICAgfSBlbHNlIGlmIChkaXIyID09PSBcIkJUXCIpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFBvc2l0aW9uID0gY29tbWl0UG9zMi5nZXQoY29tbWl0Mi5pZCkgPz8gZGVmYXVsdENvbW1pdFBvc2l0aW9uO1xuICAgICAgICByZXR1cm4gY3VycmVudFBvc2l0aW9uLnkgLSBDT01NSVRfU1RFUDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwYXJlbnRQb3NpdGlvbi54ICsgQ09NTUlUX1NURVA7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChkaXIyID09PSBcIlRCXCIpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0UG9zO1xuICAgIH0gZWxzZSBpZiAoZGlyMiA9PT0gXCJCVFwiKSB7XG4gICAgICBjb25zdCBjdXJyZW50UG9zaXRpb24gPSBjb21taXRQb3MyLmdldChjb21taXQyLmlkKSA/PyBkZWZhdWx0Q29tbWl0UG9zaXRpb247XG4gICAgICByZXR1cm4gY3VycmVudFBvc2l0aW9uLnkgLSBDT01NSVRfU1RFUDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG4gIHJldHVybiAwO1xufSwgXCJjYWxjdWxhdGVQb3NpdGlvblwiKTtcbnZhciBnZXRDb21taXRQb3NpdGlvbiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGNvbW1pdDIsIHBvcywgaXNQYXJhbGxlbENvbW1pdHMpID0+IHtcbiAgY29uc3QgcG9zV2l0aE9mZnNldCA9IGRpciA9PT0gXCJCVFwiICYmIGlzUGFyYWxsZWxDb21taXRzID8gcG9zIDogcG9zICsgTEFZT1VUX09GRlNFVDtcbiAgY29uc3QgeSA9IGRpciA9PT0gXCJUQlwiIHx8IGRpciA9PT0gXCJCVFwiID8gcG9zV2l0aE9mZnNldCA6IGJyYW5jaFBvcy5nZXQoY29tbWl0Mi5icmFuY2gpPy5wb3M7XG4gIGNvbnN0IHggPSBkaXIgPT09IFwiVEJcIiB8fCBkaXIgPT09IFwiQlRcIiA/IGJyYW5jaFBvcy5nZXQoY29tbWl0Mi5icmFuY2gpPy5wb3MgOiBwb3NXaXRoT2Zmc2V0O1xuICBpZiAoeCA9PT0gdm9pZCAwIHx8IHkgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgUG9zaXRpb24gd2VyZSB1bmRlZmluZWQgZm9yIGNvbW1pdCAke2NvbW1pdDIuaWR9YCk7XG4gIH1cbiAgcmV0dXJuIHsgeCwgeSwgcG9zV2l0aE9mZnNldCB9O1xufSwgXCJnZXRDb21taXRQb3NpdGlvblwiKTtcbnZhciBkcmF3Q29tbWl0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHN2ZywgY29tbWl0cywgbW9kaWZ5R3JhcGgpID0+IHtcbiAgaWYgKCFERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJHaXRHcmFwaCBjb25maWcgbm90IGZvdW5kXCIpO1xuICB9XG4gIGNvbnN0IGdCdWxsZXRzID0gc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwiY29tbWl0LWJ1bGxldHNcIik7XG4gIGNvbnN0IGdMYWJlbHMgPSBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJjb21taXQtbGFiZWxzXCIpO1xuICBsZXQgcG9zID0gZGlyID09PSBcIlRCXCIgfHwgZGlyID09PSBcIkJUXCIgPyBkZWZhdWx0UG9zIDogMDtcbiAgY29uc3Qga2V5cyA9IFsuLi5jb21taXRzLmtleXMoKV07XG4gIGNvbnN0IGlzUGFyYWxsZWxDb21taXRzID0gREVGQVVMVF9HSVRHUkFQSF9DT05GSUcyPy5wYXJhbGxlbENvbW1pdHMgPz8gZmFsc2U7XG4gIGNvbnN0IHNvcnRLZXlzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoYSwgYikgPT4ge1xuICAgIGNvbnN0IHNlcUEgPSBjb21taXRzLmdldChhKT8uc2VxO1xuICAgIGNvbnN0IHNlcUIgPSBjb21taXRzLmdldChiKT8uc2VxO1xuICAgIHJldHVybiBzZXFBICE9PSB2b2lkIDAgJiYgc2VxQiAhPT0gdm9pZCAwID8gc2VxQSAtIHNlcUIgOiAwO1xuICB9LCBcInNvcnRLZXlzXCIpO1xuICBsZXQgc29ydGVkS2V5cyA9IGtleXMuc29ydChzb3J0S2V5cyk7XG4gIGlmIChkaXIgPT09IFwiQlRcIikge1xuICAgIGlmIChpc1BhcmFsbGVsQ29tbWl0cykge1xuICAgICAgc2V0UGFyYWxsZWxCVFBvcyhzb3J0ZWRLZXlzLCBjb21taXRzLCBwb3MpO1xuICAgIH1cbiAgICBzb3J0ZWRLZXlzID0gc29ydGVkS2V5cy5yZXZlcnNlKCk7XG4gIH1cbiAgc29ydGVkS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBjb25zdCBjb21taXQyID0gY29tbWl0cy5nZXQoa2V5KTtcbiAgICBpZiAoIWNvbW1pdDIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tbWl0IG5vdCBmb3VuZCBmb3Iga2V5ICR7a2V5fWApO1xuICAgIH1cbiAgICBpZiAoaXNQYXJhbGxlbENvbW1pdHMpIHtcbiAgICAgIHBvcyA9IGNhbGN1bGF0ZVBvc2l0aW9uKGNvbW1pdDIsIGRpciwgcG9zLCBjb21taXRQb3MpO1xuICAgIH1cbiAgICBjb25zdCBjb21taXRQb3NpdGlvbiA9IGdldENvbW1pdFBvc2l0aW9uKGNvbW1pdDIsIHBvcywgaXNQYXJhbGxlbENvbW1pdHMpO1xuICAgIGlmIChtb2RpZnlHcmFwaCkge1xuICAgICAgY29uc3QgdHlwZUNsYXNzID0gZ2V0Q29tbWl0Q2xhc3NUeXBlKGNvbW1pdDIpO1xuICAgICAgY29uc3QgY29tbWl0U3ltYm9sVHlwZSA9IGNvbW1pdDIuY3VzdG9tVHlwZSA/PyBjb21taXQyLnR5cGU7XG4gICAgICBjb25zdCBicmFuY2hJbmRleCA9IGJyYW5jaFBvcy5nZXQoY29tbWl0Mi5icmFuY2gpPy5pbmRleCA/PyAwO1xuICAgICAgZHJhd0NvbW1pdEJ1bGxldChnQnVsbGV0cywgY29tbWl0MiwgY29tbWl0UG9zaXRpb24sIHR5cGVDbGFzcywgYnJhbmNoSW5kZXgsIGNvbW1pdFN5bWJvbFR5cGUpO1xuICAgICAgZHJhd0NvbW1pdExhYmVsKGdMYWJlbHMsIGNvbW1pdDIsIGNvbW1pdFBvc2l0aW9uLCBwb3MpO1xuICAgICAgZHJhd0NvbW1pdFRhZ3MoZ0xhYmVscywgY29tbWl0MiwgY29tbWl0UG9zaXRpb24sIHBvcyk7XG4gICAgfVxuICAgIGlmIChkaXIgPT09IFwiVEJcIiB8fCBkaXIgPT09IFwiQlRcIikge1xuICAgICAgY29tbWl0UG9zLnNldChjb21taXQyLmlkLCB7IHg6IGNvbW1pdFBvc2l0aW9uLngsIHk6IGNvbW1pdFBvc2l0aW9uLnBvc1dpdGhPZmZzZXQgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbW1pdFBvcy5zZXQoY29tbWl0Mi5pZCwgeyB4OiBjb21taXRQb3NpdGlvbi5wb3NXaXRoT2Zmc2V0LCB5OiBjb21taXRQb3NpdGlvbi55IH0pO1xuICAgIH1cbiAgICBwb3MgPSBkaXIgPT09IFwiQlRcIiAmJiBpc1BhcmFsbGVsQ29tbWl0cyA/IHBvcyArIENPTU1JVF9TVEVQIDogcG9zICsgQ09NTUlUX1NURVAgKyBMQVlPVVRfT0ZGU0VUO1xuICAgIGlmIChwb3MgPiBtYXhQb3MpIHtcbiAgICAgIG1heFBvcyA9IHBvcztcbiAgICB9XG4gIH0pO1xufSwgXCJkcmF3Q29tbWl0c1wiKTtcbnZhciBzaG91bGRSZXJvdXRlQXJyb3cgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChjb21taXRBLCBjb21taXRCLCBwMSwgcDIsIGFsbENvbW1pdHMpID0+IHtcbiAgY29uc3QgY29tbWl0QklzRnVydGhlc3QgPSBkaXIgPT09IFwiVEJcIiB8fCBkaXIgPT09IFwiQlRcIiA/IHAxLnggPCBwMi54IDogcDEueSA8IHAyLnk7XG4gIGNvbnN0IGJyYW5jaFRvR2V0Q3VydmUgPSBjb21taXRCSXNGdXJ0aGVzdCA/IGNvbW1pdEIuYnJhbmNoIDogY29tbWl0QS5icmFuY2g7XG4gIGNvbnN0IGlzT25CcmFuY2hUb0dldEN1cnZlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoeCkgPT4geC5icmFuY2ggPT09IGJyYW5jaFRvR2V0Q3VydmUsIFwiaXNPbkJyYW5jaFRvR2V0Q3VydmVcIik7XG4gIGNvbnN0IGlzQmV0d2VlbkNvbW1pdHMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCh4KSA9PiB4LnNlcSA+IGNvbW1pdEEuc2VxICYmIHguc2VxIDwgY29tbWl0Qi5zZXEsIFwiaXNCZXR3ZWVuQ29tbWl0c1wiKTtcbiAgcmV0dXJuIFsuLi5hbGxDb21taXRzLnZhbHVlcygpXS5zb21lKChjb21taXRYKSA9PiB7XG4gICAgcmV0dXJuIGlzQmV0d2VlbkNvbW1pdHMoY29tbWl0WCkgJiYgaXNPbkJyYW5jaFRvR2V0Q3VydmUoY29tbWl0WCk7XG4gIH0pO1xufSwgXCJzaG91bGRSZXJvdXRlQXJyb3dcIik7XG52YXIgZmluZExhbmUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCh5MSwgeTIsIGRlcHRoID0gMCkgPT4ge1xuICBjb25zdCBjYW5kaWRhdGUgPSB5MSArIE1hdGguYWJzKHkxIC0geTIpIC8gMjtcbiAgaWYgKGRlcHRoID4gNSkge1xuICAgIHJldHVybiBjYW5kaWRhdGU7XG4gIH1cbiAgY29uc3Qgb2sgPSBsYW5lcy5ldmVyeSgobGFuZSkgPT4gTWF0aC5hYnMobGFuZSAtIGNhbmRpZGF0ZSkgPj0gMTApO1xuICBpZiAob2spIHtcbiAgICBsYW5lcy5wdXNoKGNhbmRpZGF0ZSk7XG4gICAgcmV0dXJuIGNhbmRpZGF0ZTtcbiAgfVxuICBjb25zdCBkaWZmID0gTWF0aC5hYnMoeTEgLSB5Mik7XG4gIHJldHVybiBmaW5kTGFuZSh5MSwgeTIgLSBkaWZmIC8gNSwgZGVwdGggKyAxKTtcbn0sIFwiZmluZExhbmVcIik7XG52YXIgZHJhd0Fycm93ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc3ZnLCBjb21taXRBLCBjb21taXRCLCBhbGxDb21taXRzKSA9PiB7XG4gIGNvbnN0IHAxID0gY29tbWl0UG9zLmdldChjb21taXRBLmlkKTtcbiAgY29uc3QgcDIgPSBjb21taXRQb3MuZ2V0KGNvbW1pdEIuaWQpO1xuICBpZiAocDEgPT09IHZvaWQgMCB8fCBwMiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb21taXQgcG9zaXRpb25zIG5vdCBmb3VuZCBmb3IgY29tbWl0cyAke2NvbW1pdEEuaWR9IGFuZCAke2NvbW1pdEIuaWR9YCk7XG4gIH1cbiAgY29uc3QgYXJyb3dOZWVkc1Jlcm91dGluZyA9IHNob3VsZFJlcm91dGVBcnJvdyhjb21taXRBLCBjb21taXRCLCBwMSwgcDIsIGFsbENvbW1pdHMpO1xuICBsZXQgYXJjID0gXCJcIjtcbiAgbGV0IGFyYzIgPSBcIlwiO1xuICBsZXQgcmFkaXVzID0gMDtcbiAgbGV0IG9mZnNldCA9IDA7XG4gIGxldCBjb2xvckNsYXNzTnVtID0gYnJhbmNoUG9zLmdldChjb21taXRCLmJyYW5jaCk/LmluZGV4O1xuICBpZiAoY29tbWl0Qi50eXBlID09PSBjb21taXRUeXBlLk1FUkdFICYmIGNvbW1pdEEuaWQgIT09IGNvbW1pdEIucGFyZW50c1swXSkge1xuICAgIGNvbG9yQ2xhc3NOdW0gPSBicmFuY2hQb3MuZ2V0KGNvbW1pdEEuYnJhbmNoKT8uaW5kZXg7XG4gIH1cbiAgbGV0IGxpbmVEZWY7XG4gIGlmIChhcnJvd05lZWRzUmVyb3V0aW5nKSB7XG4gICAgYXJjID0gXCJBIDEwIDEwLCAwLCAwLCAwLFwiO1xuICAgIGFyYzIgPSBcIkEgMTAgMTAsIDAsIDAsIDEsXCI7XG4gICAgcmFkaXVzID0gMTA7XG4gICAgb2Zmc2V0ID0gMTA7XG4gICAgY29uc3QgbGluZVkgPSBwMS55IDwgcDIueSA/IGZpbmRMYW5lKHAxLnksIHAyLnkpIDogZmluZExhbmUocDIueSwgcDEueSk7XG4gICAgY29uc3QgbGluZVggPSBwMS54IDwgcDIueCA/IGZpbmRMYW5lKHAxLngsIHAyLngpIDogZmluZExhbmUocDIueCwgcDEueCk7XG4gICAgaWYgKGRpciA9PT0gXCJUQlwiKSB7XG4gICAgICBpZiAocDEueCA8IHAyLngpIHtcbiAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7bGluZVggLSByYWRpdXN9ICR7cDEueX0gJHthcmMyfSAke2xpbmVYfSAke3AxLnkgKyBvZmZzZXR9IEwgJHtsaW5lWH0gJHtwMi55IC0gcmFkaXVzfSAke2FyY30gJHtsaW5lWCArIG9mZnNldH0gJHtwMi55fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb2xvckNsYXNzTnVtID0gYnJhbmNoUG9zLmdldChjb21taXRBLmJyYW5jaCk/LmluZGV4O1xuICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtsaW5lWCArIHJhZGl1c30gJHtwMS55fSAke2FyY30gJHtsaW5lWH0gJHtwMS55ICsgb2Zmc2V0fSBMICR7bGluZVh9ICR7cDIueSAtIHJhZGl1c30gJHthcmMyfSAke2xpbmVYIC0gb2Zmc2V0fSAke3AyLnl9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRpciA9PT0gXCJCVFwiKSB7XG4gICAgICBpZiAocDEueCA8IHAyLngpIHtcbiAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7bGluZVggLSByYWRpdXN9ICR7cDEueX0gJHthcmN9ICR7bGluZVh9ICR7cDEueSAtIG9mZnNldH0gTCAke2xpbmVYfSAke3AyLnkgKyByYWRpdXN9ICR7YXJjMn0gJHtsaW5lWCArIG9mZnNldH0gJHtwMi55fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb2xvckNsYXNzTnVtID0gYnJhbmNoUG9zLmdldChjb21taXRBLmJyYW5jaCk/LmluZGV4O1xuICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtsaW5lWCArIHJhZGl1c30gJHtwMS55fSAke2FyYzJ9ICR7bGluZVh9ICR7cDEueSAtIG9mZnNldH0gTCAke2xpbmVYfSAke3AyLnkgKyByYWRpdXN9ICR7YXJjfSAke2xpbmVYIC0gb2Zmc2V0fSAke3AyLnl9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHAxLnkgPCBwMi55KSB7XG4gICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AxLnh9ICR7bGluZVkgLSByYWRpdXN9ICR7YXJjfSAke3AxLnggKyBvZmZzZXR9ICR7bGluZVl9IEwgJHtwMi54IC0gcmFkaXVzfSAke2xpbmVZfSAke2FyYzJ9ICR7cDIueH0gJHtsaW5lWSArIG9mZnNldH0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29sb3JDbGFzc051bSA9IGJyYW5jaFBvcy5nZXQoY29tbWl0QS5icmFuY2gpPy5pbmRleDtcbiAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7cDEueH0gJHtsaW5lWSArIHJhZGl1c30gJHthcmMyfSAke3AxLnggKyBvZmZzZXR9ICR7bGluZVl9IEwgJHtwMi54IC0gcmFkaXVzfSAke2xpbmVZfSAke2FyY30gJHtwMi54fSAke2xpbmVZIC0gb2Zmc2V0fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGFyYyA9IFwiQSAyMCAyMCwgMCwgMCwgMCxcIjtcbiAgICBhcmMyID0gXCJBIDIwIDIwLCAwLCAwLCAxLFwiO1xuICAgIHJhZGl1cyA9IDIwO1xuICAgIG9mZnNldCA9IDIwO1xuICAgIGlmIChkaXIgPT09IFwiVEJcIikge1xuICAgICAgaWYgKHAxLnggPCBwMi54KSB7XG4gICAgICAgIGlmIChjb21taXRCLnR5cGUgPT09IGNvbW1pdFR5cGUuTUVSR0UgJiYgY29tbWl0QS5pZCAhPT0gY29tbWl0Qi5wYXJlbnRzWzBdKSB7XG4gICAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7cDEueH0gJHtwMi55IC0gcmFkaXVzfSAke2FyY30gJHtwMS54ICsgb2Zmc2V0fSAke3AyLnl9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtwMi54IC0gcmFkaXVzfSAke3AxLnl9ICR7YXJjMn0gJHtwMi54fSAke3AxLnkgKyBvZmZzZXR9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHAxLnggPiBwMi54KSB7XG4gICAgICAgIGFyYyA9IFwiQSAyMCAyMCwgMCwgMCwgMCxcIjtcbiAgICAgICAgYXJjMiA9IFwiQSAyMCAyMCwgMCwgMCwgMSxcIjtcbiAgICAgICAgcmFkaXVzID0gMjA7XG4gICAgICAgIG9mZnNldCA9IDIwO1xuICAgICAgICBpZiAoY29tbWl0Qi50eXBlID09PSBjb21taXRUeXBlLk1FUkdFICYmIGNvbW1pdEEuaWQgIT09IGNvbW1pdEIucGFyZW50c1swXSkge1xuICAgICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AxLnh9ICR7cDIueSAtIHJhZGl1c30gJHthcmMyfSAke3AxLnggLSBvZmZzZXR9ICR7cDIueX0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AyLnggKyByYWRpdXN9ICR7cDEueX0gJHthcmN9ICR7cDIueH0gJHtwMS55ICsgb2Zmc2V0fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwMS54ID09PSBwMi54KSB7XG4gICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGlyID09PSBcIkJUXCIpIHtcbiAgICAgIGlmIChwMS54IDwgcDIueCkge1xuICAgICAgICBpZiAoY29tbWl0Qi50eXBlID09PSBjb21taXRUeXBlLk1FUkdFICYmIGNvbW1pdEEuaWQgIT09IGNvbW1pdEIucGFyZW50c1swXSkge1xuICAgICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AxLnh9ICR7cDIueSArIHJhZGl1c30gJHthcmMyfSAke3AxLnggKyBvZmZzZXR9ICR7cDIueX0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AyLnggLSByYWRpdXN9ICR7cDEueX0gJHthcmN9ICR7cDIueH0gJHtwMS55IC0gb2Zmc2V0fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwMS54ID4gcDIueCkge1xuICAgICAgICBhcmMgPSBcIkEgMjAgMjAsIDAsIDAsIDAsXCI7XG4gICAgICAgIGFyYzIgPSBcIkEgMjAgMjAsIDAsIDAsIDEsXCI7XG4gICAgICAgIHJhZGl1cyA9IDIwO1xuICAgICAgICBvZmZzZXQgPSAyMDtcbiAgICAgICAgaWYgKGNvbW1pdEIudHlwZSA9PT0gY29tbWl0VHlwZS5NRVJHRSAmJiBjb21taXRBLmlkICE9PSBjb21taXRCLnBhcmVudHNbMF0pIHtcbiAgICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtwMS54fSAke3AyLnkgKyByYWRpdXN9ICR7YXJjfSAke3AxLnggLSBvZmZzZXR9ICR7cDIueX0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AyLnggLSByYWRpdXN9ICR7cDEueX0gJHthcmN9ICR7cDIueH0gJHtwMS55IC0gb2Zmc2V0fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwMS54ID09PSBwMi54KSB7XG4gICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocDEueSA8IHAyLnkpIHtcbiAgICAgICAgaWYgKGNvbW1pdEIudHlwZSA9PT0gY29tbWl0VHlwZS5NRVJHRSAmJiBjb21taXRBLmlkICE9PSBjb21taXRCLnBhcmVudHNbMF0pIHtcbiAgICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtwMi54IC0gcmFkaXVzfSAke3AxLnl9ICR7YXJjMn0gJHtwMi54fSAke3AxLnkgKyBvZmZzZXR9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtwMS54fSAke3AyLnkgLSByYWRpdXN9ICR7YXJjfSAke3AxLnggKyBvZmZzZXR9ICR7cDIueX0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocDEueSA+IHAyLnkpIHtcbiAgICAgICAgaWYgKGNvbW1pdEIudHlwZSA9PT0gY29tbWl0VHlwZS5NRVJHRSAmJiBjb21taXRBLmlkICE9PSBjb21taXRCLnBhcmVudHNbMF0pIHtcbiAgICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtwMi54IC0gcmFkaXVzfSAke3AxLnl9ICR7YXJjfSAke3AyLnh9ICR7cDEueSAtIG9mZnNldH0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AxLnh9ICR7cDIueSArIHJhZGl1c30gJHthcmMyfSAke3AxLnggKyBvZmZzZXR9ICR7cDIueX0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocDEueSA9PT0gcDIueSkge1xuICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGxpbmVEZWYgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkxpbmUgZGVmaW5pdGlvbiBub3QgZm91bmRcIik7XG4gIH1cbiAgc3ZnLmFwcGVuZChcInBhdGhcIikuYXR0cihcImRcIiwgbGluZURlZikuYXR0cihcImNsYXNzXCIsIFwiYXJyb3cgYXJyb3dcIiArIGNvbG9yQ2xhc3NOdW0gJSBUSEVNRV9DT0xPUl9MSU1JVCk7XG59LCBcImRyYXdBcnJvd1wiKTtcbnZhciBkcmF3QXJyb3dzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc3ZnLCBjb21taXRzKSA9PiB7XG4gIGNvbnN0IGdBcnJvd3MgPSBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJjb21taXQtYXJyb3dzXCIpO1xuICBbLi4uY29tbWl0cy5rZXlzKCldLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGNvbnN0IGNvbW1pdDIgPSBjb21taXRzLmdldChrZXkpO1xuICAgIGlmIChjb21taXQyLnBhcmVudHMgJiYgY29tbWl0Mi5wYXJlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbW1pdDIucGFyZW50cy5mb3JFYWNoKChwYXJlbnQpID0+IHtcbiAgICAgICAgZHJhd0Fycm93KGdBcnJvd3MsIGNvbW1pdHMuZ2V0KHBhcmVudCksIGNvbW1pdDIsIGNvbW1pdHMpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0sIFwiZHJhd0Fycm93c1wiKTtcbnZhciBkcmF3QnJhbmNoZXMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzdmcsIGJyYW5jaGVzKSA9PiB7XG4gIGNvbnN0IGcgPSBzdmcuYXBwZW5kKFwiZ1wiKTtcbiAgYnJhbmNoZXMuZm9yRWFjaCgoYnJhbmNoMiwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBhZGp1c3RJbmRleEZvclRoZW1lID0gaW5kZXggJSBUSEVNRV9DT0xPUl9MSU1JVDtcbiAgICBjb25zdCBwb3MgPSBicmFuY2hQb3MuZ2V0KGJyYW5jaDIubmFtZSk/LnBvcztcbiAgICBpZiAocG9zID09PSB2b2lkIDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUG9zaXRpb24gbm90IGZvdW5kIGZvciBicmFuY2ggJHticmFuY2gyLm5hbWV9YCk7XG4gICAgfVxuICAgIGNvbnN0IGxpbmUgPSBnLmFwcGVuZChcImxpbmVcIik7XG4gICAgbGluZS5hdHRyKFwieDFcIiwgMCk7XG4gICAgbGluZS5hdHRyKFwieTFcIiwgcG9zKTtcbiAgICBsaW5lLmF0dHIoXCJ4MlwiLCBtYXhQb3MpO1xuICAgIGxpbmUuYXR0cihcInkyXCIsIHBvcyk7XG4gICAgbGluZS5hdHRyKFwiY2xhc3NcIiwgXCJicmFuY2ggYnJhbmNoXCIgKyBhZGp1c3RJbmRleEZvclRoZW1lKTtcbiAgICBpZiAoZGlyID09PSBcIlRCXCIpIHtcbiAgICAgIGxpbmUuYXR0cihcInkxXCIsIGRlZmF1bHRQb3MpO1xuICAgICAgbGluZS5hdHRyKFwieDFcIiwgcG9zKTtcbiAgICAgIGxpbmUuYXR0cihcInkyXCIsIG1heFBvcyk7XG4gICAgICBsaW5lLmF0dHIoXCJ4MlwiLCBwb3MpO1xuICAgIH0gZWxzZSBpZiAoZGlyID09PSBcIkJUXCIpIHtcbiAgICAgIGxpbmUuYXR0cihcInkxXCIsIG1heFBvcyk7XG4gICAgICBsaW5lLmF0dHIoXCJ4MVwiLCBwb3MpO1xuICAgICAgbGluZS5hdHRyKFwieTJcIiwgZGVmYXVsdFBvcyk7XG4gICAgICBsaW5lLmF0dHIoXCJ4MlwiLCBwb3MpO1xuICAgIH1cbiAgICBsYW5lcy5wdXNoKHBvcyk7XG4gICAgY29uc3QgbmFtZSA9IGJyYW5jaDIubmFtZTtcbiAgICBjb25zdCBsYWJlbEVsZW1lbnQgPSBkcmF3VGV4dChuYW1lKTtcbiAgICBjb25zdCBia2cgPSBnLmluc2VydChcInJlY3RcIik7XG4gICAgY29uc3QgYnJhbmNoTGFiZWwgPSBnLmluc2VydChcImdcIikuYXR0cihcImNsYXNzXCIsIFwiYnJhbmNoTGFiZWxcIik7XG4gICAgY29uc3QgbGFiZWwgPSBicmFuY2hMYWJlbC5pbnNlcnQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcImxhYmVsIGJyYW5jaC1sYWJlbFwiICsgYWRqdXN0SW5kZXhGb3JUaGVtZSk7XG4gICAgbGFiZWwubm9kZSgpLmFwcGVuZENoaWxkKGxhYmVsRWxlbWVudCk7XG4gICAgY29uc3QgYmJveCA9IGxhYmVsRWxlbWVudC5nZXRCQm94KCk7XG4gICAgYmtnLmF0dHIoXCJjbGFzc1wiLCBcImJyYW5jaExhYmVsQmtnIGxhYmVsXCIgKyBhZGp1c3RJbmRleEZvclRoZW1lKS5hdHRyKFwicnhcIiwgNCkuYXR0cihcInJ5XCIsIDQpLmF0dHIoXCJ4XCIsIC1iYm94LndpZHRoIC0gNCAtIChERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzI/LnJvdGF0ZUNvbW1pdExhYmVsID09PSB0cnVlID8gMzAgOiAwKSkuYXR0cihcInlcIiwgLWJib3guaGVpZ2h0IC8gMiArIDgpLmF0dHIoXCJ3aWR0aFwiLCBiYm94LndpZHRoICsgMTgpLmF0dHIoXCJoZWlnaHRcIiwgYmJveC5oZWlnaHQgKyA0KTtcbiAgICBsYWJlbC5hdHRyKFxuICAgICAgXCJ0cmFuc2Zvcm1cIixcbiAgICAgIFwidHJhbnNsYXRlKFwiICsgKC1iYm94LndpZHRoIC0gMTQgLSAoREVGQVVMVF9HSVRHUkFQSF9DT05GSUcyPy5yb3RhdGVDb21taXRMYWJlbCA9PT0gdHJ1ZSA/IDMwIDogMCkpICsgXCIsIFwiICsgKHBvcyAtIGJib3guaGVpZ2h0IC8gMiAtIDEpICsgXCIpXCJcbiAgICApO1xuICAgIGlmIChkaXIgPT09IFwiVEJcIikge1xuICAgICAgYmtnLmF0dHIoXCJ4XCIsIHBvcyAtIGJib3gud2lkdGggLyAyIC0gMTApLmF0dHIoXCJ5XCIsIDApO1xuICAgICAgbGFiZWwuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIChwb3MgLSBiYm94LndpZHRoIC8gMiAtIDUpICsgXCIsIDApXCIpO1xuICAgIH0gZWxzZSBpZiAoZGlyID09PSBcIkJUXCIpIHtcbiAgICAgIGJrZy5hdHRyKFwieFwiLCBwb3MgLSBiYm94LndpZHRoIC8gMiAtIDEwKS5hdHRyKFwieVwiLCBtYXhQb3MpO1xuICAgICAgbGFiZWwuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIChwb3MgLSBiYm94LndpZHRoIC8gMiAtIDUpICsgXCIsIFwiICsgbWF4UG9zICsgXCIpXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBia2cuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgtMTksIFwiICsgKHBvcyAtIGJib3guaGVpZ2h0IC8gMikgKyBcIilcIik7XG4gICAgfVxuICB9KTtcbn0sIFwiZHJhd0JyYW5jaGVzXCIpO1xudmFyIHNldEJyYW5jaFBvc2l0aW9uID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbihuYW1lLCBwb3MsIGluZGV4LCBiYm94LCByb3RhdGVDb21taXRMYWJlbCkge1xuICBicmFuY2hQb3Muc2V0KG5hbWUsIHsgcG9zLCBpbmRleCB9KTtcbiAgcG9zICs9IDUwICsgKHJvdGF0ZUNvbW1pdExhYmVsID8gNDAgOiAwKSArIChkaXIgPT09IFwiVEJcIiB8fCBkaXIgPT09IFwiQlRcIiA/IGJib3gud2lkdGggLyAyIDogMCk7XG4gIHJldHVybiBwb3M7XG59LCBcInNldEJyYW5jaFBvc2l0aW9uXCIpO1xudmFyIGRyYXcgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKHR4dCwgaWQsIHZlciwgZGlhZ09iaikge1xuICBjbGVhcjMoKTtcbiAgbG9nLmRlYnVnKFwiaW4gZ2l0Z3JhcGggcmVuZGVyZXJcIiwgdHh0ICsgXCJcXG5cIiwgXCJpZDpcIiwgaWQsIHZlcik7XG4gIGlmICghREVGQVVMVF9HSVRHUkFQSF9DT05GSUcyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiR2l0R3JhcGggY29uZmlnIG5vdCBmb3VuZFwiKTtcbiAgfVxuICBjb25zdCByb3RhdGVDb21taXRMYWJlbCA9IERFRkFVTFRfR0lUR1JBUEhfQ09ORklHMi5yb3RhdGVDb21taXRMYWJlbCA/PyBmYWxzZTtcbiAgY29uc3QgZGIyID0gZGlhZ09iai5kYjtcbiAgYWxsQ29tbWl0c0RpY3QgPSBkYjIuZ2V0Q29tbWl0cygpO1xuICBjb25zdCBicmFuY2hlcyA9IGRiMi5nZXRCcmFuY2hlc0FzT2JqQXJyYXkoKTtcbiAgZGlyID0gZGIyLmdldERpcmVjdGlvbigpO1xuICBjb25zdCBkaWFncmFtMiA9IHNlbGVjdChgW2lkPVwiJHtpZH1cIl1gKTtcbiAgbGV0IHBvcyA9IDA7XG4gIGJyYW5jaGVzLmZvckVhY2goKGJyYW5jaDIsIGluZGV4KSA9PiB7XG4gICAgY29uc3QgbGFiZWxFbGVtZW50ID0gZHJhd1RleHQoYnJhbmNoMi5uYW1lKTtcbiAgICBjb25zdCBnID0gZGlhZ3JhbTIuYXBwZW5kKFwiZ1wiKTtcbiAgICBjb25zdCBicmFuY2hMYWJlbCA9IGcuaW5zZXJ0KFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJicmFuY2hMYWJlbFwiKTtcbiAgICBjb25zdCBsYWJlbCA9IGJyYW5jaExhYmVsLmluc2VydChcImdcIikuYXR0cihcImNsYXNzXCIsIFwibGFiZWwgYnJhbmNoLWxhYmVsXCIpO1xuICAgIGxhYmVsLm5vZGUoKT8uYXBwZW5kQ2hpbGQobGFiZWxFbGVtZW50KTtcbiAgICBjb25zdCBiYm94ID0gbGFiZWxFbGVtZW50LmdldEJCb3goKTtcbiAgICBwb3MgPSBzZXRCcmFuY2hQb3NpdGlvbihicmFuY2gyLm5hbWUsIHBvcywgaW5kZXgsIGJib3gsIHJvdGF0ZUNvbW1pdExhYmVsKTtcbiAgICBsYWJlbC5yZW1vdmUoKTtcbiAgICBicmFuY2hMYWJlbC5yZW1vdmUoKTtcbiAgICBnLnJlbW92ZSgpO1xuICB9KTtcbiAgZHJhd0NvbW1pdHMoZGlhZ3JhbTIsIGFsbENvbW1pdHNEaWN0LCBmYWxzZSk7XG4gIGlmIChERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzIuc2hvd0JyYW5jaGVzKSB7XG4gICAgZHJhd0JyYW5jaGVzKGRpYWdyYW0yLCBicmFuY2hlcyk7XG4gIH1cbiAgZHJhd0Fycm93cyhkaWFncmFtMiwgYWxsQ29tbWl0c0RpY3QpO1xuICBkcmF3Q29tbWl0cyhkaWFncmFtMiwgYWxsQ29tbWl0c0RpY3QsIHRydWUpO1xuICB1dGlsc19kZWZhdWx0Lmluc2VydFRpdGxlKFxuICAgIGRpYWdyYW0yLFxuICAgIFwiZ2l0VGl0bGVUZXh0XCIsXG4gICAgREVGQVVMVF9HSVRHUkFQSF9DT05GSUcyLnRpdGxlVG9wTWFyZ2luID8/IDAsXG4gICAgZGIyLmdldERpYWdyYW1UaXRsZSgpXG4gICk7XG4gIHNldHVwR3JhcGhWaWV3Ym94KFxuICAgIHZvaWQgMCxcbiAgICBkaWFncmFtMixcbiAgICBERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzIuZGlhZ3JhbVBhZGRpbmcsXG4gICAgREVGQVVMVF9HSVRHUkFQSF9DT05GSUcyLnVzZU1heFdpZHRoXG4gICk7XG59LCBcImRyYXdcIik7XG52YXIgZ2l0R3JhcGhSZW5kZXJlcl9kZWZhdWx0ID0ge1xuICBkcmF3XG59O1xuaWYgKHZvaWQgMCkge1xuICBjb25zdCB7IGl0LCBleHBlY3QsIGRlc2NyaWJlIH0gPSB2b2lkIDA7XG4gIGRlc2NyaWJlKFwiZHJhd1RleHRcIiwgKCkgPT4ge1xuICAgIGl0KFwic2hvdWxkIGRyYXdUZXh0XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHN2Z0xhYmVsID0gZHJhd1RleHQoXCJtYWluXCIpO1xuICAgICAgZXhwZWN0KHN2Z0xhYmVsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHN2Z0xhYmVsLmNoaWxkcmVuWzBdLmlubmVySFRNTCkudG9CZShcIm1haW5cIik7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZShcImJyYW5jaFBvc2l0aW9uXCIsICgpID0+IHtcbiAgICBjb25zdCBiYm94ID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB3aWR0aDogMTAsXG4gICAgICBoZWlnaHQ6IDEwLFxuICAgICAgdG9wOiAwLFxuICAgICAgcmlnaHQ6IDAsXG4gICAgICBib3R0b206IDAsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgdG9KU09OOiAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IFwiXCIsIFwidG9KU09OXCIpXG4gICAgfTtcbiAgICBpdChcInNob3VsZCBzZXRCcmFuY2hQb3NpdGlvbnMgTFIgd2l0aCB0d28gYnJhbmNoZXNcIiwgKCkgPT4ge1xuICAgICAgZGlyID0gXCJMUlwiO1xuICAgICAgY29uc3QgcG9zID0gc2V0QnJhbmNoUG9zaXRpb24oXCJtYWluXCIsIDAsIDAsIGJib3gsIHRydWUpO1xuICAgICAgZXhwZWN0KHBvcykudG9CZSg5MCk7XG4gICAgICBleHBlY3QoYnJhbmNoUG9zLmdldChcIm1haW5cIikpLnRvRXF1YWwoeyBwb3M6IDAsIGluZGV4OiAwIH0pO1xuICAgICAgY29uc3QgcG9zTmV4dCA9IHNldEJyYW5jaFBvc2l0aW9uKFwiZGV2ZWxvcFwiLCBwb3MsIDEsIGJib3gsIHRydWUpO1xuICAgICAgZXhwZWN0KHBvc05leHQpLnRvQmUoMTgwKTtcbiAgICAgIGV4cGVjdChicmFuY2hQb3MuZ2V0KFwiZGV2ZWxvcFwiKSkudG9FcXVhbCh7IHBvcywgaW5kZXg6IDEgfSk7XG4gICAgfSk7XG4gICAgaXQoXCJzaG91bGQgc2V0QnJhbmNoUG9zaXRpb25zIFRCIHdpdGggdHdvIGJyYW5jaGVzXCIsICgpID0+IHtcbiAgICAgIGRpciA9IFwiVEJcIjtcbiAgICAgIGJib3gud2lkdGggPSAzNC45OTIxODc1O1xuICAgICAgY29uc3QgcG9zID0gc2V0QnJhbmNoUG9zaXRpb24oXCJtYWluXCIsIDAsIDAsIGJib3gsIHRydWUpO1xuICAgICAgZXhwZWN0KHBvcykudG9CZSgxMDcuNDk2MDkzNzUpO1xuICAgICAgZXhwZWN0KGJyYW5jaFBvcy5nZXQoXCJtYWluXCIpKS50b0VxdWFsKHsgcG9zOiAwLCBpbmRleDogMCB9KTtcbiAgICAgIGJib3gud2lkdGggPSA1Ni40MjE4NzU7XG4gICAgICBjb25zdCBwb3NOZXh0ID0gc2V0QnJhbmNoUG9zaXRpb24oXCJkZXZlbG9wXCIsIHBvcywgMSwgYmJveCwgdHJ1ZSk7XG4gICAgICBleHBlY3QocG9zTmV4dCkudG9CZSgyMjUuNzA3MDMxMjUpO1xuICAgICAgZXhwZWN0KGJyYW5jaFBvcy5nZXQoXCJkZXZlbG9wXCIpKS50b0VxdWFsKHsgcG9zLCBpbmRleDogMSB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKFwiY29tbWl0UG9zaXRpb25cIiwgKCkgPT4ge1xuICAgIGNvbnN0IGNvbW1pdHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbXG4gICAgICBbXG4gICAgICAgIFwiY29tbWl0WmVyb1wiLFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFwiWkVST1wiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICAgICAgc2VxOiAwLFxuICAgICAgICAgIHR5cGU6IGNvbW1pdFR5cGUuTk9STUFMLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtdLFxuICAgICAgICAgIGJyYW5jaDogXCJtYWluXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCJjb21taXRBXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCJBXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJcIixcbiAgICAgICAgICBzZXE6IDEsXG4gICAgICAgICAgdHlwZTogY29tbWl0VHlwZS5OT1JNQUwsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiWkVST1wiXSxcbiAgICAgICAgICBicmFuY2g6IFwiZmVhdHVyZVwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiY29tbWl0QlwiLFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFwiQlwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICAgICAgc2VxOiAyLFxuICAgICAgICAgIHR5cGU6IGNvbW1pdFR5cGUuTk9STUFMLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIkFcIl0sXG4gICAgICAgICAgYnJhbmNoOiBcImZlYXR1cmVcIlxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgW1xuICAgICAgICBcImNvbW1pdE1cIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcIk1cIixcbiAgICAgICAgICBtZXNzYWdlOiBcIm1lcmdlZCBicmFuY2ggZmVhdHVyZSBpbnRvIG1haW5cIixcbiAgICAgICAgICBzZXE6IDMsXG4gICAgICAgICAgdHlwZTogY29tbWl0VHlwZS5NRVJHRSxcbiAgICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgICBwYXJlbnRzOiBbXCJaRVJPXCIsIFwiQlwiXSxcbiAgICAgICAgICBicmFuY2g6IFwibWFpblwiLFxuICAgICAgICAgIGN1c3RvbUlkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiY29tbWl0Q1wiLFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFwiQ1wiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICAgICAgc2VxOiA0LFxuICAgICAgICAgIHR5cGU6IGNvbW1pdFR5cGUuTk9STUFMLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIlpFUk9cIl0sXG4gICAgICAgICAgYnJhbmNoOiBcInJlbGVhc2VcIlxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgW1xuICAgICAgICBcImNvbW1pdDVfODkyOGVhMFwiLFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFwiNS04OTI4ZWEwXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJjaGVycnktcGlja2VkIFtvYmplY3QgT2JqZWN0XSBpbnRvIHJlbGVhc2VcIixcbiAgICAgICAgICBzZXE6IDUsXG4gICAgICAgICAgdHlwZTogY29tbWl0VHlwZS5DSEVSUllfUElDSyxcbiAgICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgICBwYXJlbnRzOiBbXCJDXCIsIFwiTVwiXSxcbiAgICAgICAgICBicmFuY2g6IFwicmVsZWFzZVwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiY29tbWl0RFwiLFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFwiRFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICAgICAgc2VxOiA2LFxuICAgICAgICAgIHR5cGU6IGNvbW1pdFR5cGUuTk9STUFMLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIjUtODkyOGVhMFwiXSxcbiAgICAgICAgICBicmFuY2g6IFwicmVsZWFzZVwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiY29tbWl0N19lZDg0OGJhXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCI3LWVkODQ4YmFcIixcbiAgICAgICAgICBtZXNzYWdlOiBcImNoZXJyeS1waWNrZWQgW29iamVjdCBPYmplY3RdIGludG8gcmVsZWFzZVwiLFxuICAgICAgICAgIHNlcTogNyxcbiAgICAgICAgICB0eXBlOiBjb21taXRUeXBlLkNIRVJSWV9QSUNLLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIkRcIiwgXCJNXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJyZWxlYXNlXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIF0pO1xuICAgIGxldCBwb3MgPSAwO1xuICAgIGJyYW5jaFBvcy5zZXQoXCJtYWluXCIsIHsgcG9zOiAwLCBpbmRleDogMCB9KTtcbiAgICBicmFuY2hQb3Muc2V0KFwiZmVhdHVyZVwiLCB7IHBvczogMTA3LjQ5NjA5Mzc1LCBpbmRleDogMSB9KTtcbiAgICBicmFuY2hQb3Muc2V0KFwicmVsZWFzZVwiLCB7IHBvczogMjI0LjAzNTE1NjI1LCBpbmRleDogMiB9KTtcbiAgICBkZXNjcmliZShcIlRCXCIsICgpID0+IHtcbiAgICAgIHBvcyA9IDMwO1xuICAgICAgZGlyID0gXCJUQlwiO1xuICAgICAgY29uc3QgZXhwZWN0ZWRDb21taXRQb3NpdGlvblRCID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1xuICAgICAgICBbXCJjb21taXRaZXJvXCIsIHsgeDogMCwgeTogNDAsIHBvc1dpdGhPZmZzZXQ6IDQwIH1dLFxuICAgICAgICBbXCJjb21taXRBXCIsIHsgeDogMTA3LjQ5NjA5Mzc1LCB5OiA5MCwgcG9zV2l0aE9mZnNldDogOTAgfV0sXG4gICAgICAgIFtcImNvbW1pdEJcIiwgeyB4OiAxMDcuNDk2MDkzNzUsIHk6IDE0MCwgcG9zV2l0aE9mZnNldDogMTQwIH1dLFxuICAgICAgICBbXCJjb21taXRNXCIsIHsgeDogMCwgeTogMTkwLCBwb3NXaXRoT2Zmc2V0OiAxOTAgfV0sXG4gICAgICAgIFtcImNvbW1pdENcIiwgeyB4OiAyMjQuMDM1MTU2MjUsIHk6IDI0MCwgcG9zV2l0aE9mZnNldDogMjQwIH1dLFxuICAgICAgICBbXCJjb21taXQ1Xzg5MjhlYTBcIiwgeyB4OiAyMjQuMDM1MTU2MjUsIHk6IDI5MCwgcG9zV2l0aE9mZnNldDogMjkwIH1dLFxuICAgICAgICBbXCJjb21taXREXCIsIHsgeDogMjI0LjAzNTE1NjI1LCB5OiAzNDAsIHBvc1dpdGhPZmZzZXQ6IDM0MCB9XSxcbiAgICAgICAgW1wiY29tbWl0N19lZDg0OGJhXCIsIHsgeDogMjI0LjAzNTE1NjI1LCB5OiAzOTAsIHBvc1dpdGhPZmZzZXQ6IDM5MCB9XVxuICAgICAgXSk7XG4gICAgICBjb21taXRzLmZvckVhY2goKGNvbW1pdDIsIGtleSkgPT4ge1xuICAgICAgICBpdChgc2hvdWxkIGdpdmUgdGhlIGNvcnJlY3QgcG9zaXRpb24gZm9yIGNvbW1pdCAke2tleX1gLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBnZXRDb21taXRQb3NpdGlvbihjb21taXQyLCBwb3MsIGZhbHNlKTtcbiAgICAgICAgICBleHBlY3QocG9zaXRpb24pLnRvRXF1YWwoZXhwZWN0ZWRDb21taXRQb3NpdGlvblRCLmdldChrZXkpKTtcbiAgICAgICAgICBwb3MgKz0gNTA7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgZGVzY3JpYmUoXCJMUlwiLCAoKSA9PiB7XG4gICAgICBsZXQgcG9zMiA9IDMwO1xuICAgICAgZGlyID0gXCJMUlwiO1xuICAgICAgY29uc3QgZXhwZWN0ZWRDb21taXRQb3NpdGlvbkxSID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1xuICAgICAgICBbXCJjb21taXRaZXJvXCIsIHsgeDogMCwgeTogNDAsIHBvc1dpdGhPZmZzZXQ6IDQwIH1dLFxuICAgICAgICBbXCJjb21taXRBXCIsIHsgeDogMTA3LjQ5NjA5Mzc1LCB5OiA5MCwgcG9zV2l0aE9mZnNldDogOTAgfV0sXG4gICAgICAgIFtcImNvbW1pdEJcIiwgeyB4OiAxMDcuNDk2MDkzNzUsIHk6IDE0MCwgcG9zV2l0aE9mZnNldDogMTQwIH1dLFxuICAgICAgICBbXCJjb21taXRNXCIsIHsgeDogMCwgeTogMTkwLCBwb3NXaXRoT2Zmc2V0OiAxOTAgfV0sXG4gICAgICAgIFtcImNvbW1pdENcIiwgeyB4OiAyMjQuMDM1MTU2MjUsIHk6IDI0MCwgcG9zV2l0aE9mZnNldDogMjQwIH1dLFxuICAgICAgICBbXCJjb21taXQ1Xzg5MjhlYTBcIiwgeyB4OiAyMjQuMDM1MTU2MjUsIHk6IDI5MCwgcG9zV2l0aE9mZnNldDogMjkwIH1dLFxuICAgICAgICBbXCJjb21taXREXCIsIHsgeDogMjI0LjAzNTE1NjI1LCB5OiAzNDAsIHBvc1dpdGhPZmZzZXQ6IDM0MCB9XSxcbiAgICAgICAgW1wiY29tbWl0N19lZDg0OGJhXCIsIHsgeDogMjI0LjAzNTE1NjI1LCB5OiAzOTAsIHBvc1dpdGhPZmZzZXQ6IDM5MCB9XVxuICAgICAgXSk7XG4gICAgICBjb21taXRzLmZvckVhY2goKGNvbW1pdDIsIGtleSkgPT4ge1xuICAgICAgICBpdChgc2hvdWxkIGdpdmUgdGhlIGNvcnJlY3QgcG9zaXRpb24gZm9yIGNvbW1pdCAke2tleX1gLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBnZXRDb21taXRQb3NpdGlvbihjb21taXQyLCBwb3MyLCBmYWxzZSk7XG4gICAgICAgICAgZXhwZWN0KHBvc2l0aW9uKS50b0VxdWFsKGV4cGVjdGVkQ29tbWl0UG9zaXRpb25MUi5nZXQoa2V5KSk7XG4gICAgICAgICAgcG9zMiArPSA1MDtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBkZXNjcmliZShcImdldENvbW1pdENsYXNzVHlwZVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBleHBlY3RlZENvbW1pdENsYXNzVHlwZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKFtcbiAgICAgICAgW1wiY29tbWl0WmVyb1wiLCBcImNvbW1pdC1ub3JtYWxcIl0sXG4gICAgICAgIFtcImNvbW1pdEFcIiwgXCJjb21taXQtbm9ybWFsXCJdLFxuICAgICAgICBbXCJjb21taXRCXCIsIFwiY29tbWl0LW5vcm1hbFwiXSxcbiAgICAgICAgW1wiY29tbWl0TVwiLCBcImNvbW1pdC1tZXJnZVwiXSxcbiAgICAgICAgW1wiY29tbWl0Q1wiLCBcImNvbW1pdC1ub3JtYWxcIl0sXG4gICAgICAgIFtcImNvbW1pdDVfODkyOGVhMFwiLCBcImNvbW1pdC1jaGVycnktcGlja1wiXSxcbiAgICAgICAgW1wiY29tbWl0RFwiLCBcImNvbW1pdC1ub3JtYWxcIl0sXG4gICAgICAgIFtcImNvbW1pdDdfZWQ4NDhiYVwiLCBcImNvbW1pdC1jaGVycnktcGlja1wiXVxuICAgICAgXSk7XG4gICAgICBjb21taXRzLmZvckVhY2goKGNvbW1pdDIsIGtleSkgPT4ge1xuICAgICAgICBpdChgc2hvdWxkIGdpdmUgdGhlIGNvcnJlY3QgY2xhc3MgdHlwZSBmb3IgY29tbWl0ICR7a2V5fWAsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBjbGFzc1R5cGUgPSBnZXRDb21taXRDbGFzc1R5cGUoY29tbWl0Mik7XG4gICAgICAgICAgZXhwZWN0KGNsYXNzVHlwZSkudG9CZShleHBlY3RlZENvbW1pdENsYXNzVHlwZS5nZXQoa2V5KSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZShcImJ1aWxkaW5nIEJUIHBhcmFsbGVsIGNvbW1pdCBkaWFncmFtXCIsICgpID0+IHtcbiAgICBjb25zdCBjb21taXRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1xuICAgICAgW1xuICAgICAgICBcIjEtYWJjZGVmZ1wiLFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFwiMS1hYmNkZWZnXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJcIixcbiAgICAgICAgICBzZXE6IDAsXG4gICAgICAgICAgdHlwZTogMCxcbiAgICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgICBwYXJlbnRzOiBbXSxcbiAgICAgICAgICBicmFuY2g6IFwibWFpblwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiMi1hYmNkZWZnXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCIyLWFiY2RlZmdcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlwiLFxuICAgICAgICAgIHNlcTogMSxcbiAgICAgICAgICB0eXBlOiAwLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIjEtYWJjZGVmZ1wiXSxcbiAgICAgICAgICBicmFuY2g6IFwibWFpblwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiMy1hYmNkZWZnXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCIzLWFiY2RlZmdcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlwiLFxuICAgICAgICAgIHNlcTogMixcbiAgICAgICAgICB0eXBlOiAwLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIjItYWJjZGVmZ1wiXSxcbiAgICAgICAgICBicmFuY2g6IFwiZGV2ZWxvcFwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiNC1hYmNkZWZnXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCI0LWFiY2RlZmdcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlwiLFxuICAgICAgICAgIHNlcTogMyxcbiAgICAgICAgICB0eXBlOiAwLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIjMtYWJjZGVmZ1wiXSxcbiAgICAgICAgICBicmFuY2g6IFwiZGV2ZWxvcFwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiNS1hYmNkZWZnXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCI1LWFiY2RlZmdcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlwiLFxuICAgICAgICAgIHNlcTogNCxcbiAgICAgICAgICB0eXBlOiAwLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIjItYWJjZGVmZ1wiXSxcbiAgICAgICAgICBicmFuY2g6IFwiZmVhdHVyZVwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiNi1hYmNkZWZnXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCI2LWFiY2RlZmdcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlwiLFxuICAgICAgICAgIHNlcTogNSxcbiAgICAgICAgICB0eXBlOiAwLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIjUtYWJjZGVmZ1wiXSxcbiAgICAgICAgICBicmFuY2g6IFwiZmVhdHVyZVwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiNy1hYmNkZWZnXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCI3LWFiY2RlZmdcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlwiLFxuICAgICAgICAgIHNlcTogNixcbiAgICAgICAgICB0eXBlOiAwLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIjItYWJjZGVmZ1wiXSxcbiAgICAgICAgICBicmFuY2g6IFwibWFpblwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiOC1hYmNkZWZnXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCI4LWFiY2RlZmdcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlwiLFxuICAgICAgICAgIHNlcTogNyxcbiAgICAgICAgICB0eXBlOiAwLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIjctYWJjZGVmZ1wiXSxcbiAgICAgICAgICBicmFuY2g6IFwibWFpblwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICBdKTtcbiAgICBjb25zdCBleHBlY3RlZENvbW1pdFBvc2l0aW9uID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1xuICAgICAgW1wiMS1hYmNkZWZnXCIsIHsgeDogMCwgeTogNDAgfV0sXG4gICAgICBbXCIyLWFiY2RlZmdcIiwgeyB4OiAwLCB5OiA5MCB9XSxcbiAgICAgIFtcIjMtYWJjZGVmZ1wiLCB7IHg6IDEwNy40OTYwOTM3NSwgeTogMTQwIH1dLFxuICAgICAgW1wiNC1hYmNkZWZnXCIsIHsgeDogMTA3LjQ5NjA5Mzc1LCB5OiAxOTAgfV0sXG4gICAgICBbXCI1LWFiY2RlZmdcIiwgeyB4OiAyMjUuNzA3MDMxMjUsIHk6IDE0MCB9XSxcbiAgICAgIFtcIjYtYWJjZGVmZ1wiLCB7IHg6IDIyNS43MDcwMzEyNSwgeTogMTkwIH1dLFxuICAgICAgW1wiNy1hYmNkZWZnXCIsIHsgeDogMCwgeTogMTQwIH1dLFxuICAgICAgW1wiOC1hYmNkZWZnXCIsIHsgeDogMCwgeTogMTkwIH1dXG4gICAgXSk7XG4gICAgY29uc3QgZXhwZWN0ZWRDb21taXRQb3NpdGlvbkFmdGVyUGFyYWxsZWwgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbXG4gICAgICBbXCIxLWFiY2RlZmdcIiwgeyB4OiAwLCB5OiAyMTAgfV0sXG4gICAgICBbXCIyLWFiY2RlZmdcIiwgeyB4OiAwLCB5OiAxNjAgfV0sXG4gICAgICBbXCIzLWFiY2RlZmdcIiwgeyB4OiAxMDcuNDk2MDkzNzUsIHk6IDExMCB9XSxcbiAgICAgIFtcIjQtYWJjZGVmZ1wiLCB7IHg6IDEwNy40OTYwOTM3NSwgeTogNjAgfV0sXG4gICAgICBbXCI1LWFiY2RlZmdcIiwgeyB4OiAyMjUuNzA3MDMxMjUsIHk6IDExMCB9XSxcbiAgICAgIFtcIjYtYWJjZGVmZ1wiLCB7IHg6IDIyNS43MDcwMzEyNSwgeTogNjAgfV0sXG4gICAgICBbXCI3LWFiY2RlZmdcIiwgeyB4OiAwLCB5OiAxMTAgfV0sXG4gICAgICBbXCI4LWFiY2RlZmdcIiwgeyB4OiAwLCB5OiA2MCB9XVxuICAgIF0pO1xuICAgIGNvbnN0IGV4cGVjdGVkQ29tbWl0Q3VycmVudFBvc2l0aW9uID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1xuICAgICAgW1wiMS1hYmNkZWZnXCIsIDMwXSxcbiAgICAgIFtcIjItYWJjZGVmZ1wiLCA4MF0sXG4gICAgICBbXCIzLWFiY2RlZmdcIiwgMTMwXSxcbiAgICAgIFtcIjQtYWJjZGVmZ1wiLCAxODBdLFxuICAgICAgW1wiNS1hYmNkZWZnXCIsIDEzMF0sXG4gICAgICBbXCI2LWFiY2RlZmdcIiwgMTgwXSxcbiAgICAgIFtcIjctYWJjZGVmZ1wiLCAxMzBdLFxuICAgICAgW1wiOC1hYmNkZWZnXCIsIDE4MF1cbiAgICBdKTtcbiAgICBjb25zdCBzb3J0ZWRLZXlzID0gWy4uLmV4cGVjdGVkQ29tbWl0UG9zaXRpb24ua2V5cygpXTtcbiAgICBpdChcInNob3VsZCBnZXQgdGhlIGNvcnJlY3QgY29tbWl0IHBvc2l0aW9uIGFuZCBjdXJyZW50IHBvc2l0aW9uXCIsICgpID0+IHtcbiAgICAgIGRpciA9IFwiQlRcIjtcbiAgICAgIGxldCBjdXJQb3MgPSAzMDtcbiAgICAgIGNvbW1pdFBvcy5jbGVhcigpO1xuICAgICAgYnJhbmNoUG9zLmNsZWFyKCk7XG4gICAgICBicmFuY2hQb3Muc2V0KFwibWFpblwiLCB7IHBvczogMCwgaW5kZXg6IDAgfSk7XG4gICAgICBicmFuY2hQb3Muc2V0KFwiZGV2ZWxvcFwiLCB7IHBvczogMTA3LjQ5NjA5Mzc1LCBpbmRleDogMSB9KTtcbiAgICAgIGJyYW5jaFBvcy5zZXQoXCJmZWF0dXJlXCIsIHsgcG9zOiAyMjUuNzA3MDMxMjUsIGluZGV4OiAyIH0pO1xuICAgICAgREVGQVVMVF9HSVRHUkFQSF9DT05GSUcyLnBhcmFsbGVsQ29tbWl0cyA9IHRydWU7XG4gICAgICBjb21taXRzLmZvckVhY2goKGNvbW1pdDIsIGtleSkgPT4ge1xuICAgICAgICBpZiAoY29tbWl0Mi5wYXJlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjdXJQb3MgPSBjYWxjdWxhdGVDb21taXRQb3NpdGlvbihjb21taXQyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHNldENvbW1pdFBvc2l0aW9uKGNvbW1pdDIsIGN1clBvcyk7XG4gICAgICAgIGV4cGVjdChwb3NpdGlvbikudG9FcXVhbChleHBlY3RlZENvbW1pdFBvc2l0aW9uLmdldChrZXkpKTtcbiAgICAgICAgZXhwZWN0KGN1clBvcykudG9FcXVhbChleHBlY3RlZENvbW1pdEN1cnJlbnRQb3NpdGlvbi5nZXQoa2V5KSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBpdChcInNob3VsZCBnZXQgdGhlIGNvcnJlY3QgY29tbWl0IHBvc2l0aW9uIGFmdGVyIHBhcmFsbGVsIGNvbW1pdHNcIiwgKCkgPT4ge1xuICAgICAgY29tbWl0UG9zLmNsZWFyKCk7XG4gICAgICBicmFuY2hQb3MuY2xlYXIoKTtcbiAgICAgIGRpciA9IFwiQlRcIjtcbiAgICAgIGNvbnN0IGN1clBvcyA9IDMwO1xuICAgICAgY29tbWl0UG9zLmNsZWFyKCk7XG4gICAgICBicmFuY2hQb3MuY2xlYXIoKTtcbiAgICAgIGJyYW5jaFBvcy5zZXQoXCJtYWluXCIsIHsgcG9zOiAwLCBpbmRleDogMCB9KTtcbiAgICAgIGJyYW5jaFBvcy5zZXQoXCJkZXZlbG9wXCIsIHsgcG9zOiAxMDcuNDk2MDkzNzUsIGluZGV4OiAxIH0pO1xuICAgICAgYnJhbmNoUG9zLnNldChcImZlYXR1cmVcIiwgeyBwb3M6IDIyNS43MDcwMzEyNSwgaW5kZXg6IDIgfSk7XG4gICAgICBzZXRQYXJhbGxlbEJUUG9zKHNvcnRlZEtleXMsIGNvbW1pdHMsIGN1clBvcyk7XG4gICAgICBzb3J0ZWRLZXlzLmZvckVhY2goKGNvbW1pdDIpID0+IHtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBjb21taXRQb3MuZ2V0KGNvbW1pdDIpO1xuICAgICAgICBleHBlY3QocG9zaXRpb24pLnRvRXF1YWwoZXhwZWN0ZWRDb21taXRQb3NpdGlvbkFmdGVyUGFyYWxsZWwuZ2V0KGNvbW1pdDIpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgREVGQVVMVF9HSVRHUkFQSF9DT05GSUcyLnBhcmFsbGVsQ29tbWl0cyA9IGZhbHNlO1xuICBpdChcImFkZFwiLCAoKSA9PiB7XG4gICAgY29tbWl0UG9zLnNldChcInBhcmVudDFcIiwgeyB4OiAxLCB5OiAxIH0pO1xuICAgIGNvbW1pdFBvcy5zZXQoXCJwYXJlbnQyXCIsIHsgeDogMiwgeTogMiB9KTtcbiAgICBjb21taXRQb3Muc2V0KFwicGFyZW50M1wiLCB7IHg6IDMsIHk6IDMgfSk7XG4gICAgZGlyID0gXCJMUlwiO1xuICAgIGNvbnN0IHBhcmVudHMgPSBbXCJwYXJlbnQxXCIsIFwicGFyZW50MlwiLCBcInBhcmVudDNcIl07XG4gICAgY29uc3QgY2xvc2VzdFBhcmVudCA9IGZpbmRDbG9zZXN0UGFyZW50KHBhcmVudHMpO1xuICAgIGV4cGVjdChjbG9zZXN0UGFyZW50KS50b0JlKFwicGFyZW50M1wiKTtcbiAgICBjb21taXRQb3MuY2xlYXIoKTtcbiAgfSk7XG59XG5cbi8vIHNyYy9kaWFncmFtcy9naXQvc3R5bGVzLmpzXG52YXIgZ2V0U3R5bGVzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgob3B0aW9ucykgPT4gYFxuICAuY29tbWl0LWlkLFxuICAuY29tbWl0LW1zZyxcbiAgLmJyYW5jaC1sYWJlbCB7XG4gICAgZmlsbDogbGlnaHRncmV5O1xuICAgIGNvbG9yOiBsaWdodGdyZXk7XG4gICAgZm9udC1mYW1pbHk6ICd0cmVidWNoZXQgbXMnLCB2ZXJkYW5hLCBhcmlhbCwgc2Fucy1zZXJpZjtcbiAgICBmb250LWZhbWlseTogdmFyKC0tbWVybWFpZC1mb250LWZhbWlseSk7XG4gIH1cbiAgJHtbMCwgMSwgMiwgMywgNCwgNSwgNiwgN10ubWFwKFxuICAoaSkgPT4gYFxuICAgICAgICAuYnJhbmNoLWxhYmVsJHtpfSB7IGZpbGw6ICR7b3B0aW9uc1tcImdpdEJyYW5jaExhYmVsXCIgKyBpXX07IH1cbiAgICAgICAgLmNvbW1pdCR7aX0geyBzdHJva2U6ICR7b3B0aW9uc1tcImdpdFwiICsgaV19OyBmaWxsOiAke29wdGlvbnNbXCJnaXRcIiArIGldfTsgfVxuICAgICAgICAuY29tbWl0LWhpZ2hsaWdodCR7aX0geyBzdHJva2U6ICR7b3B0aW9uc1tcImdpdEludlwiICsgaV19OyBmaWxsOiAke29wdGlvbnNbXCJnaXRJbnZcIiArIGldfTsgfVxuICAgICAgICAubGFiZWwke2l9ICB7IGZpbGw6ICR7b3B0aW9uc1tcImdpdFwiICsgaV19OyB9XG4gICAgICAgIC5hcnJvdyR7aX0geyBzdHJva2U6ICR7b3B0aW9uc1tcImdpdFwiICsgaV19OyB9XG4gICAgICAgIGBcbikuam9pbihcIlxcblwiKX1cblxuICAuYnJhbmNoIHtcbiAgICBzdHJva2Utd2lkdGg6IDE7XG4gICAgc3Ryb2tlOiAke29wdGlvbnMubGluZUNvbG9yfTtcbiAgICBzdHJva2UtZGFzaGFycmF5OiAyO1xuICB9XG4gIC5jb21taXQtbGFiZWwgeyBmb250LXNpemU6ICR7b3B0aW9ucy5jb21taXRMYWJlbEZvbnRTaXplfTsgZmlsbDogJHtvcHRpb25zLmNvbW1pdExhYmVsQ29sb3J9O31cbiAgLmNvbW1pdC1sYWJlbC1ia2cgeyBmb250LXNpemU6ICR7b3B0aW9ucy5jb21taXRMYWJlbEZvbnRTaXplfTsgZmlsbDogJHtvcHRpb25zLmNvbW1pdExhYmVsQmFja2dyb3VuZH07IG9wYWNpdHk6IDAuNTsgfVxuICAudGFnLWxhYmVsIHsgZm9udC1zaXplOiAke29wdGlvbnMudGFnTGFiZWxGb250U2l6ZX07IGZpbGw6ICR7b3B0aW9ucy50YWdMYWJlbENvbG9yfTt9XG4gIC50YWctbGFiZWwtYmtnIHsgZmlsbDogJHtvcHRpb25zLnRhZ0xhYmVsQmFja2dyb3VuZH07IHN0cm9rZTogJHtvcHRpb25zLnRhZ0xhYmVsQm9yZGVyfTsgfVxuICAudGFnLWhvbGUgeyBmaWxsOiAke29wdGlvbnMudGV4dENvbG9yfTsgfVxuXG4gIC5jb21taXQtbWVyZ2Uge1xuICAgIHN0cm9rZTogJHtvcHRpb25zLnByaW1hcnlDb2xvcn07XG4gICAgZmlsbDogJHtvcHRpb25zLnByaW1hcnlDb2xvcn07XG4gIH1cbiAgLmNvbW1pdC1yZXZlcnNlIHtcbiAgICBzdHJva2U6ICR7b3B0aW9ucy5wcmltYXJ5Q29sb3J9O1xuICAgIGZpbGw6ICR7b3B0aW9ucy5wcmltYXJ5Q29sb3J9O1xuICAgIHN0cm9rZS13aWR0aDogMztcbiAgfVxuICAuY29tbWl0LWhpZ2hsaWdodC1vdXRlciB7XG4gIH1cbiAgLmNvbW1pdC1oaWdobGlnaHQtaW5uZXIge1xuICAgIHN0cm9rZTogJHtvcHRpb25zLnByaW1hcnlDb2xvcn07XG4gICAgZmlsbDogJHtvcHRpb25zLnByaW1hcnlDb2xvcn07XG4gIH1cblxuICAuYXJyb3cgeyBzdHJva2Utd2lkdGg6IDg7IHN0cm9rZS1saW5lY2FwOiByb3VuZDsgZmlsbDogbm9uZX1cbiAgLmdpdFRpdGxlVGV4dCB7XG4gICAgdGV4dC1hbmNob3I6IG1pZGRsZTtcbiAgICBmb250LXNpemU6IDE4cHg7XG4gICAgZmlsbDogJHtvcHRpb25zLnRleHRDb2xvcn07XG4gIH1cbmAsIFwiZ2V0U3R5bGVzXCIpO1xudmFyIHN0eWxlc19kZWZhdWx0ID0gZ2V0U3R5bGVzO1xuXG4vLyBzcmMvZGlhZ3JhbXMvZ2l0L2dpdEdyYXBoRGlhZ3JhbS50c1xudmFyIGRpYWdyYW0gPSB7XG4gIHBhcnNlcixcbiAgZGIsXG4gIHJlbmRlcmVyOiBnaXRHcmFwaFJlbmRlcmVyX2RlZmF1bHQsXG4gIHN0eWxlczogc3R5bGVzX2RlZmF1bHRcbn07XG5leHBvcnQge1xuICBkaWFncmFtXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///45978\n')}}]);